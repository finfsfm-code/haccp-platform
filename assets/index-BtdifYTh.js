var Ig=Object.defineProperty;var Ag=(t,e,s)=>e in t?Ig(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var H=(t,e,s)=>Ag(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function Og(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Um={exports:{}},dl={},Ym={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pr=Symbol.for("react.element"),Eg=Symbol.for("react.portal"),Rg=Symbol.for("react.fragment"),zg=Symbol.for("react.strict_mode"),Fg=Symbol.for("react.profiler"),Bg=Symbol.for("react.provider"),Wg=Symbol.for("react.context"),$g=Symbol.for("react.forward_ref"),Hg=Symbol.for("react.suspense"),Vg=Symbol.for("react.memo"),Ug=Symbol.for("react.lazy"),nu=Symbol.iterator;function Yg(t){return t===null||typeof t!="object"?null:(t=nu&&t[nu]||t["@@iterator"],typeof t=="function"?t:null)}var qm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xm=Object.assign,Km={};function ei(t,e,s){this.props=t,this.context=e,this.refs=Km,this.updater=s||qm}ei.prototype.isReactComponent={};ei.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ei.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qm(){}Qm.prototype=ei.prototype;function Fc(t,e,s){this.props=t,this.context=e,this.refs=Km,this.updater=s||qm}var Bc=Fc.prototype=new Qm;Bc.constructor=Fc;Xm(Bc,ei.prototype);Bc.isPureReactComponent=!0;var iu=Array.isArray,Gm=Object.prototype.hasOwnProperty,Wc={current:null},Zm={key:!0,ref:!0,__self:!0,__source:!0};function Jm(t,e,s){var n,i={},a=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)Gm.call(e,n)&&!Zm.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:pr,type:t,key:a,ref:l,props:i,_owner:Wc.current}}function qg(t,e){return{$$typeof:pr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $c(t){return typeof t=="object"&&t!==null&&t.$$typeof===pr}function Xg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var ru=/\/+/g;function El(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xg(""+t.key):e.toString(36)}function oa(t,e,s,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case pr:case Eg:l=!0}}if(l)return l=t,i=i(l),t=n===""?"."+El(l,0):n,iu(i)?(s="",t!=null&&(s=t.replace(ru,"$&/")+"/"),oa(i,e,s,"",function(d){return d})):i!=null&&($c(i)&&(i=qg(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(ru,"$&/")+"/")+t)),e.push(i)),1;if(l=0,n=n===""?".":n+":",iu(t))for(var o=0;o<t.length;o++){a=t[o];var c=n+El(a,o);l+=oa(a,e,s,c,i)}else if(c=Yg(t),typeof c=="function")for(t=c.call(t),o=0;!(a=t.next()).done;)a=a.value,c=n+El(a,o++),l+=oa(a,e,s,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Tr(t,e,s){if(t==null)return t;var n=[],i=0;return oa(t,n,"","",function(a){return e.call(s,a,i++)}),n}function Kg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ze={current:null},ca={transition:null},Qg={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:ca,ReactCurrentOwner:Wc};function ef(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Tr,forEach:function(t,e,s){Tr(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Tr(t,function(){e++}),e},toArray:function(t){return Tr(t,function(e){return e})||[]},only:function(t){if(!$c(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=ei;ee.Fragment=Rg;ee.Profiler=Fg;ee.PureComponent=Fc;ee.StrictMode=zg;ee.Suspense=Hg;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qg;ee.act=ef;ee.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Xm({},t.props),i=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=Wc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)Gm.call(e,c)&&!Zm.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:pr,type:t.type,key:i,ref:a,props:n,_owner:l}};ee.createContext=function(t){return t={$$typeof:Wg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bg,_context:t},t.Consumer=t};ee.createElement=Jm;ee.createFactory=function(t){var e=Jm.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:$g,render:t}};ee.isValidElement=$c;ee.lazy=function(t){return{$$typeof:Ug,_payload:{_status:-1,_result:t},_init:Kg}};ee.memo=function(t,e){return{$$typeof:Vg,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=ca.transition;ca.transition={};try{t()}finally{ca.transition=e}};ee.unstable_act=ef;ee.useCallback=function(t,e){return Ze.current.useCallback(t,e)};ee.useContext=function(t){return Ze.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return Ze.current.useDeferredValue(t)};ee.useEffect=function(t,e){return Ze.current.useEffect(t,e)};ee.useId=function(){return Ze.current.useId()};ee.useImperativeHandle=function(t,e,s){return Ze.current.useImperativeHandle(t,e,s)};ee.useInsertionEffect=function(t,e){return Ze.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return Ze.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return Ze.current.useMemo(t,e)};ee.useReducer=function(t,e,s){return Ze.current.useReducer(t,e,s)};ee.useRef=function(t){return Ze.current.useRef(t)};ee.useState=function(t){return Ze.current.useState(t)};ee.useSyncExternalStore=function(t,e,s){return Ze.current.useSyncExternalStore(t,e,s)};ee.useTransition=function(){return Ze.current.useTransition()};ee.version="18.3.1";Ym.exports=ee;var M=Ym.exports;const tf=Og(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg=M,Zg=Symbol.for("react.element"),Jg=Symbol.for("react.fragment"),eb=Object.prototype.hasOwnProperty,tb=Gg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sb={key:!0,ref:!0,__self:!0,__source:!0};function sf(t,e,s){var n,i={},a=null,l=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)eb.call(e,n)&&!sb.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Zg,type:t,key:a,ref:l,props:i,_owner:tb.current}}dl.Fragment=Jg;dl.jsx=sf;dl.jsxs=sf;Um.exports=dl;var r=Um.exports,_o={},nf={exports:{}},ht={},rf={exports:{}},af={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,U){var K=W.length;W.push(U);e:for(;0<K;){var re=K-1>>>1,ne=W[re];if(0<i(ne,U))W[re]=U,W[K]=ne,K=re;else break e}}function s(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var U=W[0],K=W.pop();if(K!==U){W[0]=K;e:for(var re=0,ne=W.length,Le=ne>>>1;re<Le;){var ce=2*(re+1)-1,Be=W[ce],ke=ce+1,_t=W[ke];if(0>i(Be,K))ke<ne&&0>i(_t,Be)?(W[re]=_t,W[ke]=K,re=ke):(W[re]=Be,W[ce]=K,re=ce);else if(ke<ne&&0>i(_t,K))W[re]=_t,W[ke]=K,re=ke;else break e}}return U}function i(W,U){var K=W.sortIndex-U.sortIndex;return K!==0?K:W.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(W){for(var U=s(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=W)n(d),U.sortIndex=U.expirationTime,e(c,U);else break;U=s(d)}}function w(W){if(x=!1,j(W),!f)if(s(c)!==null)f=!0,z(v);else{var U=s(d);U!==null&&X(w,U.startTime-W)}}function v(W,U){f=!1,x&&(x=!1,b(_),_=-1),p=!0;var K=m;try{for(j(U),h=s(c);h!==null&&(!(h.expirationTime>U)||W&&!L());){var re=h.callback;if(typeof re=="function"){h.callback=null,m=h.priorityLevel;var ne=re(h.expirationTime<=U);U=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===s(c)&&n(c),j(U)}else n(c);h=s(c)}if(h!==null)var Le=!0;else{var ce=s(d);ce!==null&&X(w,ce.startTime-U),Le=!1}return Le}finally{h=null,m=K,p=!1}}var N=!1,k=null,_=-1,T=5,C=-1;function L(){return!(t.unstable_now()-C<T)}function D(){if(k!==null){var W=t.unstable_now();C=W;var U=!0;try{U=k(!0,W)}finally{U?S():(N=!1,k=null)}}else N=!1}var S;if(typeof g=="function")S=function(){g(D)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,O=E.port2;E.port1.onmessage=D,S=function(){O.postMessage(null)}}else S=function(){y(D,0)};function z(W){k=W,N||(N=!0,S())}function X(W,U){_=y(function(){W(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,z(v))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(W){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var K=m;m=U;try{return W()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,U){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var K=m;m=W;try{return U()}finally{m=K}},t.unstable_scheduleCallback=function(W,U,K){var re=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?re+K:re):K=re,W){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=K+ne,W={id:u++,callback:U,priorityLevel:W,startTime:K,expirationTime:ne,sortIndex:-1},K>re?(W.sortIndex=K,e(d,W),s(c)===null&&W===s(d)&&(x?(b(_),_=-1):x=!0,X(w,K-re))):(W.sortIndex=ne,e(c,W),f||p||(f=!0,z(v))),W},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(W){var U=m;return function(){var K=m;m=U;try{return W.apply(this,arguments)}finally{m=K}}}})(af);rf.exports=af;var nb=rf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib=M,ut=nb;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lf=new Set,Hi={};function hn(t,e){Wn(t,e),Wn(t+"Capture",e)}function Wn(t,e){for(Hi[t]=e,t=0;t<e.length;t++)lf.add(e[t])}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),So=Object.prototype.hasOwnProperty,rb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,au={},lu={};function ab(t){return So.call(lu,t)?!0:So.call(au,t)?!1:rb.test(t)?lu[t]=!0:(au[t]=!0,!1)}function lb(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ob(t,e,s,n){if(e===null||typeof e>"u"||lb(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Je(t,e,s,n,i,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fe[t]=new Je(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fe[e]=new Je(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fe[t]=new Je(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fe[t]=new Je(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fe[t]=new Je(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fe[t]=new Je(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fe[t]=new Je(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fe[t]=new Je(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fe[t]=new Je(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hc=/[\-:]([a-z])/g;function Vc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hc,Vc);Fe[e]=new Je(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hc,Vc);Fe[e]=new Je(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hc,Vc);Fe[e]=new Je(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fe[t]=new Je(t,1,!1,t.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new Je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fe[t]=new Je(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uc(t,e,s,n){var i=Fe.hasOwnProperty(e)?Fe[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ob(e,s,i,n)&&(s=null),n||i===null?ab(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var os=ib.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dr=Symbol.for("react.element"),jn=Symbol.for("react.portal"),wn=Symbol.for("react.fragment"),Yc=Symbol.for("react.strict_mode"),Co=Symbol.for("react.profiler"),of=Symbol.for("react.provider"),cf=Symbol.for("react.context"),qc=Symbol.for("react.forward_ref"),Mo=Symbol.for("react.suspense"),Po=Symbol.for("react.suspense_list"),Xc=Symbol.for("react.memo"),us=Symbol.for("react.lazy"),df=Symbol.for("react.offscreen"),ou=Symbol.iterator;function ai(t){return t===null||typeof t!="object"?null:(t=ou&&t[ou]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,Rl;function vi(t){if(Rl===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Rl=e&&e[1]||""}return`
`+Rl+t}var zl=!1;function Fl(t,e){if(!t||zl)return"";zl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),l=i.length-1,o=a.length-1;1<=l&&0<=o&&i[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==a[o]){var c=`
`+i[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{zl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?vi(t):""}function cb(t){switch(t.tag){case 5:return vi(t.type);case 16:return vi("Lazy");case 13:return vi("Suspense");case 19:return vi("SuspenseList");case 0:case 2:case 15:return t=Fl(t.type,!1),t;case 11:return t=Fl(t.type.render,!1),t;case 1:return t=Fl(t.type,!0),t;default:return""}}function To(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wn:return"Fragment";case jn:return"Portal";case Co:return"Profiler";case Yc:return"StrictMode";case Mo:return"Suspense";case Po:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cf:return(t.displayName||"Context")+".Consumer";case of:return(t._context.displayName||"Context")+".Provider";case qc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xc:return e=t.displayName||null,e!==null?e:To(t.type)||"Memo";case us:e=t._payload,t=t._init;try{return To(t(e))}catch{}}return null}function db(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return To(e);case 8:return e===Yc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ub(t){var e=uf(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lr(t){t._valueTracker||(t._valueTracker=ub(t))}function hf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=uf(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function Pa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Do(t,e){var s=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function cu(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Ds(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mf(t,e){e=e.checked,e!=null&&Uc(t,"checked",e,!1)}function Lo(t,e){mf(t,e);var s=Ds(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Io(t,e.type,s):e.hasOwnProperty("defaultValue")&&Io(t,e.type,Ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function du(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Io(t,e,s){(e!=="number"||Pa(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var yi=Array.isArray;function In(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Ds(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ao(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uu(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(B(92));if(yi(s)){if(1<s.length)throw Error(B(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Ds(s)}}function ff(t,e){var s=Ds(e.value),n=Ds(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function hu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oo(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ir,xf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ir.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vi(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hb=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(t){hb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pi[e]=Pi[t]})});function gf(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Pi.hasOwnProperty(t)&&Pi[t]?(""+e).trim():e+"px"}function bf(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=gf(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var mb=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eo(t,e){if(e){if(mb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Ro(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zo=null;function Kc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fo=null,An=null,On=null;function mu(t){if(t=br(t)){if(typeof Fo!="function")throw Error(B(280));var e=t.stateNode;e&&(e=pl(e),Fo(t.stateNode,t.type,e))}}function vf(t){An?On?On.push(t):On=[t]:An=t}function yf(){if(An){var t=An,e=On;if(On=An=null,mu(t),e)for(t=0;t<e.length;t++)mu(e[t])}}function jf(t,e){return t(e)}function wf(){}var Bl=!1;function Nf(t,e,s){if(Bl)return t(e,s);Bl=!0;try{return jf(t,e,s)}finally{Bl=!1,(An!==null||On!==null)&&(wf(),yf())}}function Ui(t,e){var s=t.stateNode;if(s===null)return null;var n=pl(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(B(231,e,typeof s));return s}var Bo=!1;if(is)try{var li={};Object.defineProperty(li,"passive",{get:function(){Bo=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{Bo=!1}function fb(t,e,s,n,i,a,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var Ti=!1,Ta=null,Da=!1,Wo=null,pb={onError:function(t){Ti=!0,Ta=t}};function xb(t,e,s,n,i,a,l,o,c){Ti=!1,Ta=null,fb.apply(pb,arguments)}function gb(t,e,s,n,i,a,l,o,c){if(xb.apply(this,arguments),Ti){if(Ti){var d=Ta;Ti=!1,Ta=null}else throw Error(B(198));Da||(Da=!0,Wo=d)}}function mn(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function kf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fu(t){if(mn(t)!==t)throw Error(B(188))}function bb(t){var e=t.alternate;if(!e){if(e=mn(t),e===null)throw Error(B(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return fu(i),t;if(a===n)return fu(i),e;a=a.sibling}throw Error(B(188))}if(s.return!==n.return)s=i,n=a;else{for(var l=!1,o=i.child;o;){if(o===s){l=!0,s=i,n=a;break}if(o===n){l=!0,n=i,s=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===s){l=!0,s=a,n=i;break}if(o===n){l=!0,n=a,s=i;break}o=o.sibling}if(!l)throw Error(B(189))}}if(s.alternate!==n)throw Error(B(190))}if(s.tag!==3)throw Error(B(188));return s.stateNode.current===s?t:e}function _f(t){return t=bb(t),t!==null?Sf(t):null}function Sf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Sf(t);if(e!==null)return e;t=t.sibling}return null}var Cf=ut.unstable_scheduleCallback,pu=ut.unstable_cancelCallback,vb=ut.unstable_shouldYield,yb=ut.unstable_requestPaint,_e=ut.unstable_now,jb=ut.unstable_getCurrentPriorityLevel,Qc=ut.unstable_ImmediatePriority,Mf=ut.unstable_UserBlockingPriority,La=ut.unstable_NormalPriority,wb=ut.unstable_LowPriority,Pf=ut.unstable_IdlePriority,ul=null,$t=null;function Nb(t){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(ul,t,void 0,(t.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:Sb,kb=Math.log,_b=Math.LN2;function Sb(t){return t>>>=0,t===0?32:31-(kb(t)/_b|0)|0}var Ar=64,Or=4194304;function ji(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ia(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,l=s&268435455;if(l!==0){var o=l&~i;o!==0?n=ji(o):(a&=l,a!==0&&(n=ji(a)))}else l=s&~i,l!==0?n=ji(l):a!==0&&(n=ji(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-Lt(e),i=1<<s,n|=t[s],e&=~i;return n}function Cb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mb(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Lt(a),o=1<<l,c=i[l];c===-1?(!(o&s)||o&n)&&(i[l]=Cb(o,e)):c<=e&&(t.expiredLanes|=o),a&=~o}}function $o(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tf(){var t=Ar;return Ar<<=1,!(Ar&4194240)&&(Ar=64),t}function Wl(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function xr(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Lt(e),t[e]=s}function Pb(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-Lt(s),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~a}}function Gc(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-Lt(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var oe=0;function Df(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lf,Zc,If,Af,Of,Ho=!1,Er=[],ws=null,Ns=null,ks=null,Yi=new Map,qi=new Map,ms=[],Tb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xu(t,e){switch(t){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":Yi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(e.pointerId)}}function oi(t,e,s,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=br(e),e!==null&&Zc(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Db(t,e,s,n,i){switch(e){case"focusin":return ws=oi(ws,t,e,s,n,i),!0;case"dragenter":return Ns=oi(Ns,t,e,s,n,i),!0;case"mouseover":return ks=oi(ks,t,e,s,n,i),!0;case"pointerover":var a=i.pointerId;return Yi.set(a,oi(Yi.get(a)||null,t,e,s,n,i)),!0;case"gotpointercapture":return a=i.pointerId,qi.set(a,oi(qi.get(a)||null,t,e,s,n,i)),!0}return!1}function Ef(t){var e=Xs(t.target);if(e!==null){var s=mn(e);if(s!==null){if(e=s.tag,e===13){if(e=kf(s),e!==null){t.blockedOn=e,Of(t.priority,function(){If(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function da(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Vo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);zo=n,s.target.dispatchEvent(n),zo=null}else return e=br(s),e!==null&&Zc(e),t.blockedOn=s,!1;e.shift()}return!0}function gu(t,e,s){da(t)&&s.delete(e)}function Lb(){Ho=!1,ws!==null&&da(ws)&&(ws=null),Ns!==null&&da(Ns)&&(Ns=null),ks!==null&&da(ks)&&(ks=null),Yi.forEach(gu),qi.forEach(gu)}function ci(t,e){t.blockedOn===e&&(t.blockedOn=null,Ho||(Ho=!0,ut.unstable_scheduleCallback(ut.unstable_NormalPriority,Lb)))}function Xi(t){function e(i){return ci(i,t)}if(0<Er.length){ci(Er[0],t);for(var s=1;s<Er.length;s++){var n=Er[s];n.blockedOn===t&&(n.blockedOn=null)}}for(ws!==null&&ci(ws,t),Ns!==null&&ci(Ns,t),ks!==null&&ci(ks,t),Yi.forEach(e),qi.forEach(e),s=0;s<ms.length;s++)n=ms[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<ms.length&&(s=ms[0],s.blockedOn===null);)Ef(s),s.blockedOn===null&&ms.shift()}var En=os.ReactCurrentBatchConfig,Aa=!0;function Ib(t,e,s,n){var i=oe,a=En.transition;En.transition=null;try{oe=1,Jc(t,e,s,n)}finally{oe=i,En.transition=a}}function Ab(t,e,s,n){var i=oe,a=En.transition;En.transition=null;try{oe=4,Jc(t,e,s,n)}finally{oe=i,En.transition=a}}function Jc(t,e,s,n){if(Aa){var i=Vo(t,e,s,n);if(i===null)Gl(t,e,n,Oa,s),xu(t,n);else if(Db(i,t,e,s,n))n.stopPropagation();else if(xu(t,n),e&4&&-1<Tb.indexOf(t)){for(;i!==null;){var a=br(i);if(a!==null&&Lf(a),a=Vo(t,e,s,n),a===null&&Gl(t,e,n,Oa,s),a===i)break;i=a}i!==null&&n.stopPropagation()}else Gl(t,e,n,null,s)}}var Oa=null;function Vo(t,e,s,n){if(Oa=null,t=Kc(n),t=Xs(t),t!==null)if(e=mn(t),e===null)t=null;else if(s=e.tag,s===13){if(t=kf(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Oa=t,null}function Rf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jb()){case Qc:return 1;case Mf:return 4;case La:case wb:return 16;case Pf:return 536870912;default:return 16}default:return 16}}var ps=null,ed=null,ua=null;function zf(){if(ua)return ua;var t,e=ed,s=e.length,n,i="value"in ps?ps.value:ps.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var l=s-t;for(n=1;n<=l&&e[s-n]===i[a-n];n++);return ua=i.slice(t,1<n?1-n:void 0)}function ha(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rr(){return!0}function bu(){return!1}function mt(t){function e(s,n,i,a,l){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Rr:bu,this.isPropagationStopped=bu,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),e}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=mt(ti),gr=je({},ti,{view:0,detail:0}),Ob=mt(gr),$l,Hl,di,hl=je({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==di&&(di&&t.type==="mousemove"?($l=t.screenX-di.screenX,Hl=t.screenY-di.screenY):Hl=$l=0,di=t),$l)},movementY:function(t){return"movementY"in t?t.movementY:Hl}}),vu=mt(hl),Eb=je({},hl,{dataTransfer:0}),Rb=mt(Eb),zb=je({},gr,{relatedTarget:0}),Vl=mt(zb),Fb=je({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),Bb=mt(Fb),Wb=je({},ti,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$b=mt(Wb),Hb=je({},ti,{data:0}),yu=mt(Hb),Vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ub={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Yb[t])?!!e[t]:!1}function sd(){return qb}var Xb=je({},gr,{key:function(t){if(t.key){var e=Vb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ha(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ub[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sd,charCode:function(t){return t.type==="keypress"?ha(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ha(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kb=mt(Xb),Qb=je({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=mt(Qb),Gb=je({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sd}),Zb=mt(Gb),Jb=je({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),ev=mt(Jb),tv=je({},hl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sv=mt(tv),nv=[9,13,27,32],nd=is&&"CompositionEvent"in window,Di=null;is&&"documentMode"in document&&(Di=document.documentMode);var iv=is&&"TextEvent"in window&&!Di,Ff=is&&(!nd||Di&&8<Di&&11>=Di),wu=" ",Nu=!1;function Bf(t,e){switch(t){case"keyup":return nv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nn=!1;function rv(t,e){switch(t){case"compositionend":return Wf(e);case"keypress":return e.which!==32?null:(Nu=!0,wu);case"textInput":return t=e.data,t===wu&&Nu?null:t;default:return null}}function av(t,e){if(Nn)return t==="compositionend"||!nd&&Bf(t,e)?(t=zf(),ua=ed=ps=null,Nn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ff&&e.locale!=="ko"?null:e.data;default:return null}}var lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ku(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lv[t.type]:e==="textarea"}function $f(t,e,s,n){vf(n),e=Ea(e,"onChange"),0<e.length&&(s=new td("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Li=null,Ki=null;function ov(t){Jf(t,0)}function ml(t){var e=Sn(t);if(hf(e))return t}function cv(t,e){if(t==="change")return e}var Hf=!1;if(is){var Ul;if(is){var Yl="oninput"in document;if(!Yl){var _u=document.createElement("div");_u.setAttribute("oninput","return;"),Yl=typeof _u.oninput=="function"}Ul=Yl}else Ul=!1;Hf=Ul&&(!document.documentMode||9<document.documentMode)}function Su(){Li&&(Li.detachEvent("onpropertychange",Vf),Ki=Li=null)}function Vf(t){if(t.propertyName==="value"&&ml(Ki)){var e=[];$f(e,Ki,t,Kc(t)),Nf(ov,e)}}function dv(t,e,s){t==="focusin"?(Su(),Li=e,Ki=s,Li.attachEvent("onpropertychange",Vf)):t==="focusout"&&Su()}function uv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ml(Ki)}function hv(t,e){if(t==="click")return ml(e)}function mv(t,e){if(t==="input"||t==="change")return ml(e)}function fv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ot=typeof Object.is=="function"?Object.is:fv;function Qi(t,e){if(Ot(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!So.call(e,i)||!Ot(t[i],e[i]))return!1}return!0}function Cu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mu(t,e){var s=Cu(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Cu(s)}}function Uf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yf(){for(var t=window,e=Pa();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Pa(t.document)}return e}function id(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pv(t){var e=Yf(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Uf(s.ownerDocument.documentElement,s)){if(n!==null&&id(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=Mu(s,a);var l=Mu(s,n);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xv=is&&"documentMode"in document&&11>=document.documentMode,kn=null,Uo=null,Ii=null,Yo=!1;function Pu(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Yo||kn==null||kn!==Pa(n)||(n=kn,"selectionStart"in n&&id(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ii&&Qi(Ii,n)||(Ii=n,n=Ea(Uo,"onSelect"),0<n.length&&(e=new td("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=kn)))}function zr(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var _n={animationend:zr("Animation","AnimationEnd"),animationiteration:zr("Animation","AnimationIteration"),animationstart:zr("Animation","AnimationStart"),transitionend:zr("Transition","TransitionEnd")},ql={},qf={};is&&(qf=document.createElement("div").style,"AnimationEvent"in window||(delete _n.animationend.animation,delete _n.animationiteration.animation,delete _n.animationstart.animation),"TransitionEvent"in window||delete _n.transitionend.transition);function fl(t){if(ql[t])return ql[t];if(!_n[t])return t;var e=_n[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in qf)return ql[t]=e[s];return t}var Xf=fl("animationend"),Kf=fl("animationiteration"),Qf=fl("animationstart"),Gf=fl("transitionend"),Zf=new Map,Tu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,e){Zf.set(t,e),hn(e,[t])}for(var Xl=0;Xl<Tu.length;Xl++){var Kl=Tu[Xl],gv=Kl.toLowerCase(),bv=Kl[0].toUpperCase()+Kl.slice(1);Os(gv,"on"+bv)}Os(Xf,"onAnimationEnd");Os(Kf,"onAnimationIteration");Os(Qf,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(Gf,"onTransitionEnd");Wn("onMouseEnter",["mouseout","mouseover"]);Wn("onMouseLeave",["mouseout","mouseover"]);Wn("onPointerEnter",["pointerout","pointerover"]);Wn("onPointerLeave",["pointerout","pointerover"]);hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vv=new Set("cancel close invalid load scroll toggle".split(" ").concat(wi));function Du(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,gb(n,e,void 0,t),t.currentTarget=null}function Jf(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;Du(i,o,d),a=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;Du(i,o,d),a=c}}}if(Da)throw t=Wo,Da=!1,Wo=null,t}function me(t,e){var s=e[Go];s===void 0&&(s=e[Go]=new Set);var n=t+"__bubble";s.has(n)||(ep(e,t,2,!1),s.add(n))}function Ql(t,e,s){var n=0;e&&(n|=4),ep(s,t,n,e)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Gi(t){if(!t[Fr]){t[Fr]=!0,lf.forEach(function(s){s!=="selectionchange"&&(vv.has(s)||Ql(s,!1,t),Ql(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fr]||(e[Fr]=!0,Ql("selectionchange",!1,e))}}function ep(t,e,s,n){switch(Rf(e)){case 1:var i=Ib;break;case 4:i=Ab;break;default:i=Jc}s=i.bind(null,e,s,t),i=void 0,!Bo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function Gl(t,e,s,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;o!==null;){if(l=Xs(o),l===null)return;if(c=l.tag,c===5||c===6){n=a=l;continue e}o=o.parentNode}}n=n.return}Nf(function(){var d=a,u=Kc(s),h=[];e:{var m=Zf.get(t);if(m!==void 0){var p=td,f=t;switch(t){case"keypress":if(ha(s)===0)break e;case"keydown":case"keyup":p=Kb;break;case"focusin":f="focus",p=Vl;break;case"focusout":f="blur",p=Vl;break;case"beforeblur":case"afterblur":p=Vl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Rb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Zb;break;case Xf:case Kf:case Qf:p=Bb;break;case Gf:p=ev;break;case"scroll":p=Ob;break;case"wheel":p=sv;break;case"copy":case"cut":case"paste":p=$b;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ju}var x=(e&4)!==0,y=!x&&t==="scroll",b=x?m!==null?m+"Capture":null:m;x=[];for(var g=d,j;g!==null;){j=g;var w=j.stateNode;if(j.tag===5&&w!==null&&(j=w,b!==null&&(w=Ui(g,b),w!=null&&x.push(Zi(g,w,j)))),y)break;g=g.return}0<x.length&&(m=new p(m,f,null,s,u),h.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&s!==zo&&(f=s.relatedTarget||s.fromElement)&&(Xs(f)||f[rs]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(f=s.relatedTarget||s.toElement,p=d,f=f?Xs(f):null,f!==null&&(y=mn(f),f!==y||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=d),p!==f)){if(x=vu,w="onMouseLeave",b="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=ju,w="onPointerLeave",b="onPointerEnter",g="pointer"),y=p==null?m:Sn(p),j=f==null?m:Sn(f),m=new x(w,g+"leave",p,s,u),m.target=y,m.relatedTarget=j,w=null,Xs(u)===d&&(x=new x(b,g+"enter",f,s,u),x.target=j,x.relatedTarget=y,w=x),y=w,p&&f)t:{for(x=p,b=f,g=0,j=x;j;j=bn(j))g++;for(j=0,w=b;w;w=bn(w))j++;for(;0<g-j;)x=bn(x),g--;for(;0<j-g;)b=bn(b),j--;for(;g--;){if(x===b||b!==null&&x===b.alternate)break t;x=bn(x),b=bn(b)}x=null}else x=null;p!==null&&Lu(h,m,p,x,!1),f!==null&&y!==null&&Lu(h,y,f,x,!0)}}e:{if(m=d?Sn(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var v=cv;else if(ku(m))if(Hf)v=mv;else{v=uv;var N=dv}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(v=hv);if(v&&(v=v(t,d))){$f(h,v,s,u);break e}N&&N(t,m,d),t==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Io(m,"number",m.value)}switch(N=d?Sn(d):window,t){case"focusin":(ku(N)||N.contentEditable==="true")&&(kn=N,Uo=d,Ii=null);break;case"focusout":Ii=Uo=kn=null;break;case"mousedown":Yo=!0;break;case"contextmenu":case"mouseup":case"dragend":Yo=!1,Pu(h,s,u);break;case"selectionchange":if(xv)break;case"keydown":case"keyup":Pu(h,s,u)}var k;if(nd)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Nn?Bf(t,s)&&(_="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(_="onCompositionStart");_&&(Ff&&s.locale!=="ko"&&(Nn||_!=="onCompositionStart"?_==="onCompositionEnd"&&Nn&&(k=zf()):(ps=u,ed="value"in ps?ps.value:ps.textContent,Nn=!0)),N=Ea(d,_),0<N.length&&(_=new yu(_,t,null,s,u),h.push({event:_,listeners:N}),k?_.data=k:(k=Wf(s),k!==null&&(_.data=k)))),(k=iv?rv(t,s):av(t,s))&&(d=Ea(d,"onBeforeInput"),0<d.length&&(u=new yu("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=k))}Jf(h,e)})}function Zi(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Ea(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Ui(t,s),a!=null&&n.unshift(Zi(t,a,i)),a=Ui(t,e),a!=null&&n.push(Zi(t,a,i))),t=t.return}return n}function bn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lu(t,e,s,n,i){for(var a=e._reactName,l=[];s!==null&&s!==n;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,i?(c=Ui(s,a),c!=null&&l.unshift(Zi(s,c,o))):i||(c=Ui(s,a),c!=null&&l.push(Zi(s,c,o)))),s=s.return}l.length!==0&&t.push({event:e,listeners:l})}var yv=/\r\n?/g,jv=/\u0000|\uFFFD/g;function Iu(t){return(typeof t=="string"?t:""+t).replace(yv,`
`).replace(jv,"")}function Br(t,e,s){if(e=Iu(e),Iu(t)!==e&&s)throw Error(B(425))}function Ra(){}var qo=null,Xo=null;function Ko(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qo=typeof setTimeout=="function"?setTimeout:void 0,wv=typeof clearTimeout=="function"?clearTimeout:void 0,Au=typeof Promise=="function"?Promise:void 0,Nv=typeof queueMicrotask=="function"?queueMicrotask:typeof Au<"u"?function(t){return Au.resolve(null).then(t).catch(kv)}:Qo;function kv(t){setTimeout(function(){throw t})}function Zl(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),Xi(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);Xi(e)}function _s(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ou(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var si=Math.random().toString(36).slice(2),Wt="__reactFiber$"+si,Ji="__reactProps$"+si,rs="__reactContainer$"+si,Go="__reactEvents$"+si,_v="__reactListeners$"+si,Sv="__reactHandles$"+si;function Xs(t){var e=t[Wt];if(e)return e;for(var s=t.parentNode;s;){if(e=s[rs]||s[Wt]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Ou(t);t!==null;){if(s=t[Wt])return s;t=Ou(t)}return e}t=s,s=t.parentNode}return null}function br(t){return t=t[Wt]||t[rs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function pl(t){return t[Ji]||null}var Zo=[],Cn=-1;function Es(t){return{current:t}}function fe(t){0>Cn||(t.current=Zo[Cn],Zo[Cn]=null,Cn--)}function ue(t,e){Cn++,Zo[Cn]=t.current,t.current=e}var Ls={},qe=Es(Ls),it=Es(!1),sn=Ls;function $n(t,e){var s=t.type.contextTypes;if(!s)return Ls;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function rt(t){return t=t.childContextTypes,t!=null}function za(){fe(it),fe(qe)}function Eu(t,e,s){if(qe.current!==Ls)throw Error(B(168));ue(qe,e),ue(it,s)}function tp(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(B(108,db(t)||"Unknown",i));return je({},s,n)}function Fa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ls,sn=qe.current,ue(qe,t),ue(it,it.current),!0}function Ru(t,e,s){var n=t.stateNode;if(!n)throw Error(B(169));s?(t=tp(t,e,sn),n.__reactInternalMemoizedMergedChildContext=t,fe(it),fe(qe),ue(qe,t)):fe(it),ue(it,s)}var Kt=null,xl=!1,Jl=!1;function sp(t){Kt===null?Kt=[t]:Kt.push(t)}function Cv(t){xl=!0,sp(t)}function Rs(){if(!Jl&&Kt!==null){Jl=!0;var t=0,e=oe;try{var s=Kt;for(oe=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}Kt=null,xl=!1}catch(i){throw Kt!==null&&(Kt=Kt.slice(t+1)),Cf(Qc,Rs),i}finally{oe=e,Jl=!1}}return null}var Mn=[],Pn=0,Ba=null,Wa=0,gt=[],bt=0,nn=null,Zt=1,Jt="";function Vs(t,e){Mn[Pn++]=Wa,Mn[Pn++]=Ba,Ba=t,Wa=e}function np(t,e,s){gt[bt++]=Zt,gt[bt++]=Jt,gt[bt++]=nn,nn=t;var n=Zt;t=Jt;var i=32-Lt(n)-1;n&=~(1<<i),s+=1;var a=32-Lt(e)+i;if(30<a){var l=i-i%5;a=(n&(1<<l)-1).toString(32),n>>=l,i-=l,Zt=1<<32-Lt(e)+i|s<<i|n,Jt=a+t}else Zt=1<<a|s<<i|n,Jt=t}function rd(t){t.return!==null&&(Vs(t,1),np(t,1,0))}function ad(t){for(;t===Ba;)Ba=Mn[--Pn],Mn[Pn]=null,Wa=Mn[--Pn],Mn[Pn]=null;for(;t===nn;)nn=gt[--bt],gt[bt]=null,Jt=gt[--bt],gt[bt]=null,Zt=gt[--bt],gt[bt]=null}var dt=null,ct=null,xe=!1,Tt=null;function ip(t,e){var s=vt(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function zu(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dt=t,ct=_s(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dt=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=nn!==null?{id:Zt,overflow:Jt}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=vt(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,dt=t,ct=null,!0):!1;default:return!1}}function Jo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ec(t){if(xe){var e=ct;if(e){var s=e;if(!zu(t,e)){if(Jo(t))throw Error(B(418));e=_s(s.nextSibling);var n=dt;e&&zu(t,e)?ip(n,s):(t.flags=t.flags&-4097|2,xe=!1,dt=t)}}else{if(Jo(t))throw Error(B(418));t.flags=t.flags&-4097|2,xe=!1,dt=t}}}function Fu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dt=t}function Wr(t){if(t!==dt)return!1;if(!xe)return Fu(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ko(t.type,t.memoizedProps)),e&&(e=ct)){if(Jo(t))throw rp(),Error(B(418));for(;e;)ip(t,e),e=_s(e.nextSibling)}if(Fu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){ct=_s(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=dt?_s(t.stateNode.nextSibling):null;return!0}function rp(){for(var t=ct;t;)t=_s(t.nextSibling)}function Hn(){ct=dt=null,xe=!1}function ld(t){Tt===null?Tt=[t]:Tt.push(t)}var Mv=os.ReactCurrentBatchConfig;function ui(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(B(309));var n=s.stateNode}if(!n)throw Error(B(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var o=i.refs;l===null?delete o[a]:o[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(B(284));if(!s._owner)throw Error(B(290,t))}return t}function $r(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bu(t){var e=t._init;return e(t._payload)}function ap(t){function e(b,g){if(t){var j=b.deletions;j===null?(b.deletions=[g],b.flags|=16):j.push(g)}}function s(b,g){if(!t)return null;for(;g!==null;)e(b,g),g=g.sibling;return null}function n(b,g){for(b=new Map;g!==null;)g.key!==null?b.set(g.key,g):b.set(g.index,g),g=g.sibling;return b}function i(b,g){return b=Ps(b,g),b.index=0,b.sibling=null,b}function a(b,g,j){return b.index=j,t?(j=b.alternate,j!==null?(j=j.index,j<g?(b.flags|=2,g):j):(b.flags|=2,g)):(b.flags|=1048576,g)}function l(b){return t&&b.alternate===null&&(b.flags|=2),b}function o(b,g,j,w){return g===null||g.tag!==6?(g=ao(j,b.mode,w),g.return=b,g):(g=i(g,j),g.return=b,g)}function c(b,g,j,w){var v=j.type;return v===wn?u(b,g,j.props.children,w,j.key):g!==null&&(g.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===us&&Bu(v)===g.type)?(w=i(g,j.props),w.ref=ui(b,g,j),w.return=b,w):(w=va(j.type,j.key,j.props,null,b.mode,w),w.ref=ui(b,g,j),w.return=b,w)}function d(b,g,j,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==j.containerInfo||g.stateNode.implementation!==j.implementation?(g=lo(j,b.mode,w),g.return=b,g):(g=i(g,j.children||[]),g.return=b,g)}function u(b,g,j,w,v){return g===null||g.tag!==7?(g=Js(j,b.mode,w,v),g.return=b,g):(g=i(g,j),g.return=b,g)}function h(b,g,j){if(typeof g=="string"&&g!==""||typeof g=="number")return g=ao(""+g,b.mode,j),g.return=b,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Dr:return j=va(g.type,g.key,g.props,null,b.mode,j),j.ref=ui(b,null,g),j.return=b,j;case jn:return g=lo(g,b.mode,j),g.return=b,g;case us:var w=g._init;return h(b,w(g._payload),j)}if(yi(g)||ai(g))return g=Js(g,b.mode,j,null),g.return=b,g;$r(b,g)}return null}function m(b,g,j,w){var v=g!==null?g.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return v!==null?null:o(b,g,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Dr:return j.key===v?c(b,g,j,w):null;case jn:return j.key===v?d(b,g,j,w):null;case us:return v=j._init,m(b,g,v(j._payload),w)}if(yi(j)||ai(j))return v!==null?null:u(b,g,j,w,null);$r(b,j)}return null}function p(b,g,j,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return b=b.get(j)||null,o(g,b,""+w,v);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Dr:return b=b.get(w.key===null?j:w.key)||null,c(g,b,w,v);case jn:return b=b.get(w.key===null?j:w.key)||null,d(g,b,w,v);case us:var N=w._init;return p(b,g,j,N(w._payload),v)}if(yi(w)||ai(w))return b=b.get(j)||null,u(g,b,w,v,null);$r(g,w)}return null}function f(b,g,j,w){for(var v=null,N=null,k=g,_=g=0,T=null;k!==null&&_<j.length;_++){k.index>_?(T=k,k=null):T=k.sibling;var C=m(b,k,j[_],w);if(C===null){k===null&&(k=T);break}t&&k&&C.alternate===null&&e(b,k),g=a(C,g,_),N===null?v=C:N.sibling=C,N=C,k=T}if(_===j.length)return s(b,k),xe&&Vs(b,_),v;if(k===null){for(;_<j.length;_++)k=h(b,j[_],w),k!==null&&(g=a(k,g,_),N===null?v=k:N.sibling=k,N=k);return xe&&Vs(b,_),v}for(k=n(b,k);_<j.length;_++)T=p(k,b,_,j[_],w),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?_:T.key),g=a(T,g,_),N===null?v=T:N.sibling=T,N=T);return t&&k.forEach(function(L){return e(b,L)}),xe&&Vs(b,_),v}function x(b,g,j,w){var v=ai(j);if(typeof v!="function")throw Error(B(150));if(j=v.call(j),j==null)throw Error(B(151));for(var N=v=null,k=g,_=g=0,T=null,C=j.next();k!==null&&!C.done;_++,C=j.next()){k.index>_?(T=k,k=null):T=k.sibling;var L=m(b,k,C.value,w);if(L===null){k===null&&(k=T);break}t&&k&&L.alternate===null&&e(b,k),g=a(L,g,_),N===null?v=L:N.sibling=L,N=L,k=T}if(C.done)return s(b,k),xe&&Vs(b,_),v;if(k===null){for(;!C.done;_++,C=j.next())C=h(b,C.value,w),C!==null&&(g=a(C,g,_),N===null?v=C:N.sibling=C,N=C);return xe&&Vs(b,_),v}for(k=n(b,k);!C.done;_++,C=j.next())C=p(k,b,_,C.value,w),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?_:C.key),g=a(C,g,_),N===null?v=C:N.sibling=C,N=C);return t&&k.forEach(function(D){return e(b,D)}),xe&&Vs(b,_),v}function y(b,g,j,w){if(typeof j=="object"&&j!==null&&j.type===wn&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Dr:e:{for(var v=j.key,N=g;N!==null;){if(N.key===v){if(v=j.type,v===wn){if(N.tag===7){s(b,N.sibling),g=i(N,j.props.children),g.return=b,b=g;break e}}else if(N.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===us&&Bu(v)===N.type){s(b,N.sibling),g=i(N,j.props),g.ref=ui(b,N,j),g.return=b,b=g;break e}s(b,N);break}else e(b,N);N=N.sibling}j.type===wn?(g=Js(j.props.children,b.mode,w,j.key),g.return=b,b=g):(w=va(j.type,j.key,j.props,null,b.mode,w),w.ref=ui(b,g,j),w.return=b,b=w)}return l(b);case jn:e:{for(N=j.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===j.containerInfo&&g.stateNode.implementation===j.implementation){s(b,g.sibling),g=i(g,j.children||[]),g.return=b,b=g;break e}else{s(b,g);break}else e(b,g);g=g.sibling}g=lo(j,b.mode,w),g.return=b,b=g}return l(b);case us:return N=j._init,y(b,g,N(j._payload),w)}if(yi(j))return f(b,g,j,w);if(ai(j))return x(b,g,j,w);$r(b,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,g!==null&&g.tag===6?(s(b,g.sibling),g=i(g,j),g.return=b,b=g):(s(b,g),g=ao(j,b.mode,w),g.return=b,b=g),l(b)):s(b,g)}return y}var Vn=ap(!0),lp=ap(!1),$a=Es(null),Ha=null,Tn=null,od=null;function cd(){od=Tn=Ha=null}function dd(t){var e=$a.current;fe($a),t._currentValue=e}function tc(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function Rn(t,e){Ha=t,od=Tn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nt=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(od!==t)if(t={context:t,memoizedValue:e,next:null},Tn===null){if(Ha===null)throw Error(B(308));Tn=t,Ha.dependencies={lanes:0,firstContext:t}}else Tn=Tn.next=t;return e}var Ks=null;function ud(t){Ks===null?Ks=[t]:Ks.push(t)}function op(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,ud(e)):(s.next=i.next,i.next=s),e.interleaved=s,as(t,n)}function as(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var hs=!1;function hd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ns(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,se&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,as(t,s)}return i=n.interleaved,i===null?(e.next=e,ud(n)):(e.next=i.next,i.next=e),n.interleaved=e,as(t,s)}function ma(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Gc(t,s)}}function Wu(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=l:a=a.next=l,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Va(t,e,s,n){var i=t.updateQueue;hs=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?a=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;l=0,u=d=c=null,o=a;do{var m=o.lane,p=o.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=t,x=o;switch(m=e,p=s,x.tag){case 1:if(f=x.payload,typeof f=="function"){h=f.call(p,h,m);break e}h=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=x.payload,m=typeof f=="function"?f.call(p,h,m):f,m==null)break e;h=je({},h,m);break e;case 2:hs=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else p={eventTime:p,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=p,c=h):u=u.next=p,l|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);an|=l,t.lanes=l,t.memoizedState=h}}function $u(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(B(191,i));i.call(n)}}}var vr={},Ht=Es(vr),er=Es(vr),tr=Es(vr);function Qs(t){if(t===vr)throw Error(B(174));return t}function md(t,e){switch(ue(tr,e),ue(er,t),ue(Ht,vr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Oo(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Oo(e,t)}fe(Ht),ue(Ht,e)}function Un(){fe(Ht),fe(er),fe(tr)}function dp(t){Qs(tr.current);var e=Qs(Ht.current),s=Oo(e,t.type);e!==s&&(ue(er,t),ue(Ht,s))}function fd(t){er.current===t&&(fe(Ht),fe(er))}var ve=Es(0);function Ua(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eo=[];function pd(){for(var t=0;t<eo.length;t++)eo[t]._workInProgressVersionPrimary=null;eo.length=0}var fa=os.ReactCurrentDispatcher,to=os.ReactCurrentBatchConfig,rn=0,ye=null,Pe=null,Ae=null,Ya=!1,Ai=!1,sr=0,Pv=0;function We(){throw Error(B(321))}function xd(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!Ot(t[s],e[s]))return!1;return!0}function gd(t,e,s,n,i,a){if(rn=a,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fa.current=t===null||t.memoizedState===null?Iv:Av,t=s(n,i),Ai){a=0;do{if(Ai=!1,sr=0,25<=a)throw Error(B(301));a+=1,Ae=Pe=null,e.updateQueue=null,fa.current=Ov,t=s(n,i)}while(Ai)}if(fa.current=qa,e=Pe!==null&&Pe.next!==null,rn=0,Ae=Pe=ye=null,Ya=!1,e)throw Error(B(300));return t}function bd(){var t=sr!==0;return sr=0,t}function Ft(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?ye.memoizedState=Ae=t:Ae=Ae.next=t,Ae}function wt(){if(Pe===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=Ae===null?ye.memoizedState:Ae.next;if(e!==null)Ae=e,Pe=t;else{if(t===null)throw Error(B(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Ae===null?ye.memoizedState=Ae=t:Ae=Ae.next=t}return Ae}function nr(t,e){return typeof e=="function"?e(t):e}function so(t){var e=wt(),s=e.queue;if(s===null)throw Error(B(311));s.lastRenderedReducer=t;var n=Pe,i=n.baseQueue,a=s.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}n.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=l=null,c=null,d=a;do{var u=d.lane;if((rn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=n):c=c.next=h,ye.lanes|=u,an|=u}d=d.next}while(d!==null&&d!==a);c===null?l=n:c.next=o,Ot(n,e.memoizedState)||(nt=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do a=i.lane,ye.lanes|=a,an|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function no(t){var e=wt(),s=e.queue;if(s===null)throw Error(B(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var l=i=i.next;do a=t(a,l.action),l=l.next;while(l!==i);Ot(a,e.memoizedState)||(nt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,n]}function up(){}function hp(t,e){var s=ye,n=wt(),i=e(),a=!Ot(n.memoizedState,i);if(a&&(n.memoizedState=i,nt=!0),n=n.queue,vd(pp.bind(null,s,n,t),[t]),n.getSnapshot!==e||a||Ae!==null&&Ae.memoizedState.tag&1){if(s.flags|=2048,ir(9,fp.bind(null,s,n,i,e),void 0,null),Ee===null)throw Error(B(349));rn&30||mp(s,e,i)}return i}function mp(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function fp(t,e,s,n){e.value=s,e.getSnapshot=n,xp(e)&&gp(t)}function pp(t,e,s){return s(function(){xp(e)&&gp(t)})}function xp(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Ot(t,s)}catch{return!0}}function gp(t){var e=as(t,1);e!==null&&It(e,t,1,-1)}function Hu(t){var e=Ft();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:t},e.queue=t,t=t.dispatch=Lv.bind(null,ye,t),[e.memoizedState,t]}function ir(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function bp(){return wt().memoizedState}function pa(t,e,s,n){var i=Ft();ye.flags|=t,i.memoizedState=ir(1|e,s,void 0,n===void 0?null:n)}function gl(t,e,s,n){var i=wt();n=n===void 0?null:n;var a=void 0;if(Pe!==null){var l=Pe.memoizedState;if(a=l.destroy,n!==null&&xd(n,l.deps)){i.memoizedState=ir(e,s,a,n);return}}ye.flags|=t,i.memoizedState=ir(1|e,s,a,n)}function Vu(t,e){return pa(8390656,8,t,e)}function vd(t,e){return gl(2048,8,t,e)}function vp(t,e){return gl(4,2,t,e)}function yp(t,e){return gl(4,4,t,e)}function jp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wp(t,e,s){return s=s!=null?s.concat([t]):null,gl(4,4,jp.bind(null,e,t),s)}function yd(){}function Np(t,e){var s=wt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&xd(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function kp(t,e){var s=wt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&xd(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function _p(t,e,s){return rn&21?(Ot(s,e)||(s=Tf(),ye.lanes|=s,an|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nt=!0),t.memoizedState=s)}function Tv(t,e){var s=oe;oe=s!==0&&4>s?s:4,t(!0);var n=to.transition;to.transition={};try{t(!1),e()}finally{oe=s,to.transition=n}}function Sp(){return wt().memoizedState}function Dv(t,e,s){var n=Ms(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Cp(t))Mp(e,s);else if(s=op(t,e,s,n),s!==null){var i=Ge();It(s,t,n,i),Pp(s,e,n)}}function Lv(t,e,s){var n=Ms(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Cp(t))Mp(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,o=a(l,s);if(i.hasEagerState=!0,i.eagerState=o,Ot(o,l)){var c=e.interleaved;c===null?(i.next=i,ud(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}s=op(t,e,i,n),s!==null&&(i=Ge(),It(s,t,n,i),Pp(s,e,n))}}function Cp(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function Mp(t,e){Ai=Ya=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Pp(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Gc(t,s)}}var qa={readContext:jt,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},Iv={readContext:jt,useCallback:function(t,e){return Ft().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Vu,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,pa(4194308,4,jp.bind(null,e,t),s)},useLayoutEffect:function(t,e){return pa(4194308,4,t,e)},useInsertionEffect:function(t,e){return pa(4,2,t,e)},useMemo:function(t,e){var s=Ft();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=Ft();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Dv.bind(null,ye,t),[n.memoizedState,t]},useRef:function(t){var e=Ft();return t={current:t},e.memoizedState=t},useState:Hu,useDebugValue:yd,useDeferredValue:function(t){return Ft().memoizedState=t},useTransition:function(){var t=Hu(!1),e=t[0];return t=Tv.bind(null,t[1]),Ft().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=ye,i=Ft();if(xe){if(s===void 0)throw Error(B(407));s=s()}else{if(s=e(),Ee===null)throw Error(B(349));rn&30||mp(n,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,Vu(pp.bind(null,n,a,t),[t]),n.flags|=2048,ir(9,fp.bind(null,n,a,s,e),void 0,null),s},useId:function(){var t=Ft(),e=Ee.identifierPrefix;if(xe){var s=Jt,n=Zt;s=(n&~(1<<32-Lt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=sr++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Pv++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Av={readContext:jt,useCallback:Np,useContext:jt,useEffect:vd,useImperativeHandle:wp,useInsertionEffect:vp,useLayoutEffect:yp,useMemo:kp,useReducer:so,useRef:bp,useState:function(){return so(nr)},useDebugValue:yd,useDeferredValue:function(t){var e=wt();return _p(e,Pe.memoizedState,t)},useTransition:function(){var t=so(nr)[0],e=wt().memoizedState;return[t,e]},useMutableSource:up,useSyncExternalStore:hp,useId:Sp,unstable_isNewReconciler:!1},Ov={readContext:jt,useCallback:Np,useContext:jt,useEffect:vd,useImperativeHandle:wp,useInsertionEffect:vp,useLayoutEffect:yp,useMemo:kp,useReducer:no,useRef:bp,useState:function(){return no(nr)},useDebugValue:yd,useDeferredValue:function(t){var e=wt();return Pe===null?e.memoizedState=t:_p(e,Pe.memoizedState,t)},useTransition:function(){var t=no(nr)[0],e=wt().memoizedState;return[t,e]},useMutableSource:up,useSyncExternalStore:hp,useId:Sp,unstable_isNewReconciler:!1};function Mt(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function sc(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:je({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var bl={isMounted:function(t){return(t=t._reactInternals)?mn(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=Ge(),i=Ms(t),a=ns(n,i);a.payload=e,s!=null&&(a.callback=s),e=Ss(t,a,i),e!==null&&(It(e,t,i,n),ma(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=Ge(),i=Ms(t),a=ns(n,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=Ss(t,a,i),e!==null&&(It(e,t,i,n),ma(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Ge(),n=Ms(t),i=ns(s,n);i.tag=2,e!=null&&(i.callback=e),e=Ss(t,i,n),e!==null&&(It(e,t,n,s),ma(e,t,n))}};function Uu(t,e,s,n,i,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,l):e.prototype&&e.prototype.isPureReactComponent?!Qi(s,n)||!Qi(i,a):!0}function Tp(t,e,s){var n=!1,i=Ls,a=e.contextType;return typeof a=="object"&&a!==null?a=jt(a):(i=rt(e)?sn:qe.current,n=e.contextTypes,a=(n=n!=null)?$n(t,i):Ls),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Yu(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&bl.enqueueReplaceState(e,e.state,null)}function nc(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},hd(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=jt(a):(a=rt(e)?sn:qe.current,i.context=$n(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(sc(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bl.enqueueReplaceState(i,i.state,null),Va(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Yn(t,e){try{var s="",n=e;do s+=cb(n),n=n.return;while(n);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function io(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function ic(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Ev=typeof WeakMap=="function"?WeakMap:Map;function Dp(t,e,s){s=ns(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Ka||(Ka=!0,fc=n),ic(t,e)},s}function Lp(t,e,s){s=ns(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){ic(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){ic(t,e),typeof n!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),s}function qu(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Ev;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=Qv.bind(null,t,e,s),e.then(t,t))}function Xu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ku(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=ns(-1,1),e.tag=2,Ss(s,e,1))),s.lanes|=1),t)}var Rv=os.ReactCurrentOwner,nt=!1;function Ke(t,e,s,n){e.child=t===null?lp(e,null,s,n):Vn(e,t.child,s,n)}function Qu(t,e,s,n,i){s=s.render;var a=e.ref;return Rn(e,i),n=gd(t,e,s,n,a,i),s=bd(),t!==null&&!nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ls(t,e,i)):(xe&&s&&rd(e),e.flags|=1,Ke(t,e,n,i),e.child)}function Gu(t,e,s,n,i){if(t===null){var a=s.type;return typeof a=="function"&&!Md(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,Ip(t,e,a,n,i)):(t=va(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var l=a.memoizedProps;if(s=s.compare,s=s!==null?s:Qi,s(l,n)&&t.ref===e.ref)return ls(t,e,i)}return e.flags|=1,t=Ps(a,n),t.ref=e.ref,t.return=e,e.child=t}function Ip(t,e,s,n,i){if(t!==null){var a=t.memoizedProps;if(Qi(a,n)&&t.ref===e.ref)if(nt=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(nt=!0);else return e.lanes=t.lanes,ls(t,e,i)}return rc(t,e,s,n,i)}function Ap(t,e,s){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(Ln,ot),ot|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(Ln,ot),ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,ue(Ln,ot),ot|=n}else a!==null?(n=a.baseLanes|s,e.memoizedState=null):n=s,ue(Ln,ot),ot|=n;return Ke(t,e,i,s),e.child}function Op(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function rc(t,e,s,n,i){var a=rt(s)?sn:qe.current;return a=$n(e,a),Rn(e,i),s=gd(t,e,s,n,a,i),n=bd(),t!==null&&!nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ls(t,e,i)):(xe&&n&&rd(e),e.flags|=1,Ke(t,e,s,i),e.child)}function Zu(t,e,s,n,i){if(rt(s)){var a=!0;Fa(e)}else a=!1;if(Rn(e,i),e.stateNode===null)xa(t,e),Tp(e,s,n),nc(e,s,n,i),n=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=jt(d):(d=rt(s)?sn:qe.current,d=$n(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&Yu(e,l,n,d),hs=!1;var m=e.memoizedState;l.state=m,Va(e,n,l,i),c=e.memoizedState,o!==n||m!==c||it.current||hs?(typeof u=="function"&&(sc(e,s,u,n),c=e.memoizedState),(o=hs||Uu(e,s,o,n,m,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,cp(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:Mt(e.type,o),l.props=d,h=e.pendingProps,m=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=jt(c):(c=rt(s)?sn:qe.current,c=$n(e,c));var p=s.getDerivedStateFromProps;(u=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||m!==c)&&Yu(e,l,n,c),hs=!1,m=e.memoizedState,l.state=m,Va(e,n,l,i);var f=e.memoizedState;o!==h||m!==f||it.current||hs?(typeof p=="function"&&(sc(e,s,p,n),f=e.memoizedState),(d=hs||Uu(e,s,d,n,m,f,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,f,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,f,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=f),l.props=n,l.state=f,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return ac(t,e,s,n,a,i)}function ac(t,e,s,n,i,a){Op(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return i&&Ru(e,s,!1),ls(t,e,a);n=e.stateNode,Rv.current=e;var o=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=Vn(e,t.child,null,a),e.child=Vn(e,null,o,a)):Ke(t,e,o,a),e.memoizedState=n.state,i&&Ru(e,s,!0),e.child}function Ep(t){var e=t.stateNode;e.pendingContext?Eu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Eu(t,e.context,!1),md(t,e.containerInfo)}function Ju(t,e,s,n,i){return Hn(),ld(i),e.flags|=256,Ke(t,e,s,n),e.child}var lc={dehydrated:null,treeContext:null,retryLane:0};function oc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rp(t,e,s){var n=e.pendingProps,i=ve.current,a=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(ve,i&1),t===null)return ec(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,a?(n=e.mode,a=e.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=jl(l,n,0,null),t=Js(t,n,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=oc(s),e.memoizedState=lc,t):jd(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return zv(t,e,l,n,o,i,s);if(a){a=n.fallback,l=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Ps(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Ps(o,a):(a=Js(a,l,s,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,l=t.child.memoizedState,l=l===null?oc(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~s,e.memoizedState=lc,n}return a=t.child,t=a.sibling,n=Ps(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function jd(t,e){return e=jl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hr(t,e,s,n){return n!==null&&ld(n),Vn(e,t.child,null,s),t=jd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zv(t,e,s,n,i,a,l){if(s)return e.flags&256?(e.flags&=-257,n=io(Error(B(422))),Hr(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=jl({mode:"visible",children:n.children},i,0,null),a=Js(a,i,l,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Vn(e,t.child,null,l),e.child.memoizedState=oc(l),e.memoizedState=lc,a);if(!(e.mode&1))return Hr(t,e,l,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(B(419)),n=io(a,n,void 0),Hr(t,e,l,n)}if(o=(l&t.childLanes)!==0,nt||o){if(n=Ee,n!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,as(t,i),It(n,t,i,-1))}return Cd(),n=io(Error(B(421))),Hr(t,e,l,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Gv.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ct=_s(i.nextSibling),dt=e,xe=!0,Tt=null,t!==null&&(gt[bt++]=Zt,gt[bt++]=Jt,gt[bt++]=nn,Zt=t.id,Jt=t.overflow,nn=e),e=jd(e,n.children),e.flags|=4096,e)}function eh(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),tc(t.return,e,s)}function ro(t,e,s,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=i)}function zp(t,e,s){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Ke(t,e,n.children,s),n=ve.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eh(t,s,e);else if(t.tag===19)eh(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ue(ve,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&Ua(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),ro(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ua(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}ro(e,!0,s,null,a);break;case"together":ro(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ls(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),an|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,s=Ps(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Ps(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Fv(t,e,s){switch(e.tag){case 3:Ep(e),Hn();break;case 5:dp(e);break;case 1:rt(e.type)&&Fa(e);break;case 4:md(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ue($a,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ue(ve,ve.current&1),e.flags|=128,null):s&e.child.childLanes?Rp(t,e,s):(ue(ve,ve.current&1),t=ls(t,e,s),t!==null?t.sibling:null);ue(ve,ve.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return zp(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(ve,ve.current),n)break;return null;case 22:case 23:return e.lanes=0,Ap(t,e,s)}return ls(t,e,s)}var Fp,cc,Bp,Wp;Fp=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};cc=function(){};Bp=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Qs(Ht.current);var a=null;switch(s){case"input":i=Do(t,i),n=Do(t,n),a=[];break;case"select":i=je({},i,{value:void 0}),n=je({},n,{value:void 0}),a=[];break;case"textarea":i=Ao(t,i),n=Ao(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ra)}Eo(s,n);var l;s=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var o=i[d];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Hi.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(o=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(a||(a=[]),a.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Hi.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&me("scroll",t),a||o===c||(a=[])):(a=a||[]).push(d,c))}s&&(a=a||[]).push("style",s);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};Wp=function(t,e,s,n){s!==n&&(e.flags|=4)};function hi(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function $e(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Bv(t,e,s){var n=e.pendingProps;switch(ad(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(e),null;case 1:return rt(e.type)&&za(),$e(e),null;case 3:return n=e.stateNode,Un(),fe(it),fe(qe),pd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Wr(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tt!==null&&(gc(Tt),Tt=null))),cc(t,e),$e(e),null;case 5:fd(e);var i=Qs(tr.current);if(s=e.type,t!==null&&e.stateNode!=null)Bp(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(B(166));return $e(e),null}if(t=Qs(Ht.current),Wr(e)){n=e.stateNode,s=e.type;var a=e.memoizedProps;switch(n[Wt]=e,n[Ji]=a,t=(e.mode&1)!==0,s){case"dialog":me("cancel",n),me("close",n);break;case"iframe":case"object":case"embed":me("load",n);break;case"video":case"audio":for(i=0;i<wi.length;i++)me(wi[i],n);break;case"source":me("error",n);break;case"img":case"image":case"link":me("error",n),me("load",n);break;case"details":me("toggle",n);break;case"input":cu(n,a),me("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},me("invalid",n);break;case"textarea":uu(n,a),me("invalid",n)}Eo(s,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Br(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Br(n.textContent,o,t),i=["children",""+o]):Hi.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&me("scroll",n)}switch(s){case"input":Lr(n),du(n,a,!0);break;case"textarea":Lr(n),hu(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ra)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pf(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(s,{is:n.is}):(t=l.createElement(s),s==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,s),t[Wt]=e,t[Ji]=n,Fp(t,e,!1,!1),e.stateNode=t;e:{switch(l=Ro(s,n),s){case"dialog":me("cancel",t),me("close",t),i=n;break;case"iframe":case"object":case"embed":me("load",t),i=n;break;case"video":case"audio":for(i=0;i<wi.length;i++)me(wi[i],t);i=n;break;case"source":me("error",t),i=n;break;case"img":case"image":case"link":me("error",t),me("load",t),i=n;break;case"details":me("toggle",t),i=n;break;case"input":cu(t,n),i=Do(t,n),me("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=je({},n,{value:void 0}),me("invalid",t);break;case"textarea":uu(t,n),i=Ao(t,n),me("invalid",t);break;default:i=n}Eo(s,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?bf(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xf(t,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Vi(t,c):typeof c=="number"&&Vi(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Hi.hasOwnProperty(a)?c!=null&&a==="onScroll"&&me("scroll",t):c!=null&&Uc(t,a,c,l))}switch(s){case"input":Lr(t),du(t,n,!1);break;case"textarea":Lr(t),hu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ds(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?In(t,!!n.multiple,a,!1):n.defaultValue!=null&&In(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ra)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $e(e),null;case 6:if(t&&e.stateNode!=null)Wp(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(B(166));if(s=Qs(tr.current),Qs(Ht.current),Wr(e)){if(n=e.stateNode,s=e.memoizedProps,n[Wt]=e,(a=n.nodeValue!==s)&&(t=dt,t!==null))switch(t.tag){case 3:Br(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Br(n.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Wt]=e,e.stateNode=n}return $e(e),null;case 13:if(fe(ve),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&ct!==null&&e.mode&1&&!(e.flags&128))rp(),Hn(),e.flags|=98560,a=!1;else if(a=Wr(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(B(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(B(317));a[Wt]=e}else Hn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$e(e),a=!1}else Tt!==null&&(gc(Tt),Tt=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Te===0&&(Te=3):Cd())),e.updateQueue!==null&&(e.flags|=4),$e(e),null);case 4:return Un(),cc(t,e),t===null&&Gi(e.stateNode.containerInfo),$e(e),null;case 10:return dd(e.type._context),$e(e),null;case 17:return rt(e.type)&&za(),$e(e),null;case 19:if(fe(ve),a=e.memoizedState,a===null)return $e(e),null;if(n=(e.flags&128)!==0,l=a.rendering,l===null)if(n)hi(a,!1);else{if(Te!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Ua(t),l!==null){for(e.flags|=128,hi(a,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)a=s,t=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return ue(ve,ve.current&1|2),e.child}t=t.sibling}a.tail!==null&&_e()>qn&&(e.flags|=128,n=!0,hi(a,!1),e.lanes=4194304)}else{if(!n)if(t=Ua(l),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),hi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!xe)return $e(e),null}else 2*_e()-a.renderingStartTime>qn&&s!==1073741824&&(e.flags|=128,n=!0,hi(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(s=a.last,s!==null?s.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=_e(),e.sibling=null,s=ve.current,ue(ve,n?s&1|2:s&1),e):($e(e),null);case 22:case 23:return Sd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ot&1073741824&&($e(e),e.subtreeFlags&6&&(e.flags|=8192)):$e(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function Wv(t,e){switch(ad(e),e.tag){case 1:return rt(e.type)&&za(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Un(),fe(it),fe(qe),pd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fd(e),null;case 13:if(fe(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Hn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fe(ve),null;case 4:return Un(),null;case 10:return dd(e.type._context),null;case 22:case 23:return Sd(),null;case 24:return null;default:return null}}var Vr=!1,Ue=!1,$v=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Dn(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){we(t,e,n)}else s.current=null}function dc(t,e,s){try{s()}catch(n){we(t,e,n)}}var th=!1;function Hv(t,e){if(qo=Aa,t=Yf(),id(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=t,m=null;t:for(;;){for(var p;h!==s||i!==0&&h.nodeType!==3||(o=l+i),h!==a||n!==0&&h.nodeType!==3||(c=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===s&&++d===i&&(o=l),m===a&&++u===n&&(c=l),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Xo={focusedElem:t,selectionRange:s},Aa=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var x=f.memoizedProps,y=f.memoizedState,b=e.stateNode,g=b.getSnapshotBeforeUpdate(e.elementType===e.type?x:Mt(e.type,x),y);b.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(w){we(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return f=th,th=!1,f}function Oi(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&dc(e,s,a)}i=i.next}while(i!==n)}}function vl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function uc(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function $p(t){var e=t.alternate;e!==null&&(t.alternate=null,$p(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wt],delete e[Ji],delete e[Go],delete e[_v],delete e[Sv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hp(t){return t.tag===5||t.tag===3||t.tag===4}function sh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Ra));else if(n!==4&&(t=t.child,t!==null))for(hc(t,e,s),t=t.sibling;t!==null;)hc(t,e,s),t=t.sibling}function mc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(mc(t,e,s),t=t.sibling;t!==null;)mc(t,e,s),t=t.sibling}var Re=null,Pt=!1;function ds(t,e,s){for(s=s.child;s!==null;)Vp(t,e,s),s=s.sibling}function Vp(t,e,s){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(ul,s)}catch{}switch(s.tag){case 5:Ue||Dn(s,e);case 6:var n=Re,i=Pt;Re=null,ds(t,e,s),Re=n,Pt=i,Re!==null&&(Pt?(t=Re,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Re.removeChild(s.stateNode));break;case 18:Re!==null&&(Pt?(t=Re,s=s.stateNode,t.nodeType===8?Zl(t.parentNode,s):t.nodeType===1&&Zl(t,s),Xi(t)):Zl(Re,s.stateNode));break;case 4:n=Re,i=Pt,Re=s.stateNode.containerInfo,Pt=!0,ds(t,e,s),Re=n,Pt=i;break;case 0:case 11:case 14:case 15:if(!Ue&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&dc(s,e,l),i=i.next}while(i!==n)}ds(t,e,s);break;case 1:if(!Ue&&(Dn(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){we(s,e,o)}ds(t,e,s);break;case 21:ds(t,e,s);break;case 22:s.mode&1?(Ue=(n=Ue)||s.memoizedState!==null,ds(t,e,s),Ue=n):ds(t,e,s);break;default:ds(t,e,s)}}function nh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new $v),e.forEach(function(n){var i=Zv.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function Ct(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var a=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Re=o.stateNode,Pt=!1;break e;case 3:Re=o.stateNode.containerInfo,Pt=!0;break e;case 4:Re=o.stateNode.containerInfo,Pt=!0;break e}o=o.return}if(Re===null)throw Error(B(160));Vp(a,l,i),Re=null,Pt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){we(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Up(e,t),e=e.sibling}function Up(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ct(e,t),Rt(t),n&4){try{Oi(3,t,t.return),vl(3,t)}catch(x){we(t,t.return,x)}try{Oi(5,t,t.return)}catch(x){we(t,t.return,x)}}break;case 1:Ct(e,t),Rt(t),n&512&&s!==null&&Dn(s,s.return);break;case 5:if(Ct(e,t),Rt(t),n&512&&s!==null&&Dn(s,s.return),t.flags&32){var i=t.stateNode;try{Vi(i,"")}catch(x){we(t,t.return,x)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,l=s!==null?s.memoizedProps:a,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&mf(i,a),Ro(o,l);var d=Ro(o,a);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?bf(i,h):u==="dangerouslySetInnerHTML"?xf(i,h):u==="children"?Vi(i,h):Uc(i,u,h,d)}switch(o){case"input":Lo(i,a);break;case"textarea":ff(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?In(i,!!a.multiple,p,!1):m!==!!a.multiple&&(a.defaultValue!=null?In(i,!!a.multiple,a.defaultValue,!0):In(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ji]=a}catch(x){we(t,t.return,x)}}break;case 6:if(Ct(e,t),Rt(t),n&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(x){we(t,t.return,x)}}break;case 3:if(Ct(e,t),Rt(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Xi(e.containerInfo)}catch(x){we(t,t.return,x)}break;case 4:Ct(e,t),Rt(t);break;case 13:Ct(e,t),Rt(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(kd=_e())),n&4&&nh(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(Ue=(d=Ue)||u,Ct(e,t),Ue=d):Ct(e,t),Rt(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Y=t,u=t.child;u!==null;){for(h=Y=u;Y!==null;){switch(m=Y,p=m.child,m.tag){case 0:case 11:case 14:case 15:Oi(4,m,m.return);break;case 1:Dn(m,m.return);var f=m.stateNode;if(typeof f.componentWillUnmount=="function"){n=m,s=m.return;try{e=n,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(x){we(n,s,x)}}break;case 5:Dn(m,m.return);break;case 22:if(m.memoizedState!==null){rh(h);continue}}p!==null?(p.return=m,Y=p):rh(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=gf("display",l))}catch(x){we(t,t.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){we(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ct(e,t),Rt(t),n&4&&nh(t);break;case 21:break;default:Ct(e,t),Rt(t)}}function Rt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Hp(s)){var n=s;break e}s=s.return}throw Error(B(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Vi(i,""),n.flags&=-33);var a=sh(t);mc(t,a,i);break;case 3:case 4:var l=n.stateNode.containerInfo,o=sh(t);hc(t,o,l);break;default:throw Error(B(161))}}catch(c){we(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Vv(t,e,s){Y=t,Yp(t)}function Yp(t,e,s){for(var n=(t.mode&1)!==0;Y!==null;){var i=Y,a=i.child;if(i.tag===22&&n){var l=i.memoizedState!==null||Vr;if(!l){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Ue;o=Vr;var d=Ue;if(Vr=l,(Ue=c)&&!d)for(Y=i;Y!==null;)l=Y,c=l.child,l.tag===22&&l.memoizedState!==null?ah(i):c!==null?(c.return=l,Y=c):ah(i);for(;a!==null;)Y=a,Yp(a),a=a.sibling;Y=i,Vr=o,Ue=d}ih(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Y=a):ih(t)}}function ih(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ue||vl(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ue)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:Mt(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&$u(e,a,n);break;case 3:var l=e.updateQueue;if(l!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}$u(e,l,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Xi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ue||e.flags&512&&uc(e)}catch(m){we(e,e.return,m)}}if(e===t){Y=null;break}if(s=e.sibling,s!==null){s.return=e.return,Y=s;break}Y=e.return}}function rh(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Y=s;break}Y=e.return}}function ah(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{vl(4,e)}catch(c){we(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){we(e,i,c)}}var a=e.return;try{uc(e)}catch(c){we(e,a,c)}break;case 5:var l=e.return;try{uc(e)}catch(c){we(e,l,c)}}}catch(c){we(e,e.return,c)}if(e===t){Y=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Y=o;break}Y=e.return}}var Uv=Math.ceil,Xa=os.ReactCurrentDispatcher,wd=os.ReactCurrentOwner,yt=os.ReactCurrentBatchConfig,se=0,Ee=null,Me=null,ze=0,ot=0,Ln=Es(0),Te=0,rr=null,an=0,yl=0,Nd=0,Ei=null,tt=null,kd=0,qn=1/0,Xt=null,Ka=!1,fc=null,Cs=null,Ur=!1,xs=null,Qa=0,Ri=0,pc=null,ga=-1,ba=0;function Ge(){return se&6?_e():ga!==-1?ga:ga=_e()}function Ms(t){return t.mode&1?se&2&&ze!==0?ze&-ze:Mv.transition!==null?(ba===0&&(ba=Tf()),ba):(t=oe,t!==0||(t=window.event,t=t===void 0?16:Rf(t.type)),t):1}function It(t,e,s,n){if(50<Ri)throw Ri=0,pc=null,Error(B(185));xr(t,s,n),(!(se&2)||t!==Ee)&&(t===Ee&&(!(se&2)&&(yl|=s),Te===4&&fs(t,ze)),at(t,n),s===1&&se===0&&!(e.mode&1)&&(qn=_e()+500,xl&&Rs()))}function at(t,e){var s=t.callbackNode;Mb(t,e);var n=Ia(t,t===Ee?ze:0);if(n===0)s!==null&&pu(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&pu(s),e===1)t.tag===0?Cv(lh.bind(null,t)):sp(lh.bind(null,t)),Nv(function(){!(se&6)&&Rs()}),s=null;else{switch(Df(n)){case 1:s=Qc;break;case 4:s=Mf;break;case 16:s=La;break;case 536870912:s=Pf;break;default:s=La}s=ex(s,qp.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function qp(t,e){if(ga=-1,ba=0,se&6)throw Error(B(327));var s=t.callbackNode;if(zn()&&t.callbackNode!==s)return null;var n=Ia(t,t===Ee?ze:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ga(t,n);else{e=n;var i=se;se|=2;var a=Kp();(Ee!==t||ze!==e)&&(Xt=null,qn=_e()+500,Zs(t,e));do try{Xv();break}catch(o){Xp(t,o)}while(!0);cd(),Xa.current=a,se=i,Me!==null?e=0:(Ee=null,ze=0,e=Te)}if(e!==0){if(e===2&&(i=$o(t),i!==0&&(n=i,e=xc(t,i))),e===1)throw s=rr,Zs(t,0),fs(t,n),at(t,_e()),s;if(e===6)fs(t,n);else{if(i=t.current.alternate,!(n&30)&&!Yv(i)&&(e=Ga(t,n),e===2&&(a=$o(t),a!==0&&(n=a,e=xc(t,a))),e===1))throw s=rr,Zs(t,0),fs(t,n),at(t,_e()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(B(345));case 2:Us(t,tt,Xt);break;case 3:if(fs(t,n),(n&130023424)===n&&(e=kd+500-_e(),10<e)){if(Ia(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Ge(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Qo(Us.bind(null,t,tt,Xt),e);break}Us(t,tt,Xt);break;case 4:if(fs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var l=31-Lt(n);a=1<<l,l=e[l],l>i&&(i=l),n&=~a}if(n=i,n=_e()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Uv(n/1960))-n,10<n){t.timeoutHandle=Qo(Us.bind(null,t,tt,Xt),n);break}Us(t,tt,Xt);break;case 5:Us(t,tt,Xt);break;default:throw Error(B(329))}}}return at(t,_e()),t.callbackNode===s?qp.bind(null,t):null}function xc(t,e){var s=Ei;return t.current.memoizedState.isDehydrated&&(Zs(t,e).flags|=256),t=Ga(t,e),t!==2&&(e=tt,tt=s,e!==null&&gc(e)),t}function gc(t){tt===null?tt=t:tt.push.apply(tt,t)}function Yv(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],a=i.getSnapshot;i=i.value;try{if(!Ot(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fs(t,e){for(e&=~Nd,e&=~yl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-Lt(e),n=1<<s;t[s]=-1,e&=~n}}function lh(t){if(se&6)throw Error(B(327));zn();var e=Ia(t,0);if(!(e&1))return at(t,_e()),null;var s=Ga(t,e);if(t.tag!==0&&s===2){var n=$o(t);n!==0&&(e=n,s=xc(t,n))}if(s===1)throw s=rr,Zs(t,0),fs(t,e),at(t,_e()),s;if(s===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Us(t,tt,Xt),at(t,_e()),null}function _d(t,e){var s=se;se|=1;try{return t(e)}finally{se=s,se===0&&(qn=_e()+500,xl&&Rs())}}function ln(t){xs!==null&&xs.tag===0&&!(se&6)&&zn();var e=se;se|=1;var s=yt.transition,n=oe;try{if(yt.transition=null,oe=1,t)return t()}finally{oe=n,yt.transition=s,se=e,!(se&6)&&Rs()}}function Sd(){ot=Ln.current,fe(Ln)}function Zs(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,wv(s)),Me!==null)for(s=Me.return;s!==null;){var n=s;switch(ad(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&za();break;case 3:Un(),fe(it),fe(qe),pd();break;case 5:fd(n);break;case 4:Un();break;case 13:fe(ve);break;case 19:fe(ve);break;case 10:dd(n.type._context);break;case 22:case 23:Sd()}s=s.return}if(Ee=t,Me=t=Ps(t.current,null),ze=ot=e,Te=0,rr=null,Nd=yl=an=0,tt=Ei=null,Ks!==null){for(e=0;e<Ks.length;e++)if(s=Ks[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,a=s.pending;if(a!==null){var l=a.next;a.next=i,n.next=l}s.pending=n}Ks=null}return t}function Xp(t,e){do{var s=Me;try{if(cd(),fa.current=qa,Ya){for(var n=ye.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ya=!1}if(rn=0,Ae=Pe=ye=null,Ai=!1,sr=0,wd.current=null,s===null||s.return===null){Te=1,rr=e,Me=null;break}e:{var a=t,l=s.return,o=s,c=e;if(e=ze,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Xu(l);if(p!==null){p.flags&=-257,Ku(p,l,o,a,e),p.mode&1&&qu(a,d,e),e=p,c=d;var f=e.updateQueue;if(f===null){var x=new Set;x.add(c),e.updateQueue=x}else f.add(c);break e}else{if(!(e&1)){qu(a,d,e),Cd();break e}c=Error(B(426))}}else if(xe&&o.mode&1){var y=Xu(l);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Ku(y,l,o,a,e),ld(Yn(c,o));break e}}a=c=Yn(c,o),Te!==4&&(Te=2),Ei===null?Ei=[a]:Ei.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=Dp(a,c,e);Wu(a,b);break e;case 1:o=c;var g=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Cs===null||!Cs.has(j)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=Lp(a,o,e);Wu(a,w);break e}}a=a.return}while(a!==null)}Gp(s)}catch(v){e=v,Me===s&&s!==null&&(Me=s=s.return);continue}break}while(!0)}function Kp(){var t=Xa.current;return Xa.current=qa,t===null?qa:t}function Cd(){(Te===0||Te===3||Te===2)&&(Te=4),Ee===null||!(an&268435455)&&!(yl&268435455)||fs(Ee,ze)}function Ga(t,e){var s=se;se|=2;var n=Kp();(Ee!==t||ze!==e)&&(Xt=null,Zs(t,e));do try{qv();break}catch(i){Xp(t,i)}while(!0);if(cd(),se=s,Xa.current=n,Me!==null)throw Error(B(261));return Ee=null,ze=0,Te}function qv(){for(;Me!==null;)Qp(Me)}function Xv(){for(;Me!==null&&!vb();)Qp(Me)}function Qp(t){var e=Jp(t.alternate,t,ot);t.memoizedProps=t.pendingProps,e===null?Gp(t):Me=e,wd.current=null}function Gp(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=Wv(s,e),s!==null){s.flags&=32767,Me=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Te=6,Me=null;return}}else if(s=Bv(s,e,ot),s!==null){Me=s;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Te===0&&(Te=5)}function Us(t,e,s){var n=oe,i=yt.transition;try{yt.transition=null,oe=1,Kv(t,e,s,n)}finally{yt.transition=i,oe=n}return null}function Kv(t,e,s,n){do zn();while(xs!==null);if(se&6)throw Error(B(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(Pb(t,a),t===Ee&&(Me=Ee=null,ze=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ur||(Ur=!0,ex(La,function(){return zn(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=yt.transition,yt.transition=null;var l=oe;oe=1;var o=se;se|=4,wd.current=null,Hv(t,s),Up(s,t),pv(Xo),Aa=!!qo,Xo=qo=null,t.current=s,Vv(s),yb(),se=o,oe=l,yt.transition=a}else t.current=s;if(Ur&&(Ur=!1,xs=t,Qa=i),a=t.pendingLanes,a===0&&(Cs=null),Nb(s.stateNode),at(t,_e()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ka)throw Ka=!1,t=fc,fc=null,t;return Qa&1&&t.tag!==0&&zn(),a=t.pendingLanes,a&1?t===pc?Ri++:(Ri=0,pc=t):Ri=0,Rs(),null}function zn(){if(xs!==null){var t=Df(Qa),e=yt.transition,s=oe;try{if(yt.transition=null,oe=16>t?16:t,xs===null)var n=!1;else{if(t=xs,xs=null,Qa=0,se&6)throw Error(B(331));var i=se;for(se|=4,Y=t.current;Y!==null;){var a=Y,l=a.child;if(Y.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Y=d;Y!==null;){var u=Y;switch(u.tag){case 0:case 11:case 15:Oi(8,u,a)}var h=u.child;if(h!==null)h.return=u,Y=h;else for(;Y!==null;){u=Y;var m=u.sibling,p=u.return;if($p(u),u===d){Y=null;break}if(m!==null){m.return=p,Y=m;break}Y=p}}}var f=a.alternate;if(f!==null){var x=f.child;if(x!==null){f.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}Y=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,Y=l;else e:for(;Y!==null;){if(a=Y,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Oi(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,Y=b;break e}Y=a.return}}var g=t.current;for(Y=g;Y!==null;){l=Y;var j=l.child;if(l.subtreeFlags&2064&&j!==null)j.return=l,Y=j;else e:for(l=g;Y!==null;){if(o=Y,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:vl(9,o)}}catch(v){we(o,o.return,v)}if(o===l){Y=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,Y=w;break e}Y=o.return}}if(se=i,Rs(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(ul,t)}catch{}n=!0}return n}finally{oe=s,yt.transition=e}}return!1}function oh(t,e,s){e=Yn(s,e),e=Dp(t,e,1),t=Ss(t,e,1),e=Ge(),t!==null&&(xr(t,1,e),at(t,e))}function we(t,e,s){if(t.tag===3)oh(t,t,s);else for(;e!==null;){if(e.tag===3){oh(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Cs===null||!Cs.has(n))){t=Yn(s,t),t=Lp(e,t,1),e=Ss(e,t,1),t=Ge(),e!==null&&(xr(e,1,t),at(e,t));break}}e=e.return}}function Qv(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=Ge(),t.pingedLanes|=t.suspendedLanes&s,Ee===t&&(ze&s)===s&&(Te===4||Te===3&&(ze&130023424)===ze&&500>_e()-kd?Zs(t,0):Nd|=s),at(t,e)}function Zp(t,e){e===0&&(t.mode&1?(e=Or,Or<<=1,!(Or&130023424)&&(Or=4194304)):e=1);var s=Ge();t=as(t,e),t!==null&&(xr(t,e,s),at(t,s))}function Gv(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Zp(t,s)}function Zv(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(B(314))}n!==null&&n.delete(e),Zp(t,s)}var Jp;Jp=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||it.current)nt=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return nt=!1,Fv(t,e,s);nt=!!(t.flags&131072)}else nt=!1,xe&&e.flags&1048576&&np(e,Wa,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;xa(t,e),t=e.pendingProps;var i=$n(e,qe.current);Rn(e,s),i=gd(null,e,n,t,i,s);var a=bd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rt(n)?(a=!0,Fa(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hd(e),i.updater=bl,e.stateNode=i,i._reactInternals=e,nc(e,n,t,s),e=ac(null,e,n,!0,a,s)):(e.tag=0,xe&&a&&rd(e),Ke(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch(xa(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=ey(n),t=Mt(n,t),i){case 0:e=rc(null,e,n,t,s);break e;case 1:e=Zu(null,e,n,t,s);break e;case 11:e=Qu(null,e,n,t,s);break e;case 14:e=Gu(null,e,n,Mt(n.type,t),s);break e}throw Error(B(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mt(n,i),rc(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mt(n,i),Zu(t,e,n,i,s);case 3:e:{if(Ep(e),t===null)throw Error(B(387));n=e.pendingProps,a=e.memoizedState,i=a.element,cp(t,e),Va(e,n,null,s);var l=e.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Yn(Error(B(423)),e),e=Ju(t,e,n,s,i);break e}else if(n!==i){i=Yn(Error(B(424)),e),e=Ju(t,e,n,s,i);break e}else for(ct=_s(e.stateNode.containerInfo.firstChild),dt=e,xe=!0,Tt=null,s=lp(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Hn(),n===i){e=ls(t,e,s);break e}Ke(t,e,n,s)}e=e.child}return e;case 5:return dp(e),t===null&&ec(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,l=i.children,Ko(n,i)?l=null:a!==null&&Ko(n,a)&&(e.flags|=32),Op(t,e),Ke(t,e,l,s),e.child;case 6:return t===null&&ec(e),null;case 13:return Rp(t,e,s);case 4:return md(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Vn(e,null,n,s):Ke(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mt(n,i),Qu(t,e,n,i,s);case 7:return Ke(t,e,e.pendingProps,s),e.child;case 8:return Ke(t,e,e.pendingProps.children,s),e.child;case 12:return Ke(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,l=i.value,ue($a,n._currentValue),n._currentValue=l,a!==null)if(Ot(a.value,l)){if(a.children===i.children&&!it.current){e=ls(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=ns(-1,s&-s),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),tc(a.return,s,e),o.lanes|=s;break}c=c.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(B(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),tc(l,s,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Ke(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Rn(e,s),i=jt(i),n=n(i),e.flags|=1,Ke(t,e,n,s),e.child;case 14:return n=e.type,i=Mt(n,e.pendingProps),i=Mt(n.type,i),Gu(t,e,n,i,s);case 15:return Ip(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mt(n,i),xa(t,e),e.tag=1,rt(n)?(t=!0,Fa(e)):t=!1,Rn(e,s),Tp(e,n,i),nc(e,n,i,s),ac(null,e,n,!0,t,s);case 19:return zp(t,e,s);case 22:return Ap(t,e,s)}throw Error(B(156,e.tag))};function ex(t,e){return Cf(t,e)}function Jv(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,e,s,n){return new Jv(t,e,s,n)}function Md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ey(t){if(typeof t=="function")return Md(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qc)return 11;if(t===Xc)return 14}return 2}function Ps(t,e){var s=t.alternate;return s===null?(s=vt(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function va(t,e,s,n,i,a){var l=2;if(n=t,typeof t=="function")Md(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case wn:return Js(s.children,i,a,e);case Yc:l=8,i|=8;break;case Co:return t=vt(12,s,e,i|2),t.elementType=Co,t.lanes=a,t;case Mo:return t=vt(13,s,e,i),t.elementType=Mo,t.lanes=a,t;case Po:return t=vt(19,s,e,i),t.elementType=Po,t.lanes=a,t;case df:return jl(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case of:l=10;break e;case cf:l=9;break e;case qc:l=11;break e;case Xc:l=14;break e;case us:l=16,n=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=vt(l,s,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Js(t,e,s,n){return t=vt(7,t,n,e),t.lanes=s,t}function jl(t,e,s,n){return t=vt(22,t,n,e),t.elementType=df,t.lanes=s,t.stateNode={isHidden:!1},t}function ao(t,e,s){return t=vt(6,t,null,e),t.lanes=s,t}function lo(t,e,s){return e=vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ty(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wl(0),this.expirationTimes=Wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pd(t,e,s,n,i,a,l,o,c){return t=new ty(t,e,s,o,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=vt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},hd(a),t}function sy(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function tx(t){if(!t)return Ls;t=t._reactInternals;e:{if(mn(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var s=t.type;if(rt(s))return tp(t,s,e)}return e}function sx(t,e,s,n,i,a,l,o,c){return t=Pd(s,n,!0,t,i,a,l,o,c),t.context=tx(null),s=t.current,n=Ge(),i=Ms(s),a=ns(n,i),a.callback=e??null,Ss(s,a,i),t.current.lanes=i,xr(t,i,n),at(t,n),t}function wl(t,e,s,n){var i=e.current,a=Ge(),l=Ms(i);return s=tx(s),e.context===null?e.context=s:e.pendingContext=s,e=ns(a,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ss(i,e,l),t!==null&&(It(t,i,l,a),ma(t,i,l)),l}function Za(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ch(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Td(t,e){ch(t,e),(t=t.alternate)&&ch(t,e)}function ny(){return null}var nx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dd(t){this._internalRoot=t}Nl.prototype.render=Dd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));wl(t,e,null,null)};Nl.prototype.unmount=Dd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ln(function(){wl(null,t,null,null)}),e[rs]=null}};function Nl(t){this._internalRoot=t}Nl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Af();t={blockedOn:null,target:t,priority:e};for(var s=0;s<ms.length&&e!==0&&e<ms[s].priority;s++);ms.splice(s,0,t),s===0&&Ef(t)}};function Ld(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dh(){}function iy(t,e,s,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=Za(l);a.call(d)}}var l=sx(e,n,t,0,null,!1,!1,"",dh);return t._reactRootContainer=l,t[rs]=l.current,Gi(t.nodeType===8?t.parentNode:t),ln(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var d=Za(c);o.call(d)}}var c=Pd(t,0,!1,null,null,!1,!1,"",dh);return t._reactRootContainer=c,t[rs]=c.current,Gi(t.nodeType===8?t.parentNode:t),ln(function(){wl(e,c,s,n)}),c}function _l(t,e,s,n,i){var a=s._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var o=i;i=function(){var c=Za(l);o.call(c)}}wl(e,l,t,i)}else l=iy(s,e,t,i,n);return Za(l)}Lf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=ji(e.pendingLanes);s!==0&&(Gc(e,s|1),at(e,_e()),!(se&6)&&(qn=_e()+500,Rs()))}break;case 13:ln(function(){var n=as(t,1);if(n!==null){var i=Ge();It(n,t,1,i)}}),Td(t,1)}};Zc=function(t){if(t.tag===13){var e=as(t,134217728);if(e!==null){var s=Ge();It(e,t,134217728,s)}Td(t,134217728)}};If=function(t){if(t.tag===13){var e=Ms(t),s=as(t,e);if(s!==null){var n=Ge();It(s,t,e,n)}Td(t,e)}};Af=function(){return oe};Of=function(t,e){var s=oe;try{return oe=t,e()}finally{oe=s}};Fo=function(t,e,s){switch(e){case"input":if(Lo(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=pl(n);if(!i)throw Error(B(90));hf(n),Lo(n,i)}}}break;case"textarea":ff(t,s);break;case"select":e=s.value,e!=null&&In(t,!!s.multiple,e,!1)}};jf=_d;wf=ln;var ry={usingClientEntryPoint:!1,Events:[br,Sn,pl,vf,yf,_d]},mi={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ay={bundleType:mi.bundleType,version:mi.version,rendererPackageName:mi.rendererPackageName,rendererConfig:mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_f(t),t===null?null:t.stateNode},findFiberByHostInstance:mi.findFiberByHostInstance||ny,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yr.isDisabled&&Yr.supportsFiber)try{ul=Yr.inject(ay),$t=Yr}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ry;ht.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ld(e))throw Error(B(200));return sy(t,e,null,s)};ht.createRoot=function(t,e){if(!Ld(t))throw Error(B(299));var s=!1,n="",i=nx;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pd(t,1,!1,null,null,s,!1,n,i),t[rs]=e.current,Gi(t.nodeType===8?t.parentNode:t),new Dd(e)};ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=_f(e),t=t===null?null:t.stateNode,t};ht.flushSync=function(t){return ln(t)};ht.hydrate=function(t,e,s){if(!kl(e))throw Error(B(200));return _l(null,t,e,!0,s)};ht.hydrateRoot=function(t,e,s){if(!Ld(t))throw Error(B(405));var n=s!=null&&s.hydratedSources||null,i=!1,a="",l=nx;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),e=sx(e,null,t,1,s??null,i,!1,a,l),t[rs]=e.current,Gi(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new Nl(e)};ht.render=function(t,e,s){if(!kl(e))throw Error(B(200));return _l(null,t,e,!1,s)};ht.unmountComponentAtNode=function(t){if(!kl(t))throw Error(B(40));return t._reactRootContainer?(ln(function(){_l(null,null,t,!1,function(){t._reactRootContainer=null,t[rs]=null})}),!0):!1};ht.unstable_batchedUpdates=_d;ht.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!kl(s))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return _l(t,e,s,!1,n)};ht.version="18.3.1-next-f1338f8080-20240426";function ix(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ix)}catch(t){console.error(t)}}ix(),nf.exports=ht;var ly=nf.exports,uh=ly;_o.createRoot=uh.createRoot,_o.hydrateRoot=uh.hydrateRoot;const oy=[{id:"company_1",email:"info@foodsafety.com.sa",password:"password",companyName:"  ",role:"COMPANY_ADMIN",status:"active",joined:"2023-01-15T09:00:00Z",businessType:"factory",region:"",industry:" "},{id:"company_2",email:"info@pestpractes.sa",password:"password",companyName:"  ",role:"COMPANY_ADMIN",status:"active",joined:"2023-03-20T11:30:00Z",businessType:"kitchen",region:"",industry:" "},{id:"platform_admin",email:"admin@foodsafety.com",password:"admin",companyName:" ",role:"PLATFORM_ADMIN",status:"active",joined:"2023-01-01T08:00:00Z",businessType:"factory"},{id:"company_pending",email:"pending@company.com",password:"password",companyName:"  ",role:"COMPANY_ADMIN",status:"pending",joined:new Date().toISOString(),businessType:"restaurant",region:"",industry:""}],cy=[{id:"team_1",name:" ",email:"ahmed@factory.com",password:"password",companyId:"company_1",companyName:"  ",position:" ",haccpRole:"  ",responsibilities:"    ",role:"TEAM_MEMBER",status:"active",joined:"2023-02-01T10:00:00Z",businessType:"factory",permissions:["product:view","product:edit","haccp:view_water_plan","haccp:manage_water_plan","prp:view","prp:manage","team:view","task:view"]},{id:"team_2",name:" ",email:"sara@kitchen.com",password:"password",companyId:"company_2",companyName:"  ",position:" ",haccpRole:"  ",responsibilities:"    ",role:"TEAM_MEMBER",status:"active",joined:"2023-04-01T09:00:00Z",businessType:"kitchen",permissions:["product:view","product:create","production:view","production:create","task:view","task:create"]},{id:"user-hesma",email:"HESHAMABASS2050@GMAIL.COM",password:"password",companyName:"  ",companyId:"company_1",name:" ",position:" ",haccpRole:" ",responsibilities:" ",role:"TEAM_MEMBER",status:"active",joined:"2023-05-10T10:00:00.000Z",permissions:["product:view","product:create","product:edit","product:delete","supplier:view","supplier:create","supplier:edit","supplier:delete","supplier:evaluate","inventory:view","sales:view","team:view","task:view","task:create","task:edit"],businessType:"factory"}],dy={companyName:"  ",address:"   ",contactPerson:" ",phone:"011-1234567",email:"info@factory.com"},uy=[{id:"sup_1",name:"  ",materials:[" "],phone:"050-1112222",email:"sales@poultry.com",address:"",commercialRegistrationNo:"1010123456",taxNo:"300123456700003",qualityCertificates:"ISO 22000, Halal Certificate",requiredTests:["Salmonella Test","E. coli Test"],otherRequirements:"        4  ",evaluations:[{id:"eval_1",date:"2023-06-01",evaluator:" ",score:4,notes:"   ."}]},{id:"sup_2",name:"  ",materials:[" ","","",""," "],phone:"050-3334444",email:"orders@veg.com",address:"",commercialRegistrationNo:"1010654321",taxNo:"300765432100003",evaluations:[]}],hy=[{id:"prod_1",name:"  ",description:"     .",barcode:"6281234567890",sizeOrWeight:"100g",ingredients:[{id:"ing_1",name:" ",amount:80,unit:"g",supplierId:"sup_1"},{id:"ing_2",name:"",amount:15,unit:"g",supplierId:"sup_2"},{id:"ing_3",name:"",amount:5,unit:"g",supplierId:"sup_2"}],category:"lunch",allergens:["Gluten"],preparationSteps:["  "," ","  "," "," ","","  "," "],cookingInstructions:[{id:"cook_1",temperature:"180C",time:"15 min",tools:" ",responsiblePersonId:"team_2"}],servingMethod:{packaging:"   ",servingCondition:"external_transport",requiresExpiryPrinting:!0},headChefId:"team_2"},{id:"prod_2",name:"  ",description:"   ",barcode:"N/A",sizeOrWeight:"1 serving",ingredients:[{id:"ing_1",name:" ",amount:150,unit:"g",supplierId:"sup_1"},{id:"ing_4",name:" ",amount:100,unit:"g",supplierId:"sup_2"}],category:"lunch",allergens:[],preparationSteps:["  "," "," "," "," "," ",""],cookingInstructions:[],servingMethod:{packaging:"  ",servingCondition:"immediate",requiresExpiryPrinting:!1},headChefId:"team_2"}],my=[{id:"task_1",title:"    3",description:"      .",assignedTo:"team_1",status:"inprogress",progress:50,comments:[{authorId:"company_1",authorName:"  ",timestamp:new Date().toISOString(),text:"    "}],dueDate:"2024-08-15"},{id:"task_2",title:"     ",description:"",assignedTo:"team_1",status:"todo",progress:0,comments:[],dueDate:"2024-08-20"},{id:"task_3",title:"  HACCP  ",description:"",assignedTo:"team_2",status:"done",progress:100,comments:[]}],fy=[{id:"log_3",timestamp:new Date(Date.now()-36e5*3).toISOString(),userId:"team_2",userName:" ",action:"  :  "},{id:"log_2",timestamp:new Date(Date.now()-36e5*2).toISOString(),userId:"company_1",userName:"  ",action:"  ."},{id:"log_1",timestamp:new Date(Date.now()-36e5).toISOString(),userId:"team_1",userName:" ",action:"    ."}],py=[{id:"prod_1",productId:"prod_1",steps:[{id:"s1",stepNumber:1,description:"  ",hazardAnalysis:null},{id:"s2",stepNumber:2,description:" ",hazardAnalysis:null},{id:"s3",stepNumber:3,description:"",hazardAnalysis:null},{id:"s4",stepNumber:4,description:" ",hazardAnalysis:null},{id:"s5",stepNumber:5,description:"",hazardAnalysis:null},{id:"s6",stepNumber:6,description:"  ",hazardAnalysis:null},{id:"s7",stepNumber:7,description:" ",hazardAnalysis:null},{id:"s8",stepNumber:8,description:"",hazardAnalysis:null}]}],xy={},gy={},by={},vy={},yy={},jy={},wy={},Ny=null,ky=[{id:"sensor_1",name:" ",location:" ",type:"refrigerator",currentValue:2.5,targetMin:0,targetMax:4,warningThreshold:1,unit:"C"},{id:"sensor_2",name:" ",location:" ",type:"freezer",currentValue:-18.2,targetMin:-22,targetMax:-18,warningThreshold:2,unit:"C"},{id:"sensor_3",name:"  ",location:" ",type:"site_section",subType:"dry_storage",currentValue:24.1,targetMin:18,targetMax:25,warningThreshold:2,unit:"C"}],_y=[{id:"ticket_1",companyId:"company_1",companyName:"  ",subject:"   ",message:"       .",createdAt:new Date().toISOString(),status:"open"},{id:"ticket_2",companyId:"company_2",companyName:"  ",subject:"  ",message:"      .",createdAt:new Date(Date.now()-864e5).toISOString(),status:"closed",reply:"           ."}],Sy=[],Cy=[],My=[],Py=[],Ty=[],Dy=[],Ly={usersByRegion:{:1,:1,:1,:0},usersByIndustry:{" ":1," ":1,:1},accountStatus:{active:3,inactive:0}},ft=t=>new Promise(e=>setTimeout(e,t)),Iy=async t=>{await ft(1e3);const e=new Set,s=t.join(" ").toLowerCase();return(s.includes("wheat")||s.includes("flour")||s.includes("bread"))&&e.add("Gluten"),(s.includes("shrimp")||s.includes("crab"))&&e.add("Crustaceans"),s.includes("egg")&&e.add("Eggs"),(s.includes("fish")||s.includes("tuna")||s.includes("salmon"))&&e.add("Fish"),s.includes("peanut")&&e.add("Peanuts"),(s.includes("soy")||s.includes("tofu"))&&e.add("Soybeans"),(s.includes("milk")||s.includes("cheese")||s.includes("butter")||s.includes("cream"))&&e.add("Milk"),(s.includes("almond")||s.includes("walnut")||s.includes("cashew"))&&e.add("Nuts"),Array.from(e)},Ay=async t=>{await ft(1e3);const e=t.toLowerCase();return e.includes("meat")||e.includes("chicken")||e.includes("")?["Salmonella Test","E. coli Test","Listeria Test","Residue Analysis"]:e.includes("milk")||e.includes("dairy")||e.includes("")?["Antibiotic Residue Test","Somatic Cell Count","Standard Plate Count"]:e.includes("nuts")||e.includes("moxrat")?["Aflatoxin Test"]:["Visual Inspection","Microbiological Analysis"]},Oy=async t=>(await ft(1500),t.map(e=>{const s=e.description.toLowerCase();let n={hazards:[{type:"biological",description:"Bacterial growth"}],cause:"Time-temperature abuse",controlMeasures:"Monitor temperature and time",isCCP:!1,controlPointType:"PRP",justification:"Q1: Yes, Control Measure exists -> PRP"};return(s.includes("cook")||s.includes("cooking")||s.includes("bake")||s.includes("pasteurize")||s.includes(""))&&(n={hazards:[{type:"biological",description:"Survival of pathogens"}],cause:"Inadequate cooking time/temperature",controlMeasures:"Cook to a validated internal temperature for a specific time.",isCCP:!0,controlPointType:"CCP",justification:"Q1: No, Q2: Yes, Step eliminates hazard -> CCP"}),(s.includes("metal detection")||s.includes("x-ray"))&&(n={hazards:[{type:"physical",description:"Metal fragments"}],cause:"Contamination from equipment",controlMeasures:"Pass product through a calibrated metal detector.",isCCP:!0,controlPointType:"CCP",justification:"Q1: No, Q2: Yes, Step eliminates hazard -> CCP"}),{...e,hazardAnalysis:n}})),Ey=async t=>{await ft(1e3);const e="|   |   |   CCP (/) |  (   ) |",s="|---|---|---|---|",n=t.filter(i=>i.hazardAnalysis).map(i=>{var c;const a=i.hazardAnalysis,l=a.controlPointType==="CCP",o=((c=a.hazards[0])==null?void 0:c.description)||"N/A";return`| ${i.description} | ${o} | ${l?"":""} | ${a.justification} |`}).join(`
`);return[e,s,n].join(`
`)},Ry=async t=>(await ft(1e3),`|    (CCP) |      |    |     |
|---|---|---|---|
|  | Survival of pathogens |          75    15 . |            . |
|   | Metal fragments |           1.5       2.0 . |        . |
    `),zy=async(t,e)=>(await ft(1e3),`|    (CCP) |    |    ( ) |  |     |
|---|---|---|---|---|
|  |      |      |    |    |
|   |     |     (  ) |       |    |
    `),Fy=async(t,e)=>(await ft(1e3),`|    (CCP) |  (     ) |    |    |   |   |
|---|---|---|---|---|---|
|  |      75   |         . |       . |   |    |
|   |          |         . |    . |   |      |
    `),By=async t=>(await ft(1e3),`|   |    |  |  |  |
|---|---|---|---|---|
|    |       |  |   |    |
|      |         |  |    |    |
|    (Environmental Swabs) |       |   |   |    |
|     |       |  |    |    |
    `),Wy=async t=>(await ft(1e3),`|   /  |    |   |   |
|---|---|---|---|
|      |      ${t}     |     |  |
|     |      |   |  |
|     |      |   |   |
|    |       |    |     +  |
    `),$y=async(t,e,s)=>(await ft(1500),t==="pestControl"&&s?`###    (  )
        
**1. :**        .

**2.  :**
- **  ( ):**    15      .
- **   ( ):**            .
- **   ():**       .

**3.   :** (          ).
`:`###  ${t}

         (${e}).

**1. :** ...
**2. :** ...
**3. :** ...
**4. :** ...
`),Hy=async(t,e)=>(await ft(2e3),{source:t,sketchUrl:e?"data:image/png;base64,...":void 0,requiredTests:[{id:"wt1",name:"Total Coliforms",frequency:"monthly",lastCheck:null},{id:"wt2",name:"Free Chlorine Residual",frequency:"daily",lastCheck:null},{id:"wt3",name:"pH Level",frequency:"weekly",lastCheck:null}],recommendedFilters:[{id:"wf1",type:"Sediment Filter",maintenanceSchedule:"Clean monthly, replace annually"},{id:"wf2",type:"Activated Carbon Filter",maintenanceSchedule:"Replace every 6 months"}],chemicals:["Sodium Hypochlorite (as needed for disinfection)"],haccpDetails:`###     (${t})

|  |  |   |   |  |   |
|---|---|---|---|---|---|
|     |   |   |   0.5-1.0 ppm |      |      |
|   |    |    |    |   |    |
`}),Vy=async(t,e)=>(await ft(1200),`
###    (SOP) : ${e} (: ${t})

**1.  :**
-         .
-      (  ).

**2.  :**
- ** :**         .
- ** :**        .
- ** :**       .

**3.  :**
-   .
-        .
    `),Uy=async(t,e)=>(await ft(1200),`
###    : ${e}

**1.  :**
-   .
-   .
-     .

**2.  :**
1.  **:**    .
2.  ** :**       .
3.  ** :**      .
4.  ** :**        .

**3.  :**
1.  ** :**       .
2.  ** :**         .
3.  **:**         .
4.  ** :**   .
    `),fn=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),rx=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Yy=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),qy=({message:t,type:e})=>{const{showNotification:s}=Q(),n=()=>{const c=document.querySelector(".fixed.top-5.right-5");c&&(c.innerHTML="")},i={success:r.jsx(fn,{className:"h-6 w-6 text-green-400","aria-hidden":"true"}),error:r.jsx(rx,{className:"h-6 w-6 text-red-400","aria-hidden":"true"})},l={success:{bg:"bg-green-50",text:"text-green-800",button:"bg-green-50 text-green-500 hover:bg-green-100 focus:ring-offset-green-50 focus:ring-green-600"},error:{bg:"bg-red-50",text:"text-red-800",button:"bg-red-50 text-red-500 hover:bg-red-100 focus:ring-offset-red-50 focus:ring-red-600"}}[e],o=i[e];return r.jsx("div",{className:"fixed top-5 right-5 z-[100] w-full max-w-sm",children:r.jsx("div",{className:`rounded-lg ${l.bg} p-4 shadow-lg ring-1 ring-black ring-opacity-5`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:o}),r.jsx("div",{className:"mx-3 flex-1 pt-0.5",children:r.jsx("p",{className:`text-sm font-medium ${l.text}`,children:t})}),r.jsx("div",{className:"flex flex-shrink-0",children:r.jsxs("button",{type:"button",onClick:n,className:`inline-flex rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${l.button}`,children:[r.jsx("span",{className:"sr-only",children:"Dismiss"}),r.jsx(Yy,{className:"h-5 w-5","aria-hidden":"true"})]})})]})})})},ax=M.createContext(null),Xy=({children:t})=>{const[e,s]=M.useState(oy),[n,i]=M.useState(cy),[a,l]=M.useState(dy),[o,c]=M.useState(hy),[d,u]=M.useState(uy),[h,m]=M.useState(my),[p,f]=M.useState(fy),[x,y]=M.useState(py),[b,g]=M.useState(xy),[j,w]=M.useState(gy),[v,N]=M.useState(by),[k,_]=M.useState(vy),[T,C]=M.useState(yy),[L,D]=M.useState(jy),[S,E]=M.useState(wy),[O,z]=M.useState(Ny),[X,W]=M.useState(ky),[U,K]=M.useState(_y),[re,ne]=M.useState(Sy),[Le,ce]=M.useState(Cy),[Be,ke]=M.useState(My),[_t,Nr]=M.useState(Py),[ii,kr]=M.useState(Ty),[_r,Fs]=M.useState(Dy),[Sr,ri]=M.useState([]),[Cr,xn]=M.useState(null),[R,V]=M.useState({}),[F,ae]=M.useState(()=>{const P=localStorage.getItem("currentUser");return P?JSON.parse(P):null}),[Ie,gn]=M.useState("Dashboard"),[cs,Mr]=M.useState(null),[Al,v0]=M.useState(null),[y0,j0]=M.useState(null),[w0,N0]=M.useState(null),[k0,Zd]=M.useState(null),[_0,S0]=M.useState(null),[C0,M0]=M.useState(null),[P0,T0]=M.useState(!1);M.useEffect(()=>{if(cs){const P=setTimeout(()=>Mr(null),5e3);return()=>clearTimeout(P)}},[cs]);const Z=(P,I)=>{Mr({message:P,type:I})},pt=(P,I)=>{const A={id:`log_${Date.now()}`,timestamp:new Date().toISOString(),userId:I.id,userName:I.role==="TEAM_MEMBER"?I.name:I.companyName,action:P};f($=>[...$,A])},D0=async(P,I)=>{const $=[...e,...n].find(q=>q.email===P&&q.password===I);$&&$.status==="active"?(ae($),localStorage.setItem("currentUser",JSON.stringify($)),pt("  ",$),Z("   !","success")):$&&$.status!=="active"?Z("    .","error"):Z("      .","error")},L0=()=>{F&&pt("  ",F),ae(null),localStorage.removeItem("currentUser")},I0=async(P,I,A,$)=>{if(e.find(he=>he.email===I))return Z("    .","error"),null;const q={id:`company_${Date.now()}`,email:I,password:A,companyName:P,role:"COMPANY_ADMIN",status:"pending",joined:new Date().toISOString(),businessType:$,region:" ",industry:" "};return s(he=>[...he,q]),Z("   .      .","success"),q},A0=async P=>{const I=P;return e.find($=>$.id===I&&$.status==="pending")?(tu(I,"active"),!0):!1},O0=P=>F?F.role==="COMPANY_ADMIN"||F.role==="PLATFORM_ADMIN"?!0:F.role==="TEAM_MEMBER"?F.permissions.includes(P):!1:!1,E0=()=>{if(F){if(F.role==="TEAM_MEMBER"){const P=e.find(I=>I.id===F.companyId);return P==null?void 0:P.businessType}return F.businessType}},R0=()=>F?F.role==="TEAM_MEMBER"?F.companyId:F.id:null,z0=async P=>{const I=R0(),A=e.find(q=>q.id===I);if(!A)return;const $={...P,id:`team_${Date.now()}`,companyId:A.id,companyName:A.companyName,role:"TEAM_MEMBER",joined:new Date().toISOString(),status:"pending",businessType:A.businessType};i(q=>[...q,$]),pt(` ${$.name}  `,F)},F0=async P=>{i(I=>I.map(A=>A.id===P.id?P:A)),pt(`  ${P.name}`,F)},B0=async P=>{const I=n.find(A=>A.id===P);i(A=>A.filter($=>$.id!==P)),I&&pt(` ${I.name}  `,F)},W0=P=>{Z("      .","success")},$0=async P=>{const I={...P,id:`prod_${Date.now()}`};c(A=>[...A,I]),pt(` : ${I.name}`,F)},H0=async P=>{c(I=>I.map(A=>A.id===P.id?P:A)),pt(` : ${P.name}`,F)},V0=async P=>{const I=o.find(A=>A.id===P);c(A=>A.filter($=>$.id!==P)),I&&pt(` : ${I.name}`,F)},U0=async P=>{const I={...P,id:`sup_${Date.now()}`,evaluations:[]};u(A=>[...A,I]),pt(` : ${I.name}`,F)},Y0=async P=>{u(I=>I.map(A=>A.id===P.id?P:A)),pt(` : ${P.name}`,F)},q0=async P=>{const I=d.find(A=>A.id===P);u(A=>A.filter($=>$.id!==P)),I&&pt(` : ${I.name}`,F)},X0=async(P,I)=>{u(A=>A.map($=>$.id===P?{...$,evaluations:[...$.evaluations,{...I,id:`eval_${Date.now()}`}]}:$))},Jd=async P=>{const I={...P,id:`task_${Date.now()}`,progress:0,comments:[]};m(A=>[...A,I]),pt(` : ${I.title}`,F)},K0=async P=>{m(I=>I.map(A=>A.id===P.id?P:A))},Q0=async(P,I)=>{const A={authorId:F.id,authorName:F.role==="TEAM_MEMBER"?F.name:F.companyName,timestamp:new Date().toISOString(),text:I};m($=>$.map(q=>q.id===P?{...q,comments:[...q.comments,A]}:q))},G0=async P=>{l(P)},eu=async P=>{y(I=>I.find($=>$.productId===P.productId)?I.map($=>$.productId===P.productId?P:$):[...I,P])},Z0=async P=>{Z("  ...","success");const I=await Oy(P.steps),A={...P,steps:I};eu(A),Z("   .","success")},J0=async P=>{const I=x.find($=>$.productId===P);if(!I)return;Z("    ...","success");const A=await Ey(I.steps);g($=>({...$,[P]:A})),Z("    .","success")},eg=async P=>{if(!b[P])return;Z("   ...","success");const A=await Ry();w($=>({...$,[P]:A})),Z("    .","success")},tg=async P=>{const I=j[P],A=x.find(q=>q.productId===P);if(!I||!A)return;Z("   ...","success");const $=await zy();N(q=>({...q,[P]:$})),Z("    .","success")},sg=async P=>{const I=j[P],A=x.find(q=>q.productId===P);if(!I||!A)return;Z("   ...","success");const $=await Fy();_(q=>({...q,[P]:$})),Z("    .","success")},ng=async P=>{if(!{ccps:b[P],limits:j[P],monitoring:v[P],actions:k[P]}.ccps)return;Z("   ...","success");const A=await By();C($=>({...$,[P]:A})),Z("    .","success")},ig=async P=>{const I=o.find($=>$.id===P);if(!I)return;Z("   ...","success");const A=await Wy(I.name);D($=>({...$,[P]:A})),Z("    .","success")},rg=async(P,I,A)=>{Z(`   ${P}...`,"success");const $=await $y(P,I,A);E(q=>({...q,[P]:$})),Z(`   ${P} .`,"success")},ag=async(P,I)=>{Z("    ...","success");const A=await Hy(P,I);z(A),Z("     .","success")},lg=async P=>{if(!O)return;const I={...O,requiredTests:O.requiredTests.map(A=>A.id===P?{...A,lastCheck:new Date().toISOString().split("T")[0]}:A)};z(I),Z("   .","success")},og=P=>{const I={refrigerator:{min:0,max:4,unit:"C",threshold:1,value:2},freezer:{min:-22,max:-18,unit:"C",threshold:2,value:-20},oven:{min:160,max:220,unit:"C",threshold:10,value:180},hot_holding:{min:63,max:75,unit:"C",threshold:5,value:65},site_section:{min:18,max:25,unit:"C",threshold:2,value:22},transport_cart:{min:0,max:4,unit:"C",threshold:2,value:3}};let A=I[P.type];P.type==="transport_cart"&&P.subType==="hot"&&(A=I.hot_holding);const $={id:`sensor_${Date.now()}`,name:P.name,location:P.subType||P.type,type:P.type,subType:P.subType,currentValue:A.value,targetMin:A.min,targetMax:A.max,warningThreshold:A.threshold,unit:A.unit};W(q=>[...q,$]),Z("   .","success")},cg=async P=>{const I={...P,id:`equip_${Date.now()}`,maintenanceLog:[]};if(Fs(A=>[...A,I]),I.maintenanceSchedule!=="none"){const A={daily:1,weekly:7,monthly:30,quarterly:90,annually:365},$=new Date(I.installationDate);$.setDate($.getDate()+A[I.maintenanceSchedule]);const q={title:`   ${I.name}`,description:`  ${A[I.maintenanceSchedule]} .`,assignedTo:I.responsiblePersonId,status:"todo",relatedEquipmentId:I.id,dueDate:$.toISOString().split("T")[0]};await Jd(q)}setTimeout(async()=>{try{const[A,$]=await Promise.all([Vy(I.type,I.name),Uy(I.type,I.name)]);Fs(q=>q.map(he=>he.id===I.id?{...he,sopContent:A,cleaningInstructions:$}:he))}catch(A){console.error("Failed to generate AI content for equipment",A)}},100)},dg=async P=>{Fs(I=>I.map(A=>A.id===P.id?P:A))},ug=async P=>{Fs(I=>I.filter(A=>A.id!==P))},hg=()=>e.filter(P=>P.role==="COMPANY_ADMIN"&&P.status!=="pending"),mg=()=>e.filter(P=>P.status==="pending"),fg=async P=>{s(I=>I.map(A=>A.id===P?{...A,status:"active"}:A)),Z("    .","success")},pg=async P=>{s(I=>I.filter(A=>A.id!==P)),Z("    .","success")},tu=async(P,I)=>{s(A=>A.map($=>$.id===P?{...$,status:I}:$))},xg=async P=>{s(I=>I.filter(A=>A.id!==P)),i(I=>I.filter(A=>A.companyId!==P))},gg=async P=>{s(I=>I.map(A=>A.id===P.id?P:A))},bg=P=>{Z("       .","success")},vg=P=>{const I=e.find(A=>A.id===P);I&&(localStorage.setItem("realUser",JSON.stringify(F)),ae(I),Z(`    ${I.companyName}`,"success"))},yg=async(P,I)=>{K(A=>A.map($=>$.id===P?{...$,reply:I,status:"closed"}:$)),Z("    .","success")},jg=async P=>{const I={...P,id:`train_${Date.now()}`,attendees:[],assessments:[],evaluations:[]};ne(A=>[...A,I])},wg=async P=>{ne(I=>I.filter(A=>A.id!==P))},Ng=async(P,I)=>{const A={...I,id:`att_${Date.now()}`};ne($=>$.map(q=>q.id===P?{...q,attendees:[...q.attendees,A]}:q))},kg=async(P,I)=>{ne(A=>A.map($=>$.id===P?{...$,attendees:$.attendees.filter(q=>q.id!==I)}:$))},_g=(P,I,A)=>{Z(`     ${I}  ${P}`,"success")},Sg=async P=>{const I={...P,id:`po_${Date.now()}`,orderNumber:`PO-${Date.now().toString().slice(-4)}`,usedIngredients:[],materialsIssued:!1};ce(A=>[...A,I])},su=async P=>{ce(I=>I.map(A=>A.id===P.id?P:A))},Cg=async P=>{const I=Le.find(q=>q.id===P),A=o.find(q=>q.id===(I==null?void 0:I.productId));if(!I||!A)return;const $=A.ingredients.map(q=>{const he=q.amount*(I.quantity/(parseFloat(A.sizeOrWeight)||1));let St=he,Pr="g";return q.unit==="ml"?(Pr="g",St=he):q.unit==="l"?(Pr="kg",St=he):(q.unit==="g"||q.unit==="kg"||q.unit==="piece")&&(Pr=q.unit,St=he),{ingredientId:q.id,quantityUsed:St,unit:Pr}});su({...I,status:"materials-issued",materialsIssued:!0,usedIngredients:$}),Z("   .","success")},Mg=async P=>{const I={...P,id:`cust_${Date.now()}`};ke(A=>[...A,I])},Pg=async P=>{ke(I=>I.filter(A=>A.id!==P))},Tg=async P=>{const I={...P,id:`so_${Date.now()}`,orderNumber:`SO-${Date.now().toString().slice(-5)}`,date:new Date().toISOString()};Nr(A=>[...A,I])},Dg=async P=>{const I={...P,id:`rec_${Date.now()}`};kr(A=>[...A,I]),Z(`  ${P.ingredientName} .`,"success")},Ol=async P=>{const I=Le.find(he=>he.batchNumber===P);if(!I)return null;const A=o.find(he=>he.id===I.productId);if(!A)return null;const $=(I.rawMaterialBatchNumbers||[]).map(he=>ii.find(St=>St.ingredientId===he.ingredientId&&St.batchNumber===he.batchNumber)).filter(Boolean),q=_t.filter(he=>he.products.some(St=>St.batchNumber===P));return{product:A,productionOrder:I,backward:$,forward:q}},Lg={currentUser:F,login:D0,logout:L0,register:I0,activePage:Ie,setActivePage:gn,notification:cs,showNotification:Z,hasPermission:O0,getCompanyBusinessType:E0,users:e,team:n,companyInfo:a,products:o,suppliers:d,tasks:h,activityLogs:p,processFlows:x,ccpDeterminations:b,criticalLimits:j,monitoringProcedures:v,correctiveActions:k,verificationProcedures:T,recordKeeping:L,prpPlans:S,waterHaccpPlan:O,sensors:X,setSensors:W,supportTickets:U,trainingPrograms:re,productionOrders:Le,customers:Be,salesOrders:_t,materialReceipts:ii,equipment:_r,recallProcesses:Sr,recallPlans:R,addTeamMember:z0,updateTeamMember:F0,deleteTeamMember:B0,resetTeamMemberPassword:W0,addProduct:$0,updateProduct:H0,deleteProduct:V0,addSupplier:U0,updateSupplier:Y0,deleteSupplier:q0,addSupplierEvaluation:X0,addTask:Jd,updateTask:K0,addTaskComment:Q0,updateCompanyInfo:G0,addOrUpdateProcessFlow:eu,generateAndSaveHazardAnalysis:Z0,generateAndSaveCCPs:J0,generateAndSaveCriticalLimits:eg,generateAndSaveMonitoring:tg,generateAndSaveCorrectiveActions:sg,generateAndSaveVerification:ng,generateAndSaveRecordKeeping:ig,generateAndSavePRP:rg,generateAndSaveWaterHaccpPlan:ag,updateWaterHaccpTestDate:lg,addSensor:og,addEquipment:cg,updateEquipment:dg,deleteEquipment:ug,getAllCompanyAdmins:hg,getPendingCompanies:mg,approveRegistration:fg,rejectRegistration:pg,updateUserStatus:tu,deleteCompany:xg,updateCompanyAdmin:gg,resetUserPassword:bg,impersonateUser:vg,adminDashboardData:Ly,updateSupportTicket:yg,addTrainingProgram:jg,deleteTrainingProgram:wg,addAttendee:Ng,removeAttendee:kg,sendTrainingInvitation:_g,addProductionOrder:Sg,updateProductionOrder:su,issueMaterialsForProduction:Cg,addCustomer:Mg,deleteCustomer:Pg,addSalesOrder:Tg,receiveMaterials:Dg,performTraceabilitySearch:Ol,initiateRecall:async(P,I)=>{const A=await Ol(P);if(!A){Z("      .","error");return}const $={id:`recall_${Date.now()}`,batchNumber:P,reason:I,initiatedAt:new Date().toISOString(),status:"active",team:[],affectedCustomers:A.forward.map(q=>({customerId:q.customer.id,customerName:q.customer.name,notified:!1,quantity:q.products.find(he=>he.batchNumber===P).quantity,quantityRestored:0,actionTaken:"pending"})),processingTasks:[],disposalTasks:[]};ri(q=>[...q,$]),Z(`     ${P}.`,"success")},updateRecallProcess:async P=>{ri(I=>I.map(A=>A.id===P.id?P:A))},mockRecallDrill:Cr,startMockRecall:async()=>{const P=Le.filter(q=>q.status==="completed"&&_t.some(he=>he.products.some(St=>St.batchNumber===q.batchNumber)));if(P.length===0){Z("      .","error");return}const I=P[Math.floor(Math.random()*P.length)],A=await Ol(I.batchNumber),$={id:`mock_${Date.now()}`,targetBatchNumber:I.batchNumber,startTime:Date.now(),endTime:null,status:"in-progress",currentStep:1,traceabilityResults:{backward:(A==null?void 0:A.productionOrder)||null,forward:(A==null?void 0:A.forward)||[]},team:[],tasks:[],finalDecision:"",correctiveActions:""};xn($)},updateMockRecallDrill:async P=>{xn(P)},completeMockRecallDrill:async P=>{const I={...P,status:"completed",endTime:Date.now()};xn(I),Zd(I),Z("    .","success")},haccpProductIdForPlan:Al,setHaccpProductIdForPlan:v0,printablePlanProductId:y0,setPrintablePlanProductId:j0,printableProcessFlowProductId:w0,setPrintableProcessFlowProductId:N0,printableMockRecall:k0,setPrintableMockRecall:Zd,printableRecallPlanBatchNumber:_0,setPrintableRecallPlanBatchNumber:S0,printableCompanyReportData:C0,setPrintableCompanyReportData:M0,printableWaterHACCP:P0,setPrintableWaterHACCP:T0,verifyEmail:A0};return r.jsxs(ax.Provider,{value:Lg,children:[t,cs&&r.jsx(qy,{message:cs.message,type:cs.type})]})},Q=()=>{const t=M.useContext(ax);if(t===void 0)throw new Error("useAppContext must be used within an AppProvider");return t},bc=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Xn=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})}),Ja=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5v-1.875a3.375 3.375 0 013.375-3.375h9.75a3.375 3.375 0 013.375 3.375v1.875m-17.25 4.5h16.5M6.375 6h11.25L21 12H3L6.375 6z"})}),Kn=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 00-12 0m12 0a9.094 9.094 0 01-12 0m12 0v-2.64a4.5 4.5 0 00-9 0v2.64m9 0a9.094 9.094 0 00-12 0m12 0a9.094 9.094 0 01-12 0M12 12.72a4.5 4.5 0 100-9 4.5 4.5 0 000 9z"})}),el=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),on=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Fn=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 20.917l9 2.022 9-2.022a12.02 12.02 0 00-2.382-9.971z"})}),lx=({className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v7m-4-2l4-2 4 2"})]}),ar=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})}),Id=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 21V10.08a2.25 2.25 0 01.996-1.858l5.5-3.582a2.25 2.25 0 012.012 0l5.5 3.582A2.25 2.25 0 0120 10.08V21M8 21h8M8 12h8m-8 4h8m-8-8v.01M12 12v.01M16 12v.01M21 21v-2a2 2 0 00-2-2H5a2 2 0 00-2 2v2M3 21h18M12 6.75h.008v.008H12V6.75z"})}),ox=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),vc=({className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),yc=({className:t})=>r.jsxs("div",{className:`text-white font-bold text-center ${t}`,children:[r.jsx("h1",{className:"text-2xl tracking-wider",children:"Food Safety est."}),r.jsx("p",{className:"text-lg font-semibold opacity-80",children:"  "})]}),tl=({className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5a3 3 0 11-6 0 3 3 0 016 0zM13.5 4.5v5.25A3.75 3.75 0 0110.5 15h-3a3.75 3.75 0 01-3.75-3.75V4.5"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9.75h.008v.008H8.25V9.75zm0 2.25h.008v.008H8.25v-2.25zm0 2.25h.008v.008H8.25V14.25z"})]}),Sl=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.01 9.01 0 006.364-2.636 9.01 9.01 0 00-12.728 0A9.01 9.01 0 0012 21zM12 3c-3.314 0-6 4.03-6 9s2.686 9 6 9 6-4.03 6-9-2.686-9-6-9z"})}),Ad=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),cx=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 12.75l-2.625-2.625a.375.375 0 010-.53l4.5-4.5a.375.375 0 01.53 0l2.625 2.625M13.5 14.25l-2.625-2.625a.375.375 0 010-.53l4.5-4.5a.375.375 0 01.53 0l2.625 2.625m-4.5 4.5v.75a.375.375 0 01-.375.375h-.75a.375.375 0 01-.375-.375v-.75m-6.375 4.5v-1.5a.375.375 0 01.375-.375h1.5a.375.375 0 01.375.375v1.5m-3 0h3m-3 0h-1.5a.375.375 0 01-.375-.375v-1.5a.375.375 0 01.375-.375H6.75m6.75 3h3m-3 0h-1.5a.375.375 0 01-.375-.375v-1.5a.375.375 0 01.375-.375h1.5a.375.375 0 01.375.375v1.5m-3 0h3m-6.375-3.75v-1.5a.375.375 0 01.375-.375h1.5a.375.375 0 01.375.375v1.5m-3 0h3m-3 0h-1.5a.375.375 0 01-.375-.375v-1.5a.375.375 0 01.375-.375H6.75m6.75 3h3m-3 0h-1.5a.375.375 0 01-.375-.375v-1.5a.375.375 0 01.375-.375h1.5a.375.375 0 01.375.375v1.5m-3 0h3M4.5 8.25v-.75a.375.375 0 01.375-.375h.75a.375.375 0 01.375.375v.75m-3 0h3m-3 0h-1.5a.375.375 0 01-.375-.375v-.75a.375.375 0 01.375-.375H3"})}),hh=({item:t,activePage:e,setActivePage:s})=>r.jsxs("button",{onClick:()=>s(t.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-colors ${e===t.id?"bg-[var(--accent)] text-white":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[r.jsx(t.icon,{className:"h-6 w-6"}),r.jsx("span",{children:t.label})]}),Ky=()=>{const{activePage:t,setActivePage:e,currentUser:s,hasPermission:n}=Q();if((s==null?void 0:s.role)==="PLATFORM_ADMIN"){const l=[{id:"Dashboard",label:" ",icon:bc},{id:"CompanyManagement",label:" ",icon:Kn},{id:"RegistrationRequests",label:" ",icon:el},{id:"SupportTickets",label:" ",icon:on},{id:"PlatformSettings",label:" ",icon:vc}];return r.jsxs("aside",{className:"w-64 bg-[var(--primary-light)] text-white flex flex-col flex-shrink-0",children:[r.jsx("div",{className:"h-20 flex items-center justify-center border-b border-blue-900/50",children:r.jsx(yc,{})}),r.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:l.map(o=>r.jsx(hh,{item:o,activePage:t,setActivePage:e},o.id))})]})}const a=[{items:[{id:"Dashboard",label:"",icon:bc,permission:!0}]},{title:" ",items:[{id:"Products",label:"",icon:Xn,permission:n("product:view")},{id:"Suppliers",label:"",icon:Ja,permission:n("supplier:view")},{id:"Inventory",label:"",icon:ar,permission:n("inventory:view")},{id:"ProductionOrders",label:" ",icon:Id,permission:n("production:view")},{id:"SalesOrders",label:" ",icon:ox,permission:n("sales:view")}]},{title:" ",items:[{id:"HACCPPlan",label:" ",icon:on,permission:n("product:view")},{id:"WaterHACCP",label:" ",icon:Sl,permission:n("haccp:view_water_plan")},{id:"TemperatureMonitoring",label:" ",icon:tl,permission:n("haccp:view_temp_monitoring")},{id:"PRPs",label:" ",icon:Fn,permission:n("prp:view")},{id:"Maintenance",label:" ",icon:cx,permission:n("maintenance:view")}]},{title:" ",items:[{id:"Team",label:" ",icon:Kn,permission:n("team:view")},{id:"Tasks",label:"",icon:el,permission:n("task:view")},{id:"Training",label:"",icon:lx,permission:n("training:view")},{id:"ActivityLog",label:" ",icon:Ad,permission:!0},{id:"BeneficiaryInfo",label:" ",icon:vc,permission:!0}]}];return r.jsxs("aside",{className:"w-64 bg-[var(--primary-light)] text-white flex flex-col flex-shrink-0",children:[r.jsx("div",{className:"h-20 flex items-center justify-center border-b border-blue-900/50",children:r.jsx(yc,{})}),r.jsx("nav",{className:"flex-1 px-4 py-6 overflow-y-auto",children:a.map((l,o)=>{const c=l.items.filter(d=>d.permission);return c.length===0?null:r.jsxs("div",{className:"mb-4",children:[l.title&&r.jsx("h3",{className:"px-4 text-xs font-semibold uppercase text-slate-400 mb-2",children:l.title}),r.jsx("div",{className:"space-y-1",children:c.map(d=>r.jsx(hh,{item:d,activePage:t,setActivePage:e},d.id))})]},o)})})]})},Qy=({item:t,activePage:e,setActivePage:s})=>r.jsxs("button",{onClick:()=>s(t.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-colors ${e===t.id?"bg-[var(--accent)] text-white":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[r.jsx(t.icon,{className:"h-6 w-6"}),r.jsx("span",{children:t.label})]}),Gy=()=>{const{activePage:t,setActivePage:e,hasPermission:s}=Q(),n=[{items:[{id:"Dashboard",label:"",icon:bc,permission:!0}]},{title:" ",items:[{id:"Products",label:" ",icon:Xn,permission:s("product:view")},{id:"Suppliers",label:"",icon:Ja,permission:s("supplier:view")},{id:"Inventory",label:"",icon:ar,permission:s("inventory:view")},{id:"ProductionOrders",label:" ",icon:Id,permission:s("production:view")}]},{title:" ",items:[{id:"HACCPPlan",label:" ",icon:on,permission:s("product:view")},{id:"WaterHACCP",label:" ",icon:Sl,permission:s("haccp:view_water_plan")},{id:"TemperatureMonitoring",label:" ",icon:tl,permission:s("haccp:view_temp_monitoring")},{id:"PersonalHygiene",label:" ",icon:Fn,permission:s("prp:view")},{id:"CleaningAndSanitation",label:" ",icon:Fn,permission:s("prp:view")},{id:"PestControl",label:" ",icon:Fn,permission:s("prp:view")},{id:"Maintenance",label:" ",icon:cx,permission:s("maintenance:view")}]},{title:" ",items:[{id:"Team",label:" ",icon:Kn,permission:s("team:view")},{id:"Tasks",label:"",icon:el,permission:s("task:view")},{id:"Training",label:"",icon:lx,permission:s("training:view")},{id:"ActivityLog",label:" ",icon:Ad,permission:!0},{id:"BeneficiaryInfo",label:" ",icon:vc,permission:!0}]}];return r.jsxs("aside",{className:"w-64 bg-[var(--primary-light)] text-white flex flex-col flex-shrink-0",children:[r.jsx("div",{className:"h-20 flex items-center justify-center border-b border-blue-900/50",children:r.jsx(yc,{})}),r.jsx("nav",{className:"flex-1 px-4 py-6 overflow-y-auto",children:n.map((i,a)=>{const l=i.items.filter(o=>o.permission);return l.length===0?null:r.jsxs("div",{className:"mb-4",children:[i.title&&r.jsx("h3",{className:"px-4 text-xs font-semibold uppercase text-slate-400 mb-2",children:i.title}),r.jsx("div",{className:"space-y-1",children:l.map(o=>r.jsx(Qy,{item:o,activePage:t,setActivePage:e},o.id))})]},a)})})]})},Zy=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Jy=()=>{const{logout:t,currentUser:e}=Q(),s=(e==null?void 0:e.role)==="TEAM_MEMBER",n=s?e.name:e==null?void 0:e.companyName,i=s?e==null?void 0:e.companyName:" !",a=l=>{if(!l)return"?";const o=l.split(" ");return o.length>1?`${o[0][0]}${o[o.length-1][0]}`.toUpperCase():l.substring(0,2).toUpperCase()};return r.jsxs("header",{className:"h-20 bg-white border-b border-slate-200 flex items-center justify-between px-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"h-12 w-12 rounded-full bg-slate-200 flex items-center justify-center font-bold text-slate-600 text-lg",children:a(n)}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-xl font-bold text-slate-800",children:[" ",n]}),r.jsx("p",{className:"text-sm text-slate-500",children:i})]})]}),r.jsx("div",{children:r.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-[var(--destructive)] transition-colors",children:[r.jsx(Zy,{className:"h-5 w-5"}),r.jsx("span",{children:" "})]})})]})},jc=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Od=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),mh=()=>{const{products:t,suppliers:e,team:s,tasks:n,activityLogs:i,currentUser:a,getCompanyBusinessType:l,setActivePage:o,hasPermission:c,sensors:d,waterHaccpPlan:u}=Q(),h=l()==="kitchen"||l()==="restaurant";if((a==null?void 0:a.role)==="TEAM_MEMBER"){const y=n.filter(g=>g.assignedTo===(a==null?void 0:a.id)&&g.status!=="done"),b=[{page:"Products",label:"",icon:r.jsx(Xn,{className:"h-8 w-8 text-blue-500"}),permission:"product:view"},{page:"Suppliers",label:"",icon:r.jsx(Ja,{className:"h-8 w-8 text-emerald-500"}),permission:"supplier:view"},{page:"Inventory",label:"",icon:r.jsx(ar,{className:"h-8 w-8 text-yellow-500"}),permission:"inventory:view"},{page:"ProductionOrders",label:" ",icon:r.jsx(Id,{className:"h-8 w-8 text-indigo-500"}),permission:"production:view"},{page:"HACCPPlan",label:" ",icon:r.jsx(on,{className:"h-8 w-8 text-red-500"}),permission:"product:view"},{page:"PersonalHygiene",label:" ",icon:r.jsx(Fn,{className:"h-8 w-8 text-cyan-500"}),permission:"prp:view"},{page:"TemperatureMonitoring",label:" ",icon:r.jsx(tl,{className:"h-8 w-8 text-orange-500"}),permission:"haccp:view_temp_monitoring"},{page:"WaterHACCP",label:" ",icon:r.jsx(Sl,{className:"h-8 w-8 text-sky-500"}),permission:"haccp:view_water_plan"}];return r.jsx("div",{children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1 bg-white p-6 rounded-lg shadow-md",children:[r.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:["  (",y.length,")"]}),y.length>0?r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:y.slice(0,5).map(g=>r.jsxs("div",{className:"p-3 bg-slate-50 rounded-md border",children:[r.jsx("p",{className:"font-semibold text-slate-800 text-sm",children:g.title}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:g.status==="todo"?"":" "})]},g.id))}):r.jsx("p",{className:"text-slate-500 text-center py-8",children:"     ."}),r.jsxs("button",{onClick:()=>o("Tasks"),className:"mt-4 text-sm font-semibold text-emerald-600 hover:text-emerald-800 flex items-center gap-2",children:[r.jsx("span",{children:"  "}),r.jsx(jc,{className:"h-4 w-4"})]})]}),r.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"  "}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:b.map(g=>c(g.permission)&&r.jsxs("button",{onClick:()=>o(g.page),className:"flex flex-col items-center justify-center p-4 bg-slate-50 rounded-lg hover:bg-emerald-50 hover:shadow-md transition-all border border-slate-200",children:[g.icon,r.jsx("span",{className:"mt-2 text-sm font-semibold text-slate-700",children:g.label})]},g.page))})]})]})})}const p=d.reduce((y,b)=>{const{currentValue:g,targetMin:j,targetMax:w,warningThreshold:v}=b,N=j-v,k=w+v;return g>k||g<N?y.danger++:g<j||g>w?y.warning++:y.compliant++,y},{compliant:0,warning:0,danger:0}),f=(u==null?void 0:u.requiredTests.filter(y=>{if(!y.lastCheck)return!0;const b=new Date(y.lastCheck),g=new Date(b),w={daily:1,weekly:7,monthly:30,quarterly:90,annually:365}[y.frequency]||30;return g.setDate(b.getDate()+w),g<=new Date(Date.now()+7*24*60*60*1e3)}).length)||0,x=[{name:h?"  ":"",value:t.length,icon:r.jsx(Xn,{className:"h-8 w-8 text-blue-500"}),page:"Products"},{name:" ",value:e.length,icon:r.jsx(Ja,{className:"h-8 w-8 text-green-500"}),page:"Suppliers"},{name:"  ",value:s.length,icon:r.jsx(Kn,{className:"h-8 w-8 text-purple-500"}),page:"Team"},{name:"  ",value:n.filter(y=>y.status==="inprogress").length,icon:r.jsx(el,{className:"h-8 w-8 text-orange-500"}),page:"Tasks"}];return r.jsxs("div",{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:x.map(y=>r.jsxs("button",{onClick:()=>o(y.page),className:"bg-white p-6 rounded-lg shadow-md flex items-center gap-4 text-right hover:shadow-lg hover:-translate-y-1 transition-all",children:[y.icon,r.jsxs("div",{children:[r.jsx("div",{className:"text-3xl font-bold text-slate-800",children:y.value}),r.jsx("div",{className:"text-slate-500 text-sm",children:y.name})]})]},y.name))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1 bg-white p-6 rounded-lg shadow-md",children:[r.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(tl,{className:"h-6 w-6"}),"  "]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 text-green-800 rounded-md",children:[r.jsx("span",{className:"font-semibold",children:""}),r.jsx("span",{className:"font-bold text-lg",children:p.compliant})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-yellow-50 text-yellow-800 rounded-md",children:[r.jsx("span",{className:"font-semibold",children:""}),r.jsx("span",{className:"font-bold text-lg",children:p.warning})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 text-red-800 rounded-md",children:[r.jsx("span",{className:"font-semibold",children:""}),r.jsx("span",{className:"font-bold text-lg",children:p.danger})]})]}),r.jsxs("button",{onClick:()=>o("TemperatureMonitoring"),className:"mt-4 text-sm font-semibold text-emerald-600 hover:text-emerald-800 flex items-center gap-2",children:[r.jsx("span",{children:"    "}),r.jsx(jc,{className:"h-4 w-4"})]})]}),r.jsxs("div",{className:"lg:col-span-1 bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:" "}),i.length>0?r.jsx("ul",{className:"space-y-4 max-h-72 overflow-y-auto pr-2",children:[...i].reverse().slice(0,5).map(y=>r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"relative mt-1",children:r.jsx("div",{className:"h-3 w-3 bg-slate-300 rounded-full"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-700",children:y.action}),r.jsxs("p",{className:"text-xs text-slate-500",children:[y.userName," - ",new Date(y.timestamp).toLocaleTimeString("ar-SA")]})]})]},y.id))}):r.jsx("p",{className:"text-slate-500 text-center py-8",children:"    ."})]}),r.jsxs("div",{className:"lg:col-span-1 bg-white p-6 rounded-lg shadow-md",children:[r.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Od,{className:"h-6 w-6 text-yellow-500"})," "]}),f>0?r.jsxs("div",{className:"p-3 bg-blue-50 border-l-4 border-blue-400 rounded",children:[r.jsx("h3",{className:"font-semibold text-blue-800",children:" "}),r.jsxs("p",{className:"text-sm text-blue-700",children:[" ",f,"      ."]}),r.jsx("button",{onClick:()=>o("WaterHACCP"),className:"text-xs font-bold text-blue-800 hover:underline mt-1",children:" "})]}):r.jsx("p",{className:"text-slate-500 text-center py-8",children:"   ."})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function yr(t){return t+.5|0}const gs=(t,e,s)=>Math.max(Math.min(t,s),e);function Ni(t){return gs(yr(t*2.55),0,255)}function Ts(t){return gs(yr(t*255),0,255)}function Qt(t){return gs(yr(t/2.55)/100,0,1)}function fh(t){return gs(yr(t*100),0,100)}const xt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wc=[..."0123456789ABCDEF"],e1=t=>wc[t&15],t1=t=>wc[(t&240)>>4]+wc[t&15],qr=t=>(t&240)>>4===(t&15),s1=t=>qr(t.r)&&qr(t.g)&&qr(t.b)&&qr(t.a);function n1(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&xt[t[1]]*17,g:255&xt[t[2]]*17,b:255&xt[t[3]]*17,a:e===5?xt[t[4]]*17:255}:(e===7||e===9)&&(s={r:xt[t[1]]<<4|xt[t[2]],g:xt[t[3]]<<4|xt[t[4]],b:xt[t[5]]<<4|xt[t[6]],a:e===9?xt[t[7]]<<4|xt[t[8]]:255})),s}const i1=(t,e)=>t<255?e(t):"";function r1(t){var e=s1(t)?e1:t1;return t?"#"+e(t.r)+e(t.g)+e(t.b)+i1(t.a,e):void 0}const a1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dx(t,e,s){const n=e*Math.min(s,1-s),i=(a,l=(a+t/30)%12)=>s-n*Math.max(Math.min(l-3,9-l,1),-1);return[i(0),i(8),i(4)]}function l1(t,e,s){const n=(i,a=(i+t/60)%6)=>s-s*e*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function o1(t,e,s){const n=dx(t,1,.5);let i;for(e+s>1&&(i=1/(e+s),e*=i,s*=i),i=0;i<3;i++)n[i]*=1-e-s,n[i]+=e;return n}function c1(t,e,s,n,i){return t===i?(e-s)/n+(e<s?6:0):e===i?(s-t)/n+2:(t-e)/n+4}function Ed(t){const s=t.r/255,n=t.g/255,i=t.b/255,a=Math.max(s,n,i),l=Math.min(s,n,i),o=(a+l)/2;let c,d,u;return a!==l&&(u=a-l,d=o>.5?u/(2-a-l):u/(a+l),c=c1(s,n,i,u,a),c=c*60+.5),[c|0,d||0,o]}function Rd(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Ts)}function zd(t,e,s){return Rd(dx,t,e,s)}function d1(t,e,s){return Rd(o1,t,e,s)}function u1(t,e,s){return Rd(l1,t,e,s)}function ux(t){return(t%360+360)%360}function h1(t){const e=a1.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Ni(+e[5]):Ts(+e[5]));const i=ux(+e[2]),a=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?n=d1(i,a,l):e[1]==="hsv"?n=u1(i,a,l):n=zd(i,a,l),{r:n[0],g:n[1],b:n[2],a:s}}function m1(t,e){var s=Ed(t);s[0]=ux(s[0]+e),s=zd(s),t.r=s[0],t.g=s[1],t.b=s[2]}function f1(t){if(!t)return;const e=Ed(t),s=e[0],n=fh(e[1]),i=fh(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${i}%, ${Qt(t.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const ph={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},xh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function p1(){const t={},e=Object.keys(xh),s=Object.keys(ph);let n,i,a,l,o;for(n=0;n<e.length;n++){for(l=o=e[n],i=0;i<s.length;i++)a=s[i],o=o.replace(a,ph[a]);a=parseInt(xh[l],16),t[o]=[a>>16&255,a>>8&255,a&255]}return t}let Xr;function x1(t){Xr||(Xr=p1(),Xr.transparent=[0,0,0,0]);const e=Xr[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const g1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function b1(t){const e=g1.exec(t);let s=255,n,i,a;if(e){if(e[7]!==n){const l=+e[7];s=e[8]?Ni(l):gs(l*255,0,255)}return n=+e[1],i=+e[3],a=+e[5],n=255&(e[2]?Ni(n):gs(n,0,255)),i=255&(e[4]?Ni(i):gs(i,0,255)),a=255&(e[6]?Ni(a):gs(a,0,255)),{r:n,g:i,b:a,a:s}}}function v1(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Qt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const oo=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,vn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function y1(t,e,s){const n=vn(Qt(t.r)),i=vn(Qt(t.g)),a=vn(Qt(t.b));return{r:Ts(oo(n+s*(vn(Qt(e.r))-n))),g:Ts(oo(i+s*(vn(Qt(e.g))-i))),b:Ts(oo(a+s*(vn(Qt(e.b))-a))),a:t.a+s*(e.a-t.a)}}function Kr(t,e,s){if(t){let n=Ed(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=zd(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function hx(t,e){return t&&Object.assign(e||{},t)}function gh(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ts(t[3]))):(e=hx(t,{r:0,g:0,b:0,a:1}),e.a=Ts(e.a)),e}function j1(t){return t.charAt(0)==="r"?b1(t):h1(t)}class lr{constructor(e){if(e instanceof lr)return e;const s=typeof e;let n;s==="object"?n=gh(e):s==="string"&&(n=n1(e)||x1(e)||j1(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=hx(this._rgb);return e&&(e.a=Qt(e.a)),e}set rgb(e){this._rgb=gh(e)}rgbString(){return this._valid?v1(this._rgb):void 0}hexString(){return this._valid?r1(this._rgb):void 0}hslString(){return this._valid?f1(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,i=e.rgb;let a;const l=s===a?.5:s,o=2*l-1,c=n.a-i.a,d=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;a=1-d,n.r=255&d*n.r+a*i.r+.5,n.g=255&d*n.g+a*i.g+.5,n.b=255&d*n.b+a*i.b+.5,n.a=l*n.a+(1-l)*i.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=y1(this._rgb,e._rgb,s)),this}clone(){return new lr(this.rgb)}alpha(e){return this._rgb.a=Ts(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=yr(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Kr(this._rgb,2,e),this}darken(e){return Kr(this._rgb,2,-e),this}saturate(e){return Kr(this._rgb,1,e),this}desaturate(e){return Kr(this._rgb,1,-e),this}rotate(e){return m1(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ut(){}const w1=(()=>{let t=0;return()=>t++})();function J(t){return t==null}function ge(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function te(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ne(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function lt(t,e){return Ne(t)?t:e}function G(t,e){return typeof t>"u"?e:t}const N1=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,mx=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function de(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function le(t,e,s,n){let i,a,l;if(ge(t))for(a=t.length,i=0;i<a;i++)e.call(s,t[i],i);else if(te(t))for(l=Object.keys(t),a=l.length,i=0;i<a;i++)e.call(s,t[l[i]],l[i])}function sl(t,e){let s,n,i,a;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(i=t[s],a=e[s],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function nl(t){if(ge(t))return t.map(nl);if(te(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let i=0;for(;i<n;++i)e[s[i]]=nl(t[s[i]]);return e}return t}function fx(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function k1(t,e,s,n){if(!fx(t))return;const i=e[t],a=s[t];te(i)&&te(a)?or(i,a,n):e[t]=nl(a)}function or(t,e,s){const n=ge(e)?e:[e],i=n.length;if(!te(t))return t;s=s||{};const a=s.merger||k1;let l;for(let o=0;o<i;++o){if(l=n[o],!te(l))continue;const c=Object.keys(l);for(let d=0,u=c.length;d<u;++d)a(c[d],t,l,s)}return t}function zi(t,e){return or(t,e,{merger:_1})}function _1(t,e,s){if(!fx(t))return;const n=e[t],i=s[t];te(n)&&te(i)?zi(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=nl(i))}const bh={"":t=>t,x:t=>t.x,y:t=>t.y};function S1(t){const e=t.split("."),s=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function C1(t){const e=S1(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Is(t,e){return(bh[e]||(bh[e]=C1(e)))(t)}function Fd(t){return t.charAt(0).toUpperCase()+t.slice(1)}const cr=t=>typeof t<"u",As=t=>typeof t=="function",vh=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function M1(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ie=Math.PI,pe=2*ie,P1=pe+ie,il=Number.POSITIVE_INFINITY,T1=ie/180,Se=ie/2,Bs=ie/4,yh=ie*2/3,bs=Math.log10,Vt=Math.sign;function Fi(t,e,s){return Math.abs(t-e)<s}function jh(t){const e=Math.round(t);t=Fi(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(bs(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function D1(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((i,a)=>i-a).pop(),e}function L1(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Qn(t){return!L1(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function I1(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function px(t,e,s){let n,i,a;for(n=0,i=t.length;n<i;n++)a=t[n][s],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Dt(t){return t*(ie/180)}function Bd(t){return t*(180/ie)}function wh(t){if(!Ne(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function xx(t,e){const s=e.x-t.x,n=e.y-t.y,i=Math.sqrt(s*s+n*n);let a=Math.atan2(n,s);return a<-.5*ie&&(a+=pe),{angle:a,distance:i}}function Nc(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function A1(t,e){return(t-e+P1)%pe-ie}function Ve(t){return(t%pe+pe)%pe}function dr(t,e,s,n){const i=Ve(t),a=Ve(e),l=Ve(s),o=Ve(a-i),c=Ve(l-i),d=Ve(i-a),u=Ve(i-l);return i===a||i===l||n&&a===l||o>c&&d<u}function Oe(t,e,s){return Math.max(e,Math.min(s,t))}function O1(t){return Oe(t,-32768,32767)}function es(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Wd(t,e,s){s=s||(l=>t[l]<e);let n=t.length-1,i=0,a;for(;n-i>1;)a=i+n>>1,s(a)?i=a:n=a;return{lo:i,hi:n}}const ts=(t,e,s,n)=>Wd(t,s,n?i=>{const a=t[i][e];return a<s||a===s&&t[i+1][e]===s}:i=>t[i][e]<s),E1=(t,e,s)=>Wd(t,s,n=>t[n][e]>=s);function R1(t,e,s){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>s;)i--;return n>0||i<t.length?t.slice(n,i):t}const gx=["push","pop","shift","splice","unshift"];function z1(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),gx.forEach(s=>{const n="_onData"+Fd(s),i=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...a){const l=i.apply(this,a);return t._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...a)}),l}})})}function Nh(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(gx.forEach(a=>{delete t[a]}),delete t._chartjs)}function bx(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const vx=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function yx(t,e){let s=[],n=!1;return function(...i){s=i,n||(n=!0,vx.call(window,()=>{n=!1,t.apply(e,s)}))}}function F1(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const $d=t=>t==="start"?"left":t==="end"?"right":"center",He=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,B1=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function jx(t,e,s){const n=e.length;let i=0,a=n;if(t._sorted){const{iScale:l,vScale:o,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=l.axis,{min:h,max:m,minDefined:p,maxDefined:f}=l.getUserBounds();if(p){if(i=Math.min(ts(c,u,h).lo,s?n:ts(e,u,l.getPixelForValue(h)).lo),d){const x=c.slice(0,i+1).reverse().findIndex(y=>!J(y[o.axis]));i-=Math.max(0,x)}i=Oe(i,0,n-1)}if(f){let x=Math.max(ts(c,l.axis,m,!0).hi+1,s?0:ts(e,u,l.getPixelForValue(m),!0).hi+1);if(d){const y=c.slice(x-1).findIndex(b=>!J(b[o.axis]));x+=Math.max(0,y)}a=Oe(x,i,n)-i}else a=n-i}return{start:i,count:a}}function wx(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=i,!0;const a=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),a}const Qr=t=>t===0||t===1,kh=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*pe/s)),_h=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*pe/s)+1,Bi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Se)+1,easeOutSine:t=>Math.sin(t*Se),easeInOutSine:t=>-.5*(Math.cos(ie*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Qr(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Qr(t)?t:kh(t,.075,.3),easeOutElastic:t=>Qr(t)?t:_h(t,.075,.3),easeInOutElastic(t){return Qr(t)?t:t<.5?.5*kh(t*2,.1125,.45):.5+.5*_h(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Bi.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Bi.easeInBounce(t*2)*.5:Bi.easeOutBounce(t*2-1)*.5+.5};function Hd(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Sh(t){return Hd(t)?t:new lr(t)}function co(t){return Hd(t)?t:new lr(t).saturate(.5).darken(.1).hexString()}const W1=["x","y","borderWidth","radius","tension"],$1=["color","borderColor","backgroundColor"];function H1(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:$1},numbers:{type:"number",properties:W1}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function V1(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ch=new Map;function U1(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Ch.get(s);return n||(n=new Intl.NumberFormat(t,e),Ch.set(s,n)),n}function jr(t,e,s){return U1(e,s).format(t)}const Nx={values(t){return ge(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let i,a=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),a=Y1(t,s)}const l=bs(Math.abs(a)),o=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),c={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),jr(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(bs(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?Nx.numeric.call(this,t,e,s):""}};function Y1(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Cl={formatters:Nx};function q1(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Cl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const cn=Object.create(null),kc=Object.create(null);function Wi(t,e){if(!e)return t;const s=e.split(".");for(let n=0,i=s.length;n<i;++n){const a=s[n];t=t[a]||(t[a]=Object.create(null))}return t}function uo(t,e,s){return typeof e=="string"?or(Wi(t,e),s):or(Wi(t,""),e)}class X1{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>co(i.backgroundColor),this.hoverBorderColor=(n,i)=>co(i.borderColor),this.hoverColor=(n,i)=>co(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return uo(this,e,s)}get(e){return Wi(this,e)}describe(e,s){return uo(kc,e,s)}override(e,s){return uo(cn,e,s)}route(e,s,n,i){const a=Wi(this,e),l=Wi(this,n),o="_"+s;Object.defineProperties(a,{[o]:{value:a[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[o],d=l[i];return te(c)?Object.assign({},d,c):G(c,d)},set(c){this[o]=c}}})}apply(e){e.forEach(s=>s(this))}}var be=new X1({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[H1,V1,q1]);function K1(t){return!t||J(t.size)||J(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function rl(t,e,s,n,i){let a=e[i];return a||(a=e[i]=t.measureText(i).width,s.push(i)),a>n&&(n=a),n}function Q1(t,e,s,n){n=n||{};let i=n.data=n.data||{},a=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},a=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let l=0;const o=s.length;let c,d,u,h,m;for(c=0;c<o;c++)if(h=s[c],h!=null&&!ge(h))l=rl(t,i,a,l,h);else if(ge(h))for(d=0,u=h.length;d<u;d++)m=h[d],m!=null&&!ge(m)&&(l=rl(t,i,a,l,m));t.restore();const p=a.length/2;if(p>s.length){for(c=0;c<p;c++)delete i[a[c]];a.splice(0,p)}return l}function Ws(t,e,s){const n=t.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((e-i)*n)/n+i}function Mh(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function _c(t,e,s,n){kx(t,e,s,n,null)}function kx(t,e,s,n,i){let a,l,o,c,d,u,h,m;const p=e.pointStyle,f=e.rotation,x=e.radius;let y=(f||0)*T1;if(p&&typeof p=="object"&&(a=p.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(y),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:i?t.ellipse(s,n,i/2,x,0,0,pe):t.arc(s,n,x,0,pe),t.closePath();break;case"triangle":u=i?i/2:x,t.moveTo(s+Math.sin(y)*u,n-Math.cos(y)*x),y+=yh,t.lineTo(s+Math.sin(y)*u,n-Math.cos(y)*x),y+=yh,t.lineTo(s+Math.sin(y)*u,n-Math.cos(y)*x),t.closePath();break;case"rectRounded":d=x*.516,c=x-d,l=Math.cos(y+Bs)*c,h=Math.cos(y+Bs)*(i?i/2-d:c),o=Math.sin(y+Bs)*c,m=Math.sin(y+Bs)*(i?i/2-d:c),t.arc(s-h,n-o,d,y-ie,y-Se),t.arc(s+m,n-l,d,y-Se,y),t.arc(s+h,n+o,d,y,y+Se),t.arc(s-m,n+l,d,y+Se,y+ie),t.closePath();break;case"rect":if(!f){c=Math.SQRT1_2*x,u=i?i/2:c,t.rect(s-u,n-c,2*u,2*c);break}y+=Bs;case"rectRot":h=Math.cos(y)*(i?i/2:x),l=Math.cos(y)*x,o=Math.sin(y)*x,m=Math.sin(y)*(i?i/2:x),t.moveTo(s-h,n-o),t.lineTo(s+m,n-l),t.lineTo(s+h,n+o),t.lineTo(s-m,n+l),t.closePath();break;case"crossRot":y+=Bs;case"cross":h=Math.cos(y)*(i?i/2:x),l=Math.cos(y)*x,o=Math.sin(y)*x,m=Math.sin(y)*(i?i/2:x),t.moveTo(s-h,n-o),t.lineTo(s+h,n+o),t.moveTo(s+m,n-l),t.lineTo(s-m,n+l);break;case"star":h=Math.cos(y)*(i?i/2:x),l=Math.cos(y)*x,o=Math.sin(y)*x,m=Math.sin(y)*(i?i/2:x),t.moveTo(s-h,n-o),t.lineTo(s+h,n+o),t.moveTo(s+m,n-l),t.lineTo(s-m,n+l),y+=Bs,h=Math.cos(y)*(i?i/2:x),l=Math.cos(y)*x,o=Math.sin(y)*x,m=Math.sin(y)*(i?i/2:x),t.moveTo(s-h,n-o),t.lineTo(s+h,n+o),t.moveTo(s+m,n-l),t.lineTo(s-m,n+l);break;case"line":l=i?i/2:Math.cos(y)*x,o=Math.sin(y)*x,t.moveTo(s-l,n-o),t.lineTo(s+l,n+o);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(y)*(i?i/2:x),n+Math.sin(y)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ss(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Ml(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Pl(t){t.restore()}function G1(t,e,s,n,i){if(!e)return t.lineTo(s.x,s.y);if(i==="middle"){const a=(e.x+s.x)/2;t.lineTo(a,e.y),t.lineTo(a,s.y)}else i==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function Z1(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function J1(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),J(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function e2(t,e,s,n,i){if(i.strikethrough||i.underline){const a=t.measureText(n),l=e-a.actualBoundingBoxLeft,o=e+a.actualBoundingBoxRight,c=s-a.actualBoundingBoxAscent,d=s+a.actualBoundingBoxDescent,u=i.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(l,u),t.lineTo(o,u),t.stroke()}}function t2(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function dn(t,e,s,n,i,a={}){const l=ge(e)?e:[e],o=a.strokeWidth>0&&a.strokeColor!=="";let c,d;for(t.save(),t.font=i.string,J1(t,a),c=0;c<l.length;++c)d=l[c],a.backdrop&&t2(t,a.backdrop),o&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),J(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(d,s,n,a.maxWidth)),t.fillText(d,s,n,a.maxWidth),e2(t,s,n,d,a),n+=Number(i.lineHeight);t.restore()}function ur(t,e){const{x:s,y:n,w:i,h:a,radius:l}=e;t.arc(s+l.topLeft,n+l.topLeft,l.topLeft,1.5*ie,ie,!0),t.lineTo(s,n+a-l.bottomLeft),t.arc(s+l.bottomLeft,n+a-l.bottomLeft,l.bottomLeft,ie,Se,!0),t.lineTo(s+i-l.bottomRight,n+a),t.arc(s+i-l.bottomRight,n+a-l.bottomRight,l.bottomRight,Se,0,!0),t.lineTo(s+i,n+l.topRight),t.arc(s+i-l.topRight,n+l.topRight,l.topRight,0,-Se,!0),t.lineTo(s+l.topLeft,n)}const s2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,n2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function i2(t,e){const s=(""+t).match(s2);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const r2=t=>+t||0;function Vd(t,e){const s={},n=te(e),i=n?Object.keys(e):e,a=te(t)?n?l=>G(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of i)s[l]=r2(a(l));return s}function _x(t){return Vd(t,{top:"y",right:"x",bottom:"y",left:"x"})}function en(t){return Vd(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Xe(t){const e=_x(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function De(t,e){t=t||{},e=e||be.font;let s=G(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=G(t.style,e.style);n&&!(""+n).match(n2)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:G(t.family,e.family),lineHeight:i2(G(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:G(t.weight,e.weight),string:""};return i.string=K1(i),i}function ki(t,e,s,n){let i,a,l;for(i=0,a=t.length;i<a;++i)if(l=t[i],l!==void 0&&l!==void 0)return l}function a2(t,e,s){const{min:n,max:i}=t,a=mx(e,(i-n)/2),l=(o,c)=>s&&o===0?0:o+c;return{min:l(n,-Math.abs(a)),max:l(i,a)}}function zs(t,e){return Object.assign(Object.create(t),e)}function Ud(t,e=[""],s,n,i=()=>t[0]){const a=s||t;typeof n>"u"&&(n=Px("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:n,_getTarget:i,override:o=>Ud([o,...t],e,a,n)};return new Proxy(l,{deleteProperty(o,c){return delete o[c],delete o._keys,delete t[0][c],!0},get(o,c){return Cx(o,c,()=>f2(c,e,t,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,c){return Th(o).includes(c)},ownKeys(o){return Th(o)},set(o,c,d){const u=o._storage||(o._storage=i());return o[c]=u[c]=d,delete o._keys,!0}})}function Gn(t,e,s,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Sx(t,n),setContext:a=>Gn(t,a,s,n),override:a=>Gn(t.override(a),e,s,n)};return new Proxy(i,{deleteProperty(a,l){return delete a[l],delete t[l],!0},get(a,l,o){return Cx(a,l,()=>o2(a,l,o))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(a,l,o){return t[l]=o,delete a[l],!0}})}function Sx(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:s,indexable:n,isScriptable:As(s)?s:()=>s,isIndexable:As(n)?n:()=>n}}const l2=(t,e)=>t?t+Fd(e):e,Yd=(t,e)=>te(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Cx(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function o2(t,e,s){const{_proxy:n,_context:i,_subProxy:a,_descriptors:l}=t;let o=n[e];return As(o)&&l.isScriptable(e)&&(o=c2(e,o,t,s)),ge(o)&&o.length&&(o=d2(e,o,t,l.isIndexable)),Yd(e,o)&&(o=Gn(o,i,a&&a[e],l)),o}function c2(t,e,s,n){const{_proxy:i,_context:a,_subProxy:l,_stack:o}=s;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let c=e(a,l||n);return o.delete(t),Yd(t,c)&&(c=qd(i._scopes,i,t,c)),c}function d2(t,e,s,n){const{_proxy:i,_context:a,_subProxy:l,_descriptors:o}=s;if(typeof a.index<"u"&&n(t))return e[a.index%e.length];if(te(e[0])){const c=e,d=i._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=qd(d,i,t,u);e.push(Gn(h,a,l&&l[t],o))}}return e}function Mx(t,e,s){return As(t)?t(e,s):t}const u2=(t,e)=>t===!0?e:typeof t=="string"?Is(e,t):void 0;function h2(t,e,s,n,i){for(const a of e){const l=u2(s,a);if(l){t.add(l);const o=Mx(l._fallback,s,i);if(typeof o<"u"&&o!==s&&o!==n)return o}else if(l===!1&&typeof n<"u"&&s!==n)return null}return!1}function qd(t,e,s,n){const i=e._rootScopes,a=Mx(e._fallback,s,n),l=[...t,...i],o=new Set;o.add(n);let c=Ph(o,l,s,a||s,n);return c===null||typeof a<"u"&&a!==s&&(c=Ph(o,l,a,c,n),c===null)?!1:Ud(Array.from(o),[""],i,a,()=>m2(e,s,n))}function Ph(t,e,s,n,i){for(;s;)s=h2(t,e,s,n,i);return s}function m2(t,e,s){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return ge(i)&&te(s)?s:i||{}}function f2(t,e,s,n){let i;for(const a of e)if(i=Px(l2(a,t),s),typeof i<"u")return Yd(t,i)?qd(s,n,t,i):i}function Px(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function Th(t){let e=t._keys;return e||(e=t._keys=p2(t._scopes)),e}function p2(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function Tx(t,e,s,n){const{iScale:i}=t,{key:a="r"}=this._parsing,l=new Array(n);let o,c,d,u;for(o=0,c=n;o<c;++o)d=o+s,u=e[d],l[o]={r:i.parse(Is(u,a),d)};return l}const x2=Number.EPSILON||1e-14,Zn=(t,e)=>e<t.length&&!t[e].skip&&t[e],Dx=t=>t==="x"?"y":"x";function g2(t,e,s,n){const i=t.skip?e:t,a=e,l=s.skip?e:s,o=Nc(a,i),c=Nc(l,a);let d=o/(o+c),u=c/(o+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=n*d,m=n*u;return{previous:{x:a.x-h*(l.x-i.x),y:a.y-h*(l.y-i.y)},next:{x:a.x+m*(l.x-i.x),y:a.y+m*(l.y-i.y)}}}function b2(t,e,s){const n=t.length;let i,a,l,o,c,d=Zn(t,0);for(let u=0;u<n-1;++u)if(c=d,d=Zn(t,u+1),!(!c||!d)){if(Fi(e[u],0,x2)){s[u]=s[u+1]=0;continue}i=s[u]/e[u],a=s[u+1]/e[u],o=Math.pow(i,2)+Math.pow(a,2),!(o<=9)&&(l=3/Math.sqrt(o),s[u]=i*l*e[u],s[u+1]=a*l*e[u])}}function v2(t,e,s="x"){const n=Dx(s),i=t.length;let a,l,o,c=Zn(t,0);for(let d=0;d<i;++d){if(l=o,o=c,c=Zn(t,d+1),!o)continue;const u=o[s],h=o[n];l&&(a=(u-l[s])/3,o[`cp1${s}`]=u-a,o[`cp1${n}`]=h-a*e[d]),c&&(a=(c[s]-u)/3,o[`cp2${s}`]=u+a,o[`cp2${n}`]=h+a*e[d])}}function y2(t,e="x"){const s=Dx(e),n=t.length,i=Array(n).fill(0),a=Array(n);let l,o,c,d=Zn(t,0);for(l=0;l<n;++l)if(o=c,c=d,d=Zn(t,l+1),!!c){if(d){const u=d[e]-c[e];i[l]=u!==0?(d[s]-c[s])/u:0}a[l]=o?d?Vt(i[l-1])!==Vt(i[l])?0:(i[l-1]+i[l])/2:i[l-1]:i[l]}b2(t,i,a),v2(t,a,e)}function Gr(t,e,s){return Math.max(Math.min(t,s),e)}function j2(t,e){let s,n,i,a,l,o=ss(t[0],e);for(s=0,n=t.length;s<n;++s)l=a,a=o,o=s<n-1&&ss(t[s+1],e),a&&(i=t[s],l&&(i.cp1x=Gr(i.cp1x,e.left,e.right),i.cp1y=Gr(i.cp1y,e.top,e.bottom)),o&&(i.cp2x=Gr(i.cp2x,e.left,e.right),i.cp2y=Gr(i.cp2y,e.top,e.bottom)))}function w2(t,e,s,n,i){let a,l,o,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")y2(t,i);else{let d=n?t[t.length-1]:t[0];for(a=0,l=t.length;a<l;++a)o=t[a],c=g2(d,o,t[Math.min(a+1,l-(n?0:1))%l],e.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,d=o}e.capBezierPoints&&j2(t,s)}function Xd(){return typeof window<"u"&&typeof document<"u"}function Kd(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function al(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Tl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function N2(t,e){return Tl(t).getPropertyValue(e)}const k2=["top","right","bottom","left"];function tn(t,e,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const a=k2[i];n[a]=parseFloat(t[e+"-"+a+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const _2=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function S2(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:i,offsetY:a}=n;let l=!1,o,c;if(_2(i,a,t.target))o=i,c=a;else{const d=e.getBoundingClientRect();o=n.clientX-d.left,c=n.clientY-d.top,l=!0}return{x:o,y:c,box:l}}function Ys(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,i=Tl(s),a=i.boxSizing==="border-box",l=tn(i,"padding"),o=tn(i,"border","width"),{x:c,y:d,box:u}=S2(t,s),h=l.left+(u&&o.left),m=l.top+(u&&o.top);let{width:p,height:f}=e;return a&&(p-=l.width+o.width,f-=l.height+o.height),{x:Math.round((c-h)/p*s.width/n),y:Math.round((d-m)/f*s.height/n)}}function C2(t,e,s){let n,i;if(e===void 0||s===void 0){const a=t&&Kd(t);if(!a)e=t.clientWidth,s=t.clientHeight;else{const l=a.getBoundingClientRect(),o=Tl(a),c=tn(o,"border","width"),d=tn(o,"padding");e=l.width-d.width-c.width,s=l.height-d.height-c.height,n=al(o.maxWidth,a,"clientWidth"),i=al(o.maxHeight,a,"clientHeight")}}return{width:e,height:s,maxWidth:n||il,maxHeight:i||il}}const vs=t=>Math.round(t*10)/10;function M2(t,e,s,n){const i=Tl(t),a=tn(i,"margin"),l=al(i.maxWidth,t,"clientWidth")||il,o=al(i.maxHeight,t,"clientHeight")||il,c=C2(t,e,s);let{width:d,height:u}=c;if(i.boxSizing==="content-box"){const m=tn(i,"border","width"),p=tn(i,"padding");d-=p.width+m.width,u-=p.height+m.height}return d=Math.max(0,d-a.width),u=Math.max(0,n?d/n:u-a.height),d=vs(Math.min(d,l,c.maxWidth)),u=vs(Math.min(u,o,c.maxHeight)),d&&!u&&(u=vs(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=vs(Math.floor(u*n))),{width:d,height:u}}function Dh(t,e,s){const n=e||1,i=vs(t.height*n),a=vs(t.width*n);t.height=vs(t.height),t.width=vs(t.width);const l=t.canvas;return l.style&&(s||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||l.height!==i||l.width!==a?(t.currentDevicePixelRatio=n,l.height=i,l.width=a,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const P2=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Xd()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Lh(t,e){const s=N2(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function qs(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function T2(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function D2(t,e,s,n){const i={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},l=qs(t,i,s),o=qs(i,a,s),c=qs(a,e,s),d=qs(l,o,s),u=qs(o,c,s);return qs(d,u,s)}const L2=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},I2=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Bn(t,e,s){return t?L2(e,s):I2()}function Lx(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Ix(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ax(t){return t==="angle"?{between:dr,compare:A1,normalize:Ve}:{between:es,compare:(e,s)=>e-s,normalize:e=>e}}function Ih({start:t,end:e,count:s,loop:n,style:i}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:i}}function A2(t,e,s){const{property:n,start:i,end:a}=s,{between:l,normalize:o}=Ax(n),c=e.length;let{start:d,end:u,loop:h}=t,m,p;if(h){for(d+=c,u+=c,m=0,p=c;m<p&&l(o(e[d%c][n]),i,a);++m)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function Ox(t,e,s){if(!s)return[t];const{property:n,start:i,end:a}=s,l=e.length,{compare:o,between:c,normalize:d}=Ax(n),{start:u,end:h,loop:m,style:p}=A2(t,e,s),f=[];let x=!1,y=null,b,g,j;const w=()=>c(i,j,b)&&o(i,j)!==0,v=()=>o(a,b)===0||c(a,j,b),N=()=>x||w(),k=()=>!x||v();for(let _=u,T=u;_<=h;++_)g=e[_%l],!g.skip&&(b=d(g[n]),b!==j&&(x=c(b,i,a),y===null&&N()&&(y=o(b,i)===0?_:T),y!==null&&k()&&(f.push(Ih({start:y,end:_,loop:m,count:l,style:p})),y=null),T=_,j=b));return y!==null&&f.push(Ih({start:y,end:h,loop:m,count:l,style:p})),f}function Ex(t,e){const s=[],n=t.segments;for(let i=0;i<n.length;i++){const a=Ox(n[i],t.points,e);a.length&&s.push(...a)}return s}function O2(t,e,s,n){let i=0,a=e-1;if(s&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,s&&(a+=i);a>i&&t[a%e].skip;)a--;return a%=e,{start:i,end:a}}function E2(t,e,s,n){const i=t.length,a=[];let l=e,o=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%i];d.skip||d.stop?o.skip||(n=!1,a.push({start:e%i,end:(c-1)%i,loop:n}),e=l=d.stop?c:null):(l=c,o.skip&&(e=c)),o=d}return l!==null&&a.push({start:e%i,end:l%i,loop:n}),a}function R2(t,e){const s=t.points,n=t.options.spanGaps,i=s.length;if(!i)return[];const a=!!t._loop,{start:l,end:o}=O2(s,i,a,n);if(n===!0)return Ah(t,[{start:l,end:o,loop:a}],s,e);const c=o<l?o+i:o,d=!!t._fullLoop&&l===0&&o===i-1;return Ah(t,E2(s,l,c,d),s,e)}function Ah(t,e,s,n){return!n||!n.setContext||!s?e:z2(t,e,s,n)}function z2(t,e,s,n){const i=t._chart.getContext(),a=Oh(t.options),{_datasetIndex:l,options:{spanGaps:o}}=t,c=s.length,d=[];let u=a,h=e[0].start,m=h;function p(f,x,y,b){const g=o?-1:1;if(f!==x){for(f+=c;s[f%c].skip;)f-=g;for(;s[x%c].skip;)x+=g;f%c!==x%c&&(d.push({start:f%c,end:x%c,loop:y,style:b}),u=b,h=x%c)}}for(const f of e){h=o?h:f.start;let x=s[h%c],y;for(m=h+1;m<=f.end;m++){const b=s[m%c];y=Oh(n.setContext(zs(i,{type:"segment",p0:x,p1:b,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:l}))),F2(y,u)&&p(h,m-1,f.loop,u),x=b,u=y}h<m-1&&p(h,m-1,f.loop,u)}return d}function Oh(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function F2(t,e){if(!e)return!1;const s=[],n=function(i,a){return Hd(a)?(s.includes(a)||s.push(a),s.indexOf(a)):a};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Zr(t,e,s){return t.options.clip?t[s]:e[s]}function B2(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Zr(s,e,"left"),right:Zr(s,e,"right"),top:Zr(n,e,"top"),bottom:Zr(n,e,"bottom")}:e}function Rx(t,e){const s=e._clip;if(s.disabled)return!1;const n=B2(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class W2{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,i){const a=s.listeners[i],l=s.duration;a.forEach(o=>o({chart:e,initial:s.initial,numSteps:l,currentStep:Math.min(n-s.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=vx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const a=n.items;let l=a.length-1,o=!1,c;for(;l>=0;--l)c=a[l],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),o=!0):(a[l]=a[a.length-1],a.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),a.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),s+=a.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Yt=new W2;const Eh="transparent",$2={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Sh(t||Eh),i=n.valid&&Sh(e||Eh);return i&&i.valid?i.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class H2{constructor(e,s,n,i){const a=s[n];i=ki([e.to,i,a,e.from]);const l=ki([e.from,a,i]);this._active=!0,this._fn=e.fn||$2[e.type||typeof l],this._easing=Bi[e.easing]||Bi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=l,this._to=i,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],a=n-this._start,l=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=ki([e.to,s,i,e.from]),this._from=ki([e.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,i=this._prop,a=this._from,l=this._loop,o=this._to;let c;if(this._active=a!==o&&(l||s<n),!this._active){this._target[i]=o,this._notify(!0);return}if(s<0){this._target[i]=a;return}c=s/n%2,c=l&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(a,o,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class zx{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!te(e))return;const s=Object.keys(be.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!te(a))return;const l={};for(const o of s)l[o]=a[o];(ge(a.properties)&&a.properties||[i]).forEach(o=>{(o===i||!n.has(o))&&n.set(o,l)})})}_animateOptions(e,s){const n=s.options,i=U2(e,n);if(!i)return[];const a=this._createAnimations(i,n);return n.$shared&&V2(e.options.$animations,n).then(()=>{e.options=n},()=>{}),a}_createAnimations(e,s){const n=this._properties,i=[],a=e.$animations||(e.$animations={}),l=Object.keys(s),o=Date.now();let c;for(c=l.length-1;c>=0;--c){const d=l[c];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,s));continue}const u=s[d];let h=a[d];const m=n.get(d);if(h)if(m&&h.active()){h.update(m,u,o);continue}else h.cancel();if(!m||!m.duration){e[d]=u;continue}a[d]=h=new H2(m,e,d,u),i.push(h)}return i}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return Yt.add(this._chart,n),!0}}function V2(t,e){const s=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const a=t[n[i]];a&&a.active()&&s.push(a.wait())}return Promise.all(s)}function U2(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Rh(t,e){const s=t&&t.options||{},n=s.reverse,i=s.min===void 0?e:0,a=s.max===void 0?e:0;return{start:n?a:i,end:n?i:a}}function Y2(t,e,s){if(s===!1)return!1;const n=Rh(t,s),i=Rh(e,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function q2(t){let e,s,n,i;return te(t)?(e=t.top,s=t.right,n=t.bottom,i=t.left):e=s=n=i=t,{top:e,right:s,bottom:n,left:i,disabled:t===!1}}function Fx(t,e){const s=[],n=t._getSortedDatasetMetas(e);let i,a;for(i=0,a=n.length;i<a;++i)s.push(n[i].index);return s}function zh(t,e,s,n={}){const i=t.keys,a=n.mode==="single";let l,o,c,d;if(e===null)return;let u=!1;for(l=0,o=i.length;l<o;++l){if(c=+i[l],c===s){if(u=!0,n.all)continue;break}d=t.values[c],Ne(d)&&(a||e===0||Vt(e)===Vt(d))&&(e+=d)}return!u&&!n.all?0:e}function X2(t,e){const{iScale:s,vScale:n}=e,i=s.axis==="x"?"x":"y",a=n.axis==="x"?"x":"y",l=Object.keys(t),o=new Array(l.length);let c,d,u;for(c=0,d=l.length;c<d;++c)u=l[c],o[c]={[i]:u,[a]:t[u]};return o}function ho(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function K2(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function Q2(t){const{min:e,max:s,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function G2(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function Fh(t,e,s,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const a=t[i.index];if(s&&a>0||!s&&a<0)return i.index}return null}function Bh(t,e){const{chart:s,_cachedMeta:n}=t,i=s._stacks||(s._stacks={}),{iScale:a,vScale:l,index:o}=n,c=a.axis,d=l.axis,u=K2(a,l,n),h=e.length;let m;for(let p=0;p<h;++p){const f=e[p],{[c]:x,[d]:y}=f,b=f._stacks||(f._stacks={});m=b[d]=G2(i,u,x),m[o]=y,m._top=Fh(m,l,!0,n.type),m._bottom=Fh(m,l,!1,n.type);const g=m._visualValues||(m._visualValues={});g[o]=y}}function mo(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function Z2(t,e){return zs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function J2(t,e,s){return zs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function fi(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const a=i._stacks;if(!a||a[n]===void 0||a[n][s]===void 0)return;delete a[n][s],a[n]._visualValues!==void 0&&a[n]._visualValues[s]!==void 0&&delete a[n]._visualValues[s]}}}const fo=t=>t==="reset"||t==="none",Wh=(t,e)=>e?t:Object.assign({},t),ej=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Fx(s,!0),values:null};class At{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ho(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&fi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(h,m,p,f)=>h==="x"?m:h==="r"?f:p,a=s.xAxisID=G(n.xAxisID,mo(e,"x")),l=s.yAxisID=G(n.yAxisID,mo(e,"y")),o=s.rAxisID=G(n.rAxisID,mo(e,"r")),c=s.indexAxis,d=s.iAxisID=i(c,a,l,o),u=s.vAxisID=i(c,l,a,o);s.xScale=this.getScaleForId(a),s.yScale=this.getScaleForId(l),s.rScale=this.getScaleForId(o),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Nh(this._data,this),e._stacked&&fi(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(te(s)){const i=this._cachedMeta;this._data=X2(s,i)}else if(n!==s){if(n){Nh(n,this);const i=this._cachedMeta;fi(i),i._parsed=[]}s&&Object.isExtensible(s)&&z1(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const a=s._stacked;s._stacked=ho(s.vScale,s),s.stack!==n.stack&&(i=!0,fi(s),s.stack=n.stack),this._resyncElements(e),(i||a!==s._stacked)&&(Bh(this,s._parsed),s._stacked=ho(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:i}=this,{iScale:a,_stacked:l}=n,o=a.axis;let c=e===0&&s===i.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,h,m;if(this._parsing===!1)n._parsed=i,n._sorted=!0,m=i;else{ge(i[e])?m=this.parseArrayData(n,i,e,s):te(i[e])?m=this.parseObjectData(n,i,e,s):m=this.parsePrimitiveData(n,i,e,s);const p=()=>h[o]===null||d&&h[o]<d[o];for(u=0;u<s;++u)n._parsed[u+e]=h=m[u],c&&(p()&&(c=!1),d=h);n._sorted=c}l&&Bh(this,m)}parsePrimitiveData(e,s,n,i){const{iScale:a,vScale:l}=e,o=a.axis,c=l.axis,d=a.getLabels(),u=a===l,h=new Array(i);let m,p,f;for(m=0,p=i;m<p;++m)f=m+n,h[m]={[o]:u||a.parse(d[f],f),[c]:l.parse(s[f],f)};return h}parseArrayData(e,s,n,i){const{xScale:a,yScale:l}=e,o=new Array(i);let c,d,u,h;for(c=0,d=i;c<d;++c)u=c+n,h=s[u],o[c]={x:a.parse(h[0],u),y:l.parse(h[1],u)};return o}parseObjectData(e,s,n,i){const{xScale:a,yScale:l}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=new Array(i);let u,h,m,p;for(u=0,h=i;u<h;++u)m=u+n,p=s[m],d[u]={x:a.parse(Is(p,o),m),y:l.parse(Is(p,c),m)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const i=this.chart,a=this._cachedMeta,l=s[e.axis],o={keys:Fx(i,!0),values:s._stacks[e.axis]._visualValues};return zh(o,l,a.index,{mode:n})}updateRangeFromParsed(e,s,n,i){const a=n[s.axis];let l=a===null?NaN:a;const o=i&&n._stacks[s.axis];i&&o&&(i.values=o,l=zh(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,s){const n=this._cachedMeta,i=n._parsed,a=n._sorted&&e===n.iScale,l=i.length,o=this._getOtherScale(e),c=ej(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Q2(o);let m,p;function f(){p=i[m];const x=p[o.axis];return!Ne(p[e.axis])||u>x||h<x}for(m=0;m<l&&!(!f()&&(this.updateRangeFromParsed(d,e,p,c),a));++m);if(a){for(m=l-1;m>=0;--m)if(!f()){this.updateRangeFromParsed(d,e,p,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let i,a,l;for(i=0,a=s.length;i<a;++i)l=s[i][e.axis],Ne(l)&&n.push(l);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,i=s.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=q2(G(this.options.clip,Y2(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],a=s.chartArea,l=[],o=this._drawStart||0,c=this._drawCount||i.length-o,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,a,o,c),u=o;u<o+c;++u){const h=i[u];h.hidden||(h.active&&d?l.push(h):h.draw(e,a))}for(u=0;u<l.length;++u)l[u].draw(e,a)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];a=l.$context||(l.$context=J2(this.getContext(),e,l)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=Z2(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!s,a.mode=n,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const i=s==="active",a=this._cachedDataOpts,l=e+"-"+s,o=a[l],c=this.enableOptionSharing&&cr(n);if(o)return Wh(o,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],m=d.getOptionScopes(this.getDataset(),u),p=Object.keys(be.elements[e]),f=()=>this.getContext(n,i,s),x=d.resolveNamedOptions(m,p,f,h);return x.$shared&&(x.$shared=c,a[l]=Object.freeze(Wh(x,c))),x}_resolveAnimations(e,s,n){const i=this.chart,a=this._cachedDataOpts,l=`animation-${s}`,o=a[l];if(o)return o;let c;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),m=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(m,this.getContext(e,n,s))}const d=new zx(i,c&&c.animations);return c&&c._cacheable&&(a[l]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||fo(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),i=this._sharedOptions,a=this.getSharedOptions(n),l=this.includeOptions(s,a)||a!==i;return this.updateSharedOptions(a,s,n),{sharedOptions:a,includeOptions:l}}updateElement(e,s,n,i){fo(i)?Object.assign(e,n):this._resolveAnimations(s,i).update(e,n)}updateSharedOptions(e,s,n){e&&!fo(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,i){e.active=i;const a=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[o,c,d]of this._syncList)this[o](c,d);this._syncList=[];const i=n.length,a=s.length,l=Math.min(a,i);l&&this.parse(0,l),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,s,n=!0){const i=this._cachedMeta,a=i.data,l=e+s;let o;const c=d=>{for(d.length+=s,o=d.length-1;o>=l;o--)d[o]=d[o-s]};for(c(a),o=e;o<l;++o)a[o]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,s),n&&this.updateElements(a,e,s,"reset")}updateElements(e,s,n,i){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,s);n._stacked&&fi(n,i)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,i]=e;this[s](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}H(At,"defaults",{}),H(At,"datasetElementType",null),H(At,"dataElementType",null);function tj(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,a=s.length;i<a;i++)n=n.concat(s[i].controller.getAllParsedValues(t));t._cache.$bar=bx(n.sort((i,a)=>i-a))}return t._cache.$bar}function sj(t){const e=t.iScale,s=tj(e,t.type);let n=e._length,i,a,l,o;const c=()=>{l===32767||l===-32768||(cr(o)&&(n=Math.min(n,Math.abs(l-o)||n)),o=l)};for(i=0,a=s.length;i<a;++i)l=e.getPixelForValue(s[i]),c();for(o=void 0,i=0,a=e.ticks.length;i<a;++i)l=e.getPixelForTick(i),c();return n}function nj(t,e,s,n){const i=s.barThickness;let a,l;return J(i)?(a=e.min*s.categoryPercentage,l=s.barPercentage):(a=i*n,l=1),{chunk:a/n,ratio:l,start:e.pixels[t]-a/2}}function ij(t,e,s,n){const i=e.pixels,a=i[t];let l=t>0?i[t-1]:null,o=t<i.length-1?i[t+1]:null;const c=s.categoryPercentage;l===null&&(l=a-(o===null?e.end-e.start:o-a)),o===null&&(o=a+a-l);const d=a-(a-Math.min(l,o))/2*c;return{chunk:Math.abs(o-l)/2*c/n,ratio:s.barPercentage,start:d}}function rj(t,e,s,n){const i=s.parse(t[0],n),a=s.parse(t[1],n),l=Math.min(i,a),o=Math.max(i,a);let c=l,d=o;Math.abs(l)>Math.abs(o)&&(c=o,d=l),e[s.axis]=d,e._custom={barStart:c,barEnd:d,start:i,end:a,min:l,max:o}}function Bx(t,e,s,n){return ge(t)?rj(t,e,s,n):e[s.axis]=s.parse(t,n),e}function $h(t,e,s,n){const i=t.iScale,a=t.vScale,l=i.getLabels(),o=i===a,c=[];let d,u,h,m;for(d=s,u=s+n;d<u;++d)m=e[d],h={},h[i.axis]=o||i.parse(l[d],d),c.push(Bx(m,h,a,d));return c}function po(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function aj(t,e,s){return t!==0?Vt(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function lj(t){let e,s,n,i,a;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(i="end",a="start"):(i="start",a="end"),{start:s,end:n,reverse:e,top:i,bottom:a}}function oj(t,e,s,n){let i=e.borderSkipped;const a={};if(!i){t.borderSkipped=a;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:o,reverse:c,top:d,bottom:u}=lj(t);i==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?i=d:(s._bottom||0)===n?i=u:(a[Hh(u,l,o,c)]=!0,i=d)),a[Hh(i,l,o,c)]=!0,t.borderSkipped=a}function Hh(t,e,s,n){return n?(t=cj(t,e,s),t=Vh(t,s,e)):t=Vh(t,e,s),t}function cj(t,e,s){return t===e?s:t===s?e:t}function Vh(t,e,s){return t==="start"?e:t==="end"?s:t}function dj(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class ya extends At{parsePrimitiveData(e,s,n,i){return $h(e,s,n,i)}parseArrayData(e,s,n,i){return $h(e,s,n,i)}parseObjectData(e,s,n,i){const{iScale:a,vScale:l}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=a.axis==="x"?o:c,u=l.axis==="x"?o:c,h=[];let m,p,f,x;for(m=n,p=n+i;m<p;++m)x=s[m],f={},f[a.axis]=a.parse(Is(x,d),m),h.push(Bx(Is(x,u),f,l,m));return h}updateRangeFromParsed(e,s,n,i){super.updateRangeFromParsed(e,s,n,i);const a=n._custom;a&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:i}=s,a=this.getParsed(e),l=a._custom,o=po(l)?"["+l.start+", "+l.end+"]":""+i.getLabelForValue(a[i.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,i){const a=i==="reset",{index:l,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),d=o.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:m}=this._getSharedOptions(s,i);for(let p=s;p<s+n;p++){const f=this.getParsed(p),x=a||J(f[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,u),b=(f._stacks||{})[o.axis],g={horizontal:d,base:x.base,enableBorderRadius:!b||po(f._custom)||l===b._top||l===b._bottom,x:d?x.head:y.center,y:d?y.center:x.head,height:d?y.size:Math.abs(x.size),width:d?Math.abs(x.size):y.size};m&&(g.options=h||this.resolveDataElementOptions(p,e[p].active?"active":i));const j=g.options||e[p].options;oj(g,j,b,l),dj(g,j,u.ratio),this.updateElement(e[p],p,g,i)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),a=n.options.stacked,l=[],o=this._cachedMeta.controller.getParsed(s),c=o&&o[n.axis],d=u=>{const h=u._parsed.find(p=>p[n.axis]===c),m=h&&h[u.vScale.axis];if(J(m)||isNaN(m))return!0};for(const u of i)if(!(s!==void 0&&d(u))&&((a===!1||l.indexOf(u.stack)===-1||a===void 0&&u.stack===void 0)&&l.push(u.stack),u.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[G(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const i=this._getStacks(e,n),a=s!==void 0?i.indexOf(s):-1;return a===-1?i.length-1:a}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,i=[];let a,l;for(a=0,l=s.data.length;a<l;++a)i.push(n.getPixelForValue(this.getParsed(a)[n.axis],a));const o=e.barThickness;return{min:o||sj(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:a,minBarLength:l}}=this,o=a||0,c=this.getParsed(e),d=c._custom,u=po(d);let h=c[s.axis],m=0,p=n?this.applyStack(s,c,n):h,f,x;p!==h&&(m=p-h,p=h),u&&(h=d.barStart,p=d.barEnd-d.barStart,h!==0&&Vt(h)!==Vt(d.barEnd)&&(m=0),m+=h);const y=!J(a)&&!u?a:m;let b=s.getPixelForValue(y);if(this.chart.getDataVisibility(e)?f=s.getPixelForValue(m+p):f=b,x=f-b,Math.abs(x)<l){x=aj(x,s,o)*l,h===o&&(b-=x/2);const g=s.getPixelForDecimal(0),j=s.getPixelForDecimal(1),w=Math.min(g,j),v=Math.max(g,j);b=Math.max(Math.min(b,v),w),f=b+x,n&&!u&&(c._stacks[s.axis]._visualValues[i]=s.getValueForPixel(f)-s.getValueForPixel(b))}if(b===s.getPixelForValue(o)){const g=Vt(x)*s.getLineWidthForValue(o)/2;b+=g,x-=g}return{size:x,base:b,head:f,center:f+x/2}}_calculateBarIndexPixels(e,s){const n=s.scale,i=this.options,a=i.skipNull,l=G(i.maxBarThickness,1/0);let o,c;const d=this._getAxisCount();if(s.grouped){const u=a?this._getStackCount(e):s.stackCount,h=i.barThickness==="flex"?ij(e,s,i,u*d):nj(e,s,i,u*d),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(G(m,this.getFirstScaleIdForIndexAxis())),f=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+p;o=h.start+h.chunk*f+h.chunk/2,c=Math.min(l,h.chunk*h.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(l,s.min*s.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,i=n.length;let a=0;for(;a<i;++a)this.getParsed(a)[s.axis]!==null&&!n[a].hidden&&n[a].draw(this._ctx)}}H(ya,"id","bar"),H(ya,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),H(ya,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ja extends At{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,n,i){const a=super.parsePrimitiveData(e,s,n,i);for(let l=0;l<a.length;l++)a[l]._custom=this.resolveDataElementOptions(l+n).radius;return a}parseArrayData(e,s,n,i){const a=super.parseArrayData(e,s,n,i);for(let l=0;l<a.length;l++){const o=s[n+l];a[l]._custom=G(o[2],this.resolveDataElementOptions(l+n).radius)}return a}parseObjectData(e,s,n,i){const a=super.parseObjectData(e,s,n,i);for(let l=0;l<a.length;l++){const o=s[n+l];a[l]._custom=G(o&&o.r&&+o.r,this.resolveDataElementOptions(l+n).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let s=0;for(let n=e.length-1;n>=0;--n)s=Math.max(s,e[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:a}=s,l=this.getParsed(e),o=i.getLabelForValue(l.x),c=a.getLabelForValue(l.y),d=l._custom;return{label:n[e]||"",value:"("+o+", "+c+(d?", "+d:"")+")"}}update(e){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,n,i){const a=i==="reset",{iScale:l,vScale:o}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(s,i),u=l.axis,h=o.axis;for(let m=s;m<s+n;m++){const p=e[m],f=!a&&this.getParsed(m),x={},y=x[u]=a?l.getPixelForDecimal(.5):l.getPixelForValue(f[u]),b=x[h]=a?o.getBasePixel():o.getPixelForValue(f[h]);x.skip=isNaN(y)||isNaN(b),d&&(x.options=c||this.resolveDataElementOptions(m,p.active?"active":i),a&&(x.options.radius=0)),this.updateElement(p,m,x,i)}}resolveDataElementOptions(e,s){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,s);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const a=i.radius;return s!=="active"&&(i.radius=0),i.radius+=G(n&&n._custom,a),i}}H(ja,"id","bubble"),H(ja,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),H(ja,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function uj(t,e,s){let n=1,i=1,a=0,l=0;if(e<pe){const o=t,c=o+e,d=Math.cos(o),u=Math.sin(o),h=Math.cos(c),m=Math.sin(c),p=(j,w,v)=>dr(j,o,c,!0)?1:Math.max(w,w*s,v,v*s),f=(j,w,v)=>dr(j,o,c,!0)?-1:Math.min(w,w*s,v,v*s),x=p(0,d,h),y=p(Se,u,m),b=f(ie,d,h),g=f(ie+Se,u,m);n=(x-b)/2,i=(y-g)/2,a=-(x+b)/2,l=-(y+g)/2}return{ratioX:n,ratioY:i,offsetX:a,offsetY:l}}class Gs extends At{constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let a=c=>+n[c];if(te(n[e])){const{key:c="value"}=this._parsing;a=d=>+Is(n[d],c)}let l,o;for(l=e,o=e+s;l<o;++l)i._parsed[l]=a(l)}}_getRotation(){return Dt(this.options.rotation-90)}_getCircumference(){return Dt(this.options.circumference)}_getRotationExtents(){let e=pe,s=-pe;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,a=i._getRotation(),l=i._getCircumference();e=Math.min(e,a),s=Math.max(s,a+l)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,a=i.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-l)/2,0),c=Math.min(N1(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:p,offsetX:f,offsetY:x}=uj(h,u,c),y=(n.width-l)/m,b=(n.height-l)/p,g=Math.max(Math.min(y,b)/2,0),j=mx(this.options.radius,g),w=Math.max(j*c,0),v=(j-w)/this._getVisibleDatasetWeightTotal();this.offsetX=f*j,this.offsetY=x*j,i.total=this.calculateTotal(),this.outerRadius=j-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*d,0),this.updateElements(a,0,a.length,e)}_circumference(e,s){const n=this.options,i=this._cachedMeta,a=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*a/pe)}updateElements(e,s,n,i){const a=i==="reset",l=this.chart,o=l.chartArea,d=l.options.animation,u=(o.left+o.right)/2,h=(o.top+o.bottom)/2,m=a&&d.animateScale,p=m?0:this.innerRadius,f=m?0:this.outerRadius,{sharedOptions:x,includeOptions:y}=this._getSharedOptions(s,i);let b=this._getRotation(),g;for(g=0;g<s;++g)b+=this._circumference(g,a);for(g=s;g<s+n;++g){const j=this._circumference(g,a),w=e[g],v={x:u+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+j,circumference:j,outerRadius:f,innerRadius:p};y&&(v.options=x||this.resolveDataElementOptions(g,w.active?"active":i)),b+=j,this.updateElement(w,g,v,i)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,i;for(i=0;i<s.length;i++){const a=e._parsed[i];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(a))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?pe*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],a=jr(s._parsed[e],n.options.locale);return{label:i[e]||"",value:a}}getMaxBorderWidth(e){let s=0;const n=this.chart;let i,a,l,o,c;if(!e){for(i=0,a=n.data.datasets.length;i<a;++i)if(n.isDatasetVisible(i)){l=n.getDatasetMeta(i),e=l.data,o=l.controller;break}}if(!e)return 0;for(i=0,a=e.length;i<a;++i)c=o.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(s=Math.max(s,c.borderWidth||0,c.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,i=e.length;n<i;++n){const a=this.resolveDataElementOptions(n);s=Math.max(s,a.offset||0,a.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(G(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}H(Gs,"id","doughnut"),H(Gs,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),H(Gs,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),H(Gs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data,{labels:{pointStyle:n,textAlign:i,color:a,useBorderRadius:l,borderRadius:o}}=e.legend.options;return s.labels.length&&s.datasets.length?s.labels.map((c,d)=>{const h=e.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:h.backgroundColor,fontColor:a,hidden:!e.getDataVisibility(d),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:i,pointStyle:n,borderRadius:l&&(o||h.borderRadius),index:d}}):[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}});class wa extends At{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:a}=s,l=this.chart._animationsDisabled;let{start:o,count:c}=jx(s,i,l);this._drawStart=o,this._drawCount=c,wx(s)&&(o=0,c=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!l,options:d},e),this.updateElements(i,o,c,e)}updateElements(e,s,n,i){const a=i==="reset",{iScale:l,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(s,i),m=l.axis,p=o.axis,{spanGaps:f,segment:x}=this.options,y=Qn(f)?f:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||a||i==="none",g=s+n,j=e.length;let w=s>0&&this.getParsed(s-1);for(let v=0;v<j;++v){const N=e[v],k=b?N:{};if(v<s||v>=g){k.skip=!0;continue}const _=this.getParsed(v),T=J(_[p]),C=k[m]=l.getPixelForValue(_[m],v),L=k[p]=a||T?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,_,c):_[p],v);k.skip=isNaN(C)||isNaN(L)||T,k.stop=v>0&&Math.abs(_[m]-w[m])>y,x&&(k.parsed=_,k.raw=d.data[v]),h&&(k.options=u||this.resolveDataElementOptions(v,N.active?"active":i)),b||this.updateElement(N,v,k,i),w=_}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const a=i[0].size(this.resolveDataElementOptions(0)),l=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,a,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}H(wa,"id","line"),H(wa,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),H(wa,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class $i extends At{constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],a=jr(s._parsed[e].r,n.options.locale);return{label:i[e]||"",value:a}}parseObjectData(e,s,n,i){return Tx.bind(this)(e,s,n,i)}update(e){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){const e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{const a=this.getParsed(i).r;!isNaN(a)&&this.chart.getDataVisibility(i)&&(a<s.min&&(s.min=a),a>s.max&&(s.max=a))}),s}_updateRadius(){const e=this.chart,s=e.chartArea,n=e.options,i=Math.min(s.right-s.left,s.bottom-s.top),a=Math.max(i/2,0),l=Math.max(n.cutoutPercentage?a/100*n.cutoutPercentage:1,0),o=(a-l)/e.getVisibleDatasetCount();this.outerRadius=a-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,s,n,i){const a=i==="reset",l=this.chart,c=l.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,h=d.yCenter,m=d.getIndexAngle(0)-.5*ie;let p=m,f;const x=360/this.countVisibleElements();for(f=0;f<s;++f)p+=this._computeAngle(f,i,x);for(f=s;f<s+n;f++){const y=e[f];let b=p,g=p+this._computeAngle(f,i,x),j=l.getDataVisibility(f)?d.getDistanceFromCenterForValue(this.getParsed(f).r):0;p=g,a&&(c.animateScale&&(j=0),c.animateRotate&&(b=g=m));const w={x:u,y:h,innerRadius:0,outerRadius:j,startAngle:b,endAngle:g,options:this.resolveDataElementOptions(f,y.active?"active":i)};this.updateElement(y,f,w,i)}}countVisibleElements(){const e=this._cachedMeta;let s=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&s++}),s}_computeAngle(e,s,n){return this.chart.getDataVisibility(e)?Dt(this.resolveDataElementOptions(e,s).angle||n):0}}H($i,"id","polarArea"),H($i,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),H($i,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((a,l)=>{const c=e.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Sc extends Gs{}H(Sc,"id","pie"),H(Sc,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Na extends At{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,i){return Tx.bind(this)(e,s,n,i)}update(e){const s=this._cachedMeta,n=s.dataset,i=s.data||[],a=s.iScale.getLabels();if(n.points=i,e!=="resize"){const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0);const o={_loop:!0,_fullLoop:a.length===i.length,options:l};this.updateElement(n,void 0,o,e)}this.updateElements(i,0,i.length,e)}updateElements(e,s,n,i){const a=this._cachedMeta.rScale,l=i==="reset";for(let o=s;o<s+n;o++){const c=e[o],d=this.resolveDataElementOptions(o,c.active?"active":i),u=a.getPointPositionForValue(o,this.getParsed(o).r),h=l?a.xCenter:u.x,m=l?a.yCenter:u.y,p={x:h,y:m,angle:u.angle,skip:isNaN(h)||isNaN(m),options:d};this.updateElement(c,o,p,i)}}}H(Na,"id","radar"),H(Na,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),H(Na,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class ka extends At{getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:a}=s,l=this.getParsed(e),o=i.getLabelForValue(l.x),c=a.getLabelForValue(l.y);return{label:n[e]||"",value:"("+o+", "+c+")"}}update(e){const s=this._cachedMeta,{data:n=[]}=s,i=this.chart._animationsDisabled;let{start:a,count:l}=jx(s,n,i);if(this._drawStart=a,this._drawCount=l,wx(s)&&(a=0,l=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:c}=s;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!c._decimated,o.points=n;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:d},e)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,a,l,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,n,i){const a=i==="reset",{iScale:l,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(s,i),h=this.getSharedOptions(u),m=this.includeOptions(i,h),p=l.axis,f=o.axis,{spanGaps:x,segment:y}=this.options,b=Qn(x)?x:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||a||i==="none";let j=s>0&&this.getParsed(s-1);for(let w=s;w<s+n;++w){const v=e[w],N=this.getParsed(w),k=g?v:{},_=J(N[f]),T=k[p]=l.getPixelForValue(N[p],w),C=k[f]=a||_?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,N,c):N[f],w);k.skip=isNaN(T)||isNaN(C)||_,k.stop=w>0&&Math.abs(N[p]-j[p])>b,y&&(k.parsed=N,k.raw=d.data[w]),m&&(k.options=h||this.resolveDataElementOptions(w,v.active?"active":i)),g||this.updateElement(v,w,k,i),j=N}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let o=0;for(let c=s.length-1;c>=0;--c)o=Math.max(o,s[c].size(this.resolveDataElementOptions(c))/2);return o>0&&o}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!s.length)return i;const a=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,a,l)/2}}H(ka,"id","scatter"),H(ka,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),H(ka,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var hj=Object.freeze({__proto__:null,BarController:ya,BubbleController:ja,DoughnutController:Gs,LineController:wa,PieController:Sc,PolarAreaController:$i,RadarController:Na,ScatterController:ka});function $s(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Qd{constructor(e){H(this,"options");this.options=e||{}}static override(e){Object.assign(Qd.prototype,e)}init(){}formats(){return $s()}parse(){return $s()}format(){return $s()}add(){return $s()}diff(){return $s()}startOf(){return $s()}endOf(){return $s()}}var mj={_date:Qd};function fj(t,e,s,n){const{controller:i,data:a,_sorted:l}=t,o=i._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&l&&a.length){const d=o._reversePixels?E1:ts;if(n){if(i._sharedOptions){const u=a[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const m=d(a,e,s-h),p=d(a,e,s+h);return{lo:m.lo,hi:p.hi}}}}else{const u=d(a,e,s);if(c){const{vScale:h}=i._cachedMeta,{_parsed:m}=t,p=m.slice(0,u.lo+1).reverse().findIndex(x=>!J(x[h.axis]));u.lo-=Math.max(0,p);const f=m.slice(u.hi).findIndex(x=>!J(x[h.axis]));u.hi+=Math.max(0,f)}return u}}return{lo:0,hi:a.length-1}}function Dl(t,e,s,n,i){const a=t.getSortedVisibleDatasetMetas(),l=s[e];for(let o=0,c=a.length;o<c;++o){const{index:d,data:u}=a[o],{lo:h,hi:m}=fj(a[o],e,l,i);for(let p=h;p<=m;++p){const f=u[p];f.skip||n(f,d,p)}}}function pj(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,i){const a=e?Math.abs(n.x-i.x):0,l=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function xo(t,e,s,n,i){const a=[];return!i&&!t.isPointInArea(e)||Dl(t,s,e,function(o,c,d){!i&&!ss(o,t.chartArea,0)||o.inRange(e.x,e.y,n)&&a.push({element:o,datasetIndex:c,index:d})},!0),a}function xj(t,e,s,n){let i=[];function a(l,o,c){const{startAngle:d,endAngle:u}=l.getProps(["startAngle","endAngle"],n),{angle:h}=xx(l,{x:e.x,y:e.y});dr(h,d,u)&&i.push({element:l,datasetIndex:o,index:c})}return Dl(t,s,e,a),i}function gj(t,e,s,n,i,a){let l=[];const o=pj(s);let c=Number.POSITIVE_INFINITY;function d(u,h,m){const p=u.inRange(e.x,e.y,i);if(n&&!p)return;const f=u.getCenterPoint(i);if(!(!!a||t.isPointInArea(f))&&!p)return;const y=o(e,f);y<c?(l=[{element:u,datasetIndex:h,index:m}],c=y):y===c&&l.push({element:u,datasetIndex:h,index:m})}return Dl(t,s,e,d),l}function go(t,e,s,n,i,a){return!a&&!t.isPointInArea(e)?[]:s==="r"&&!n?xj(t,e,s,i):gj(t,e,s,n,i,a)}function Uh(t,e,s,n,i){const a=[],l=s==="x"?"inXRange":"inYRange";let o=!1;return Dl(t,s,e,(c,d,u)=>{c[l]&&c[l](e[s],i)&&(a.push({element:c,datasetIndex:d,index:u}),o=o||c.inRange(e.x,e.y,i))}),n&&!o?[]:a}var bj={modes:{index(t,e,s,n){const i=Ys(e,t),a=s.axis||"x",l=s.includeInvisible||!1,o=s.intersect?xo(t,i,a,n,l):go(t,i,a,!1,n,l),c=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=o[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,s,n){const i=Ys(e,t),a=s.axis||"xy",l=s.includeInvisible||!1;let o=s.intersect?xo(t,i,a,n,l):go(t,i,a,!1,n,l);if(o.length>0){const c=o[0].datasetIndex,d=t.getDatasetMeta(c).data;o=[];for(let u=0;u<d.length;++u)o.push({element:d[u],datasetIndex:c,index:u})}return o},point(t,e,s,n){const i=Ys(e,t),a=s.axis||"xy",l=s.includeInvisible||!1;return xo(t,i,a,n,l)},nearest(t,e,s,n){const i=Ys(e,t),a=s.axis||"xy",l=s.includeInvisible||!1;return go(t,i,a,s.intersect,n,l)},x(t,e,s,n){const i=Ys(e,t);return Uh(t,i,"x",s.intersect,n)},y(t,e,s,n){const i=Ys(e,t);return Uh(t,i,"y",s.intersect,n)}}};const Wx=["left","top","right","bottom"];function pi(t,e){return t.filter(s=>s.pos===e)}function Yh(t,e){return t.filter(s=>Wx.indexOf(s.pos)===-1&&s.box.axis===e)}function xi(t,e){return t.sort((s,n)=>{const i=e?n:s,a=e?s:n;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function vj(t){const e=[];let s,n,i,a,l,o;for(s=0,n=(t||[]).length;s<n;++s)i=t[s],{position:a,options:{stack:l,stackWeight:o=1}}=i,e.push({index:s,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:l&&a+l,stackWeight:o});return e}function yj(t){const e={};for(const s of t){const{stack:n,pos:i,stackWeight:a}=s;if(!n||!Wx.includes(i))continue;const l=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return e}function jj(t,e){const s=yj(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let a,l,o;for(a=0,l=t.length;a<l;++a){o=t[a];const{fullSize:c}=o.box,d=s[o.stack],u=d&&o.stackWeight/d.weight;o.horizontal?(o.width=u?u*n:c&&e.availableWidth,o.height=i):(o.width=n,o.height=u?u*i:c&&e.availableHeight)}return s}function wj(t){const e=vj(t),s=xi(e.filter(d=>d.box.fullSize),!0),n=xi(pi(e,"left"),!0),i=xi(pi(e,"right")),a=xi(pi(e,"top"),!0),l=xi(pi(e,"bottom")),o=Yh(e,"x"),c=Yh(e,"y");return{fullSize:s,leftAndTop:n.concat(a),rightAndBottom:i.concat(c).concat(l).concat(o),chartArea:pi(e,"chartArea"),vertical:n.concat(i).concat(c),horizontal:a.concat(l).concat(o)}}function qh(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function $x(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Nj(t,e,s,n){const{pos:i,box:a}=s,l=t.maxPadding;if(!te(i)){s.size&&(t[i]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?a.height:a.width),s.size=h.size/h.count,t[i]+=s.size}a.getPadding&&$x(l,a.getPadding());const o=Math.max(0,e.outerWidth-qh(l,t,"left","right")),c=Math.max(0,e.outerHeight-qh(l,t,"top","bottom")),d=o!==t.w,u=c!==t.h;return t.w=o,t.h=c,s.horizontal?{same:d,other:u}:{same:u,other:d}}function kj(t){const e=t.maxPadding;function s(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function _j(t,e){const s=e.maxPadding;function n(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(l=>{a[l]=Math.max(e[l],s[l])}),a}return n(t?["left","right"]:["top","bottom"])}function _i(t,e,s,n){const i=[];let a,l,o,c,d,u;for(a=0,l=t.length,d=0;a<l;++a){o=t[a],c=o.box,c.update(o.width||e.w,o.height||e.h,_j(o.horizontal,e));const{same:h,other:m}=Nj(e,s,o,n);d|=h&&i.length,u=u||m,c.fullSize||i.push(o)}return d&&_i(i,e,s,n)||u}function Jr(t,e,s,n,i){t.top=s,t.left=e,t.right=e+n,t.bottom=s+i,t.width=n,t.height=i}function Xh(t,e,s,n){const i=s.padding;let{x:a,y:l}=e;for(const o of t){const c=o.box,d=n[o.stack]||{placed:0,weight:1},u=o.stackWeight/d.weight||1;if(o.horizontal){const h=e.w*u,m=d.size||c.height;cr(d.start)&&(l=d.start),c.fullSize?Jr(c,i.left,l,s.outerWidth-i.right-i.left,m):Jr(c,e.left+d.placed,l,h,m),d.start=l,d.placed+=h,l=c.bottom}else{const h=e.h*u,m=d.size||c.width;cr(d.start)&&(a=d.start),c.fullSize?Jr(c,a,i.top,m,s.outerHeight-i.bottom-i.top):Jr(c,a,e.top+d.placed,m,h),d.start=a,d.placed+=h,a=c.right}}e.x=a,e.y=l}var Ye={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const i=Xe(t.options.layout.padding),a=Math.max(e-i.width,0),l=Math.max(s-i.height,0),o=wj(t.boxes),c=o.vertical,d=o.horizontal;le(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=c.reduce((x,y)=>y.box.options&&y.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:i,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/u,hBoxMaxHeight:l/2}),m=Object.assign({},i);$x(m,Xe(n));const p=Object.assign({maxPadding:m,w:a,h:l,x:i.left,y:i.top},i),f=jj(c.concat(d),h);_i(o.fullSize,p,h,f),_i(c,p,h,f),_i(d,p,h,f)&&_i(c,p,h,f),kj(p),Xh(o.leftAndTop,p,h,f),p.x+=p.w,p.y+=p.h,Xh(o.rightAndBottom,p,h,f),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},le(o.chartArea,x=>{const y=x.box;Object.assign(y,t.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Hx{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,i){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(e){return!0}updateConfig(e){}}class Sj extends Hx{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _a="$chartjs",Cj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Kh=t=>t===null||t==="";function Mj(t,e){const s=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[_a]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Kh(i)){const a=Lh(t,"width");a!==void 0&&(t.width=a)}if(Kh(n))if(t.style.height==="")t.height=t.width/(e||2);else{const a=Lh(t,"height");a!==void 0&&(t.height=a)}return t}const Vx=P2?{passive:!0}:!1;function Pj(t,e,s){t&&t.addEventListener(e,s,Vx)}function Tj(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,Vx)}function Dj(t,e){const s=Cj[t.type]||t.type,{x:n,y:i}=Ys(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function ll(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function Lj(t,e,s){const n=t.canvas,i=new MutationObserver(a=>{let l=!1;for(const o of a)l=l||ll(o.addedNodes,n),l=l&&!ll(o.removedNodes,n);l&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function Ij(t,e,s){const n=t.canvas,i=new MutationObserver(a=>{let l=!1;for(const o of a)l=l||ll(o.removedNodes,n),l=l&&!ll(o.addedNodes,n);l&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const hr=new Map;let Qh=0;function Ux(){const t=window.devicePixelRatio;t!==Qh&&(Qh=t,hr.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function Aj(t,e){hr.size||window.addEventListener("resize",Ux),hr.set(t,e)}function Oj(t){hr.delete(t),hr.size||window.removeEventListener("resize",Ux)}function Ej(t,e,s){const n=t.canvas,i=n&&Kd(n);if(!i)return;const a=yx((o,c)=>{const d=i.clientWidth;s(o,c),d<i.clientWidth&&s()},window),l=new ResizeObserver(o=>{const c=o[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||a(d,u)});return l.observe(i),Aj(t,a),l}function bo(t,e,s){s&&s.disconnect(),e==="resize"&&Oj(t)}function Rj(t,e,s){const n=t.canvas,i=yx(a=>{t.ctx!==null&&s(Dj(a,t))},t);return Pj(n,e,i),i}class zj extends Hx{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Mj(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[_a])return!1;const n=s[_a].initial;["height","width"].forEach(a=>{const l=n[a];J(l)?s.removeAttribute(a):s.setAttribute(a,l)});const i=n.style||{};return Object.keys(i).forEach(a=>{s.style[a]=i[a]}),s.width=s.width,delete s[_a],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const i=e.$proxies||(e.$proxies={}),l={attach:Lj,detach:Ij,resize:Ej}[s]||Rj;i[s]=l(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),i=n[s];if(!i)return;({attach:bo,detach:bo,resize:bo}[s]||Tj)(e,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,i){return M2(e,s,n,i)}isAttached(e){const s=e&&Kd(e);return!!(s&&s.isConnected)}}function Fj(t){return!Xd()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Sj:zj}class Et{constructor(){H(this,"x");H(this,"y");H(this,"active",!1);H(this,"options");H(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Qn(this.x)&&Qn(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const i={};return e.forEach(a=>{i[a]=n[a]&&n[a].active()?n[a]._to:this[a]}),i}}H(Et,"defaults",{}),H(Et,"defaultRoutes");function Bj(t,e){const s=t.options.ticks,n=Wj(t),i=Math.min(s.maxTicksLimit||n,n),a=s.major.enabled?Hj(e):[],l=a.length,o=a[0],c=a[l-1],d=[];if(l>i)return Vj(e,d,a,l/i),d;const u=$j(a,e,i);if(l>0){let h,m;const p=l>1?Math.round((c-o)/(l-1)):null;for(ea(e,d,u,J(p)?0:o-p,o),h=0,m=l-1;h<m;h++)ea(e,d,u,a[h],a[h+1]);return ea(e,d,u,c,J(p)?e.length:c+p),d}return ea(e,d,u),d}function Wj(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),i=t._maxLength/s;return Math.floor(Math.min(n,i))}function $j(t,e,s){const n=Uj(t),i=e.length/s;if(!n)return Math.max(i,1);const a=D1(n);for(let l=0,o=a.length-1;l<o;l++){const c=a[l];if(c>i)return c}return Math.max(i,1)}function Hj(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function Vj(t,e,s,n){let i=0,a=s[0],l;for(n=Math.ceil(n),l=0;l<t.length;l++)l===a&&(e.push(t[l]),i++,a=s[i*n])}function ea(t,e,s,n,i){const a=G(n,0),l=Math.min(G(i,t.length),t.length);let o=0,c,d,u;for(s=Math.ceil(s),i&&(c=i-n,s=c/Math.floor(c/s)),u=a;u<0;)o++,u=Math.round(a+o*s);for(d=Math.max(a,0);d<l;d++)d===u&&(e.push(t[d]),o++,u=Math.round(a+o*s))}function Uj(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const Yj=t=>t==="left"?"right":t==="right"?"left":t,Gh=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,Zh=(t,e)=>Math.min(e||t,t);function Jh(t,e){const s=[],n=t.length/e,i=t.length;let a=0;for(;a<i;a+=n)s.push(t[Math.floor(a)]);return s}function qj(t,e,s){const n=t.ticks.length,i=Math.min(e,n-1),a=t._startPixel,l=t._endPixel,o=1e-6;let c=t.getPixelForTick(i),d;if(!(s&&(n===1?d=Math.max(c-a,l-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(i-1))/2,c+=i<e?d:-d,c<a-o||c>l+o)))return c}function Xj(t,e){le(t,s=>{const n=s.gc,i=n.length/2;let a;if(i>e){for(a=0;a<i;++a)delete s.data[n[a]];n.splice(0,i)}})}function gi(t){return t.drawTicks?t.tickLength:0}function em(t,e){if(!t.display)return 0;const s=De(t.font,e),n=Xe(t.padding);return(ge(t.text)?t.text.length:1)*s.lineHeight+n.height}function Kj(t,e){return zs(t,{scale:e,type:"scale"})}function Qj(t,e,s){return zs(t,{tick:s,index:e,type:"tick"})}function Gj(t,e,s){let n=$d(t);return(s&&e!=="right"||!s&&e==="right")&&(n=Yj(n)),n}function Zj(t,e,s,n){const{top:i,left:a,bottom:l,right:o,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,m,p,f;const x=l-i,y=o-a;if(t.isHorizontal()){if(p=He(n,a,o),te(s)){const b=Object.keys(s)[0],g=s[b];f=u[b].getPixelForValue(g)+x-e}else s==="center"?f=(d.bottom+d.top)/2+x-e:f=Gh(t,s,e);m=o-a}else{if(te(s)){const b=Object.keys(s)[0],g=s[b];p=u[b].getPixelForValue(g)-y+e}else s==="center"?p=(d.left+d.right)/2-y+e:p=Gh(t,s,e);f=He(n,l,i),h=s==="left"?-Se:Se}return{titleX:p,titleY:f,maxWidth:m,rotation:h}}class pn extends Et{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return e=lt(e,Number.POSITIVE_INFINITY),s=lt(s,Number.NEGATIVE_INFINITY),n=lt(n,Number.POSITIVE_INFINITY),i=lt(i,Number.NEGATIVE_INFINITY),{min:lt(e,n),max:lt(s,i),minDefined:Ne(e),maxDefined:Ne(s)}}getMinMax(e){let{min:s,max:n,minDefined:i,maxDefined:a}=this.getUserBounds(),l;if(i&&a)return{min:s,max:n};const o=this.getMatchingVisibleMetas();for(let c=0,d=o.length;c<d;++c)l=o[c].controller.getMinMax(this,e),i||(s=Math.min(s,l.min)),a||(n=Math.max(n,l.max));return s=a&&s>n?n:s,n=i&&s>n?s:n,{min:lt(s,lt(n,s)),max:lt(n,lt(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){de(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:i,grace:a,ticks:l}=this.options,o=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=a2(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?Jh(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=Bj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){de(this.options.afterUpdate,[this])}beforeSetDimensions(){de(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){de(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),de(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){de(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,i,a;for(n=0,i=e.length;n<i;n++)a=e[n],a.label=de(s.callback,[a.value,n,e],this)}afterTickToLabelConversion(){de(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){de(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=Zh(this.ticks.length,e.ticks.maxTicksLimit),i=s.minRotation||0,a=s.maxRotation;let l=i,o,c,d;if(!this._isVisible()||!s.display||i>=a||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,m=u.highest.height,p=Oe(this.chart.width-h,0,this.maxWidth);o=e.offset?this.maxWidth/n:p/(n-1),h+6>o&&(o=p/(n-(e.offset?.5:1)),c=this.maxHeight-gi(e.grid)-s.padding-em(e.title,this.chart.options.font),d=Math.sqrt(h*h+m*m),l=Bd(Math.min(Math.asin(Oe((u.highest.height+6)/o,-1,1)),Math.asin(Oe(c/d,-1,1))-Math.asin(Oe(m/d,-1,1)))),l=Math.max(i,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){de(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){de(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:a}}=this,l=this._isVisible(),o=this.isHorizontal();if(l){const c=em(i,s.options.font);if(o?(e.width=this.maxWidth,e.height=gi(a)+c):(e.height=this.maxHeight,e.width=gi(a)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:m}=this._getLabelSizes(),p=n.padding*2,f=Dt(this.labelRotation),x=Math.cos(f),y=Math.sin(f);if(o){const b=n.mirror?0:y*h.width+x*m.height;e.height=Math.min(this.maxHeight,e.height+b+p)}else{const b=n.mirror?0:x*h.width+y*m.height;e.width=Math.min(this.maxWidth,e.width+b+p)}this._calculatePadding(d,u,y,x)}}this._handleMargins(),o?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,i){const{ticks:{align:a,padding:l},position:o}=this.options,c=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,p=0;c?d?(m=i*e.width,p=n*s.height):(m=n*e.height,p=i*s.width):a==="start"?p=s.width:a==="end"?m=e.width:a!=="inner"&&(m=e.width/2,p=s.width/2),this.paddingLeft=Math.max((m-u+l)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+l)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;a==="start"?(u=0,h=e.height):a==="end"&&(u=s.height,h=0),this.paddingTop=u+l,this.paddingBottom=h+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){de(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)J(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Jh(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:i,_longestTextCache:a}=this,l=[],o=[],c=Math.floor(s/Zh(s,n));let d=0,u=0,h,m,p,f,x,y,b,g,j,w,v;for(h=0;h<s;h+=c){if(f=e[h].label,x=this._resolveTickFontOptions(h),i.font=y=x.string,b=a[y]=a[y]||{data:{},gc:[]},g=x.lineHeight,j=w=0,!J(f)&&!ge(f))j=rl(i,b.data,b.gc,j,f),w=g;else if(ge(f))for(m=0,p=f.length;m<p;++m)v=f[m],!J(v)&&!ge(v)&&(j=rl(i,b.data,b.gc,j,v),w+=g);l.push(j),o.push(w),d=Math.max(j,d),u=Math.max(w,u)}Xj(a,s);const N=l.indexOf(d),k=o.indexOf(u),_=T=>({width:l[T]||0,height:o[T]||0});return{first:_(0),last:_(s-1),widest:_(N),highest:_(k),widths:l,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return O1(this._alignToPixels?Ws(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=Qj(this.getContext(),e,n))}return this.$context||(this.$context=Kj(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Dt(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),a=this._getLabelSizes(),l=e.autoSkipPadding||0,o=a?a.widest.width+l:0,c=a?a.highest.height+l:0;return this.isHorizontal()?c*n>o*i?o/n:c/i:c*i<o*n?c/n:o/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,i=this.options,{grid:a,position:l,border:o}=i,c=a.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),m=gi(a),p=[],f=o.setContext(this.getContext()),x=f.display?f.width:0,y=x/2,b=function(z){return Ws(n,z,x)};let g,j,w,v,N,k,_,T,C,L,D,S;if(l==="top")g=b(this.bottom),k=this.bottom-m,T=g-y,L=b(e.top)+y,S=e.bottom;else if(l==="bottom")g=b(this.top),L=e.top,S=b(e.bottom)-y,k=g+y,T=this.top+m;else if(l==="left")g=b(this.right),N=this.right-m,_=g-y,C=b(e.left)+y,D=e.right;else if(l==="right")g=b(this.left),C=e.left,D=b(e.right)-y,N=g+y,_=this.left+m;else if(s==="x"){if(l==="center")g=b((e.top+e.bottom)/2+.5);else if(te(l)){const z=Object.keys(l)[0],X=l[z];g=b(this.chart.scales[z].getPixelForValue(X))}L=e.top,S=e.bottom,k=g+y,T=k+m}else if(s==="y"){if(l==="center")g=b((e.left+e.right)/2);else if(te(l)){const z=Object.keys(l)[0],X=l[z];g=b(this.chart.scales[z].getPixelForValue(X))}N=g-y,_=N-m,C=e.left,D=e.right}const E=G(i.ticks.maxTicksLimit,h),O=Math.max(1,Math.ceil(h/E));for(j=0;j<h;j+=O){const z=this.getContext(j),X=a.setContext(z),W=o.setContext(z),U=X.lineWidth,K=X.color,re=W.dash||[],ne=W.dashOffset,Le=X.tickWidth,ce=X.tickColor,Be=X.tickBorderDash||[],ke=X.tickBorderDashOffset;w=qj(this,j,c),w!==void 0&&(v=Ws(n,w,U),d?N=_=C=D=v:k=T=L=S=v,p.push({tx1:N,ty1:k,tx2:_,ty2:T,x1:C,y1:L,x2:D,y2:S,width:U,color:K,borderDash:re,borderDashOffset:ne,tickWidth:Le,tickColor:ce,tickBorderDash:Be,tickBorderDashOffset:ke}))}return this._ticksLength=h,this._borderValue=g,p}_computeLabelItems(e){const s=this.axis,n=this.options,{position:i,ticks:a}=n,l=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=a,m=gi(n.grid),p=m+u,f=h?-u:p,x=-Dt(this.labelRotation),y=[];let b,g,j,w,v,N,k,_,T,C,L,D,S="middle";if(i==="top")N=this.bottom-f,k=this._getXAxisLabelAlignment();else if(i==="bottom")N=this.top+f,k=this._getXAxisLabelAlignment();else if(i==="left"){const O=this._getYAxisLabelAlignment(m);k=O.textAlign,v=O.x}else if(i==="right"){const O=this._getYAxisLabelAlignment(m);k=O.textAlign,v=O.x}else if(s==="x"){if(i==="center")N=(e.top+e.bottom)/2+p;else if(te(i)){const O=Object.keys(i)[0],z=i[O];N=this.chart.scales[O].getPixelForValue(z)+p}k=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")v=(e.left+e.right)/2-p;else if(te(i)){const O=Object.keys(i)[0],z=i[O];v=this.chart.scales[O].getPixelForValue(z)}k=this._getYAxisLabelAlignment(m).textAlign}s==="y"&&(c==="start"?S="top":c==="end"&&(S="bottom"));const E=this._getLabelSizes();for(b=0,g=o.length;b<g;++b){j=o[b],w=j.label;const O=a.setContext(this.getContext(b));_=this.getPixelForTick(b)+a.labelOffset,T=this._resolveTickFontOptions(b),C=T.lineHeight,L=ge(w)?w.length:1;const z=L/2,X=O.color,W=O.textStrokeColor,U=O.textStrokeWidth;let K=k;l?(v=_,k==="inner"&&(b===g-1?K=this.options.reverse?"left":"right":b===0?K=this.options.reverse?"right":"left":K="center"),i==="top"?d==="near"||x!==0?D=-L*C+C/2:d==="center"?D=-E.highest.height/2-z*C+C:D=-E.highest.height+C/2:d==="near"||x!==0?D=C/2:d==="center"?D=E.highest.height/2-z*C:D=E.highest.height-L*C,h&&(D*=-1),x!==0&&!O.showLabelBackdrop&&(v+=C/2*Math.sin(x))):(N=_,D=(1-L)*C/2);let re;if(O.showLabelBackdrop){const ne=Xe(O.backdropPadding),Le=E.heights[b],ce=E.widths[b];let Be=D-ne.top,ke=0-ne.left;switch(S){case"middle":Be-=Le/2;break;case"bottom":Be-=Le;break}switch(k){case"center":ke-=ce/2;break;case"right":ke-=ce;break;case"inner":b===g-1?ke-=ce:b>0&&(ke-=ce/2);break}re={left:ke,top:Be,width:ce+ne.width,height:Le+ne.height,color:O.backdropColor}}y.push({label:w,font:T,textOffset:D,options:{rotation:x,color:X,strokeColor:W,strokeWidth:U,textAlign:K,textBaseline:S,translation:[v,N],backdrop:re}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Dt(this.labelRotation))return e==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:i,padding:a}}=this.options,l=this._getLabelSizes(),o=e+a,c=l.widest.width;let d,u;return s==="left"?i?(u=this.right+a,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-o,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):s==="right"?i?(u=this.left+a,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+o,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:i,width:a,height:l}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,i,a,l),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,l;const o=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(a=0,l=i.length;a<l;++a){const c=i[a];s.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:i}}=this,a=n.setContext(this.getContext()),l=n.display?a.width:0;if(!l)return;const o=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,m;this.isHorizontal()?(d=Ws(e,this.left,l)-l/2,u=Ws(e,this.right,o)+o/2,h=m=c):(h=Ws(e,this.top,l)-l/2,m=Ws(e,this.bottom,o)+o/2,d=u=c),s.save(),s.lineWidth=a.width,s.strokeStyle=a.color,s.beginPath(),s.moveTo(d,h),s.lineTo(u,m),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Ml(n,i);const a=this.getLabelItems(e);for(const l of a){const o=l.options,c=l.font,d=l.label,u=l.textOffset;dn(n,d,0,u,c,o)}i&&Pl(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const a=De(n.font),l=Xe(n.padding),o=n.align;let c=a.lineHeight/2;s==="bottom"||s==="center"||te(s)?(c+=l.bottom,ge(n.text)&&(c+=a.lineHeight*(n.text.length-1))):c+=l.top;const{titleX:d,titleY:u,maxWidth:h,rotation:m}=Zj(this,c,s,o);dn(e,n.text,0,0,a,{color:n.color,maxWidth:h,rotation:m,textAlign:Gj(o,s,i),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=G(e.grid&&e.grid.z,-1),i=G(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==pn.prototype.draw?[{z:s,draw:a=>{this.draw(a)}}]:[{z:n,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let a,l;for(a=0,l=s.length;a<l;++a){const o=s[a];o[n]===this.id&&(!e||o.type===e)&&i.push(o)}return i}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return De(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ta{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;tw(s)&&(n=this.register(s));const i=this.items,a=e.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,Jj(e,l,n),this.override&&be.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,i=this.scope;n in s&&delete s[n],i&&n in be[i]&&(delete be[i][n],this.override&&delete cn[n])}}function Jj(t,e,s){const n=or(Object.create(null),[s?be.get(s):{},be.get(e),t.defaults]);be.set(e,n),t.defaultRoutes&&ew(e,t.defaultRoutes),t.descriptors&&be.describe(e,t.descriptors)}function ew(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),i=n.pop(),a=[t].concat(n).join("."),l=e[s].split("."),o=l.pop(),c=l.join(".");be.route(a,i,c,o)})}function tw(t){return"id"in t&&"defaults"in t}class sw{constructor(){this.controllers=new ta(At,"datasets",!0),this.elements=new ta(Et,"elements"),this.plugins=new ta(Object,"plugins"),this.scales=new ta(pn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(i=>{const a=n||this._getRegistryForType(i);n||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):le(i,l=>{const o=n||this._getRegistryForType(l);this._exec(e,o,l)})})}_exec(e,s,n){const i=Fd(e);de(n["before"+i],[],n),s[e](n),de(n["after"+i],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const i=s.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Bt=new sw;class nw{constructor(){this._init=void 0}notify(e,s,n,i){if(s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const a=i?this._descriptors(e).filter(i):this._descriptors(e),l=this._notify(a,e,s,n);return s==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),l}_notify(e,s,n,i){i=i||{};for(const a of e){const l=a.plugin,o=l[n],c=[s,i,a.options];if(de(o,c,l)===!1&&i.cancelable)return!1}return!0}invalidate(){J(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,i=G(n.options&&n.options.plugins,{}),a=iw(n);return i===!1&&!s?[]:aw(e,a,i,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,i=(a,l)=>a.filter(o=>!l.some(c=>o.plugin.id===c.plugin.id));this._notify(i(s,n),e,"stop"),this._notify(i(n,s),e,"start")}}function iw(t){const e={},s=[],n=Object.keys(Bt.plugins.items);for(let a=0;a<n.length;a++)s.push(Bt.getPlugin(n[a]));const i=t.plugins||[];for(let a=0;a<i.length;a++){const l=i[a];s.indexOf(l)===-1&&(s.push(l),e[l.id]=!0)}return{plugins:s,localIds:e}}function rw(t,e){return!e&&t===!1?null:t===!0?{}:t}function aw(t,{plugins:e,localIds:s},n,i){const a=[],l=t.getContext();for(const o of e){const c=o.id,d=rw(n[c],i);d!==null&&a.push({plugin:o,options:lw(t.config,{plugin:o,local:s[c]},d,l)})}return a}function lw(t,{plugin:e,local:s},n,i){const a=t.pluginScopeKeys(e),l=t.getOptionScopes(n,a);return s&&e.defaults&&l.push(e.defaults),t.createResolver(l,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cc(t,e){const s=be.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function ow(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function cw(t,e){return t===e?"_index_":"_value_"}function tm(t){if(t==="x"||t==="y"||t==="r")return t}function dw(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Mc(t,...e){if(tm(t))return t;for(const s of e){const n=s.axis||dw(s.position)||t.length>1&&tm(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function sm(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function uw(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return sm(t,"x",s[0])||sm(t,"y",s[0])}return{}}function hw(t,e){const s=cn[t.type]||{scales:{}},n=e.scales||{},i=Cc(t.type,e),a=Object.create(null);return Object.keys(n).forEach(l=>{const o=n[l];if(!te(o))return console.error(`Invalid scale configuration for scale: ${l}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const c=Mc(l,o,uw(l,t),be.scales[o.type]),d=cw(c,i),u=s.scales||{};a[l]=zi(Object.create(null),[{axis:c},o,u[c],u[d]])}),t.data.datasets.forEach(l=>{const o=l.type||t.type,c=l.indexAxis||Cc(o,e),u=(cn[o]||{}).scales||{};Object.keys(u).forEach(h=>{const m=ow(h,c),p=l[m+"AxisID"]||m;a[p]=a[p]||Object.create(null),zi(a[p],[{axis:m},n[p],u[h]])})}),Object.keys(a).forEach(l=>{const o=a[l];zi(o,[be.scales[o.type],be.scale])}),a}function Yx(t){const e=t.options||(t.options={});e.plugins=G(e.plugins,{}),e.scales=hw(t,e)}function qx(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function mw(t){return t=t||{},t.data=qx(t.data),Yx(t),t}const nm=new Map,Xx=new Set;function sa(t,e){let s=nm.get(t);return s||(s=e(),nm.set(t,s),Xx.add(s)),s}const bi=(t,e,s)=>{const n=Is(e,s);n!==void 0&&t.add(n)};class fw{constructor(e){this._config=mw(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=qx(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Yx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return sa(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return sa(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return sa(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return sa(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let i=n.get(e);return(!i||s)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,s,n){const{options:i,type:a}=this,l=this._cachedScopes(e,n),o=l.get(s);if(o)return o;const c=new Set;s.forEach(u=>{e&&(c.add(e),u.forEach(h=>bi(c,e,h))),u.forEach(h=>bi(c,i,h)),u.forEach(h=>bi(c,cn[a]||{},h)),u.forEach(h=>bi(c,be,h)),u.forEach(h=>bi(c,kc,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Xx.has(s)&&l.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,cn[s]||{},be.datasets[s]||{},{type:s},be,kc]}resolveNamedOptions(e,s,n,i=[""]){const a={$shared:!0},{resolver:l,subPrefixes:o}=im(this._resolverCache,e,i);let c=l;if(xw(l,s)){a.$shared=!1,n=As(n)?n():n;const d=this.createResolver(e,n,o);c=Gn(l,n,d)}for(const d of s)a[d]=c[d];return a}createResolver(e,s,n=[""],i){const{resolver:a}=im(this._resolverCache,e,n);return te(s)?Gn(a,s,void 0,i):a}}function im(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=s.join();let a=n.get(i);return a||(a={resolver:Ud(e,s),subPrefixes:s.filter(o=>!o.toLowerCase().includes("hover"))},n.set(i,a)),a}const pw=t=>te(t)&&Object.getOwnPropertyNames(t).some(e=>As(t[e]));function xw(t,e){const{isScriptable:s,isIndexable:n}=Sx(t);for(const i of e){const a=s(i),l=n(i),o=(l||a)&&t[i];if(a&&(As(o)||pw(o))||l&&ge(o))return!0}return!1}var gw="4.5.1";const bw=["top","bottom","left","right","chartArea"];function rm(t,e){return t==="top"||t==="bottom"||bw.indexOf(t)===-1&&e==="x"}function am(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function lm(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),de(s&&s.onComplete,[t],e)}function vw(t){const e=t.chart,s=e.options.animation;de(s&&s.onProgress,[t],e)}function Kx(t){return Xd()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Sa={},om=t=>{const e=Kx(t);return Object.values(Sa).filter(s=>s.canvas===e).pop()};function yw(t,e,s){const n=Object.keys(t);for(const i of n){const a=+i;if(a>=e){const l=t[i];delete t[i],(s>0||a>e)&&(t[a+s]=l)}}}function jw(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}class Gt{static register(...e){Bt.add(...e),cm()}static unregister(...e){Bt.remove(...e),cm()}constructor(e,s){const n=this.config=new fw(s),i=Kx(e),a=om(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Fj(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,l.aspectRatio),c=o&&o.canvas,d=c&&c.height,u=c&&c.width;if(this.id=w1(),this.ctx=o,this.canvas=c,this.width=u,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nw,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=F1(h=>this.update(h),l.resizeDelay||0),this._dataChanges=[],Sa[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Yt.listen(this,"complete",lm),Yt.listen(this,"progress",vw),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:i,_aspectRatio:a}=this;return J(e)?s&&a?a:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Bt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Dh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Mh(this.canvas,this.ctx),this}stop(){return Yt.stop(this),this}resize(e,s){Yt.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,i=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(i,e,s,a),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,Dh(this,o,!0)&&(this.notifyPlugins("resize",{size:l}),de(n.onResize,[this,l],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};le(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,i=Object.keys(n).reduce((l,o)=>(l[o]=!1,l),{});let a=[];s&&(a=a.concat(Object.keys(s).map(l=>{const o=s[l],c=Mc(l,o),d=c==="r",u=c==="x";return{options:o,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),le(a,l=>{const o=l.options,c=o.id,d=Mc(c,o),u=G(o.type,l.dtype);(o.position===void 0||rm(o.position,d)!==rm(l.dposition))&&(o.position=l.dposition),i[c]=!0;let h=null;if(c in n&&n[c].type===u)h=n[c];else{const m=Bt.getScale(u);h=new m({id:c,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(o,e)}),le(i,(l,o)=>{l||delete n[o]}),le(n,l=>{Ye.configure(this,l,l.options),Ye.addBox(this,l)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((i,a)=>i.index-a.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(am("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,i)=>{s.filter(a=>a===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const a=s[n];let l=this.getDatasetMeta(n);const o=a.type||this.config.type;if(l.type&&l.type!==o&&(this._destroyDatasetMeta(n),l=this.getDatasetMeta(n)),l.type=o,l.indexAxis=a.indexAxis||Cc(o,this.options),l.order=a.order||0,l.index=n,l.label=""+a.label,l.visible=this.isDatasetVisible(n),l.controller)l.controller.updateIndex(n),l.controller.linkScales();else{const c=Bt.getController(o),{datasetElementType:d,dataElementType:u}=be.datasets[o];Object.assign(c,{dataElementType:Bt.getElement(u),datasetElementType:d&&Bt.getElement(d)}),l.controller=new c(this,n),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){le(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),m=!i&&a.indexOf(h)===-1;h.buildOrUpdateElements(m),l=Math.max(+h.getMaxOverflow(),l)}l=this._minPadding=n.layout.autoPadding?l:0,this._updateLayout(l),i||le(a,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(am("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){le(this.scales,e=>{Ye.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!vh(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:a}of s){const l=n==="_removeElements"?-a:a;yw(e,i,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=a=>new Set(e.filter(l=>l[0]===a).map((l,o)=>o+","+l.splice(1).join(","))),i=n(0);for(let a=1;a<s;a++)if(!vh(i,n(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ye.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],le(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,As(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Yt.has(this)?this.attached&&!Yt.running(this)&&Yt.start(this):(this.draw(),lm({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let i,a;for(i=0,a=s.length;i<a;++i){const l=s[i];(!e||l.visible)&&n.push(l)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=Rx(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Ml(s,i),e.controller.draw(),i&&Pl(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return ss(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,i){const a=bj.modes[s];return typeof a=="function"?a(this,e,n,i):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let i=n.filter(a=>a&&a._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=zs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const i=n?"show":"hide",a=this.getDatasetMeta(e),l=a.controller._resolveAnimations(void 0,i);cr(s)?(a.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),l.update(a,{visible:n}),this.update(o=>o.datasetIndex===e?i:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Yt.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Mh(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Sa[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(a,l)=>{s.addEventListener(this,a,l),e[a]=l},i=(a,l,o)=>{a.offsetX=l,a.offsetY=o,this._eventHandler(a)};le(this.options.events,a=>n(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},i=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},a=(c,d)=>{this.canvas&&this.resize(c,d)};let l;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",a),n("detach",l)};l=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),n("attach",o)},s.isAttached(this.canvas)?o():l()}unbindEvents(){le(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},le(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const i=n?"set":"remove";let a,l,o,c;for(s==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),o=0,c=e.length;o<c;++o){l=e[o];const d=l&&this.getDatasetMeta(l.datasetIndex).controller;d&&d[i+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:a,index:l})=>{const o=this.getDatasetMeta(a);if(!o)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:o.data[l],index:l}});!sl(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const i=this.options.hover,a=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),l=a(s,e),o=n?e:a(e,s);l.length&&this.updateHoverStyle(l,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},i=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const a=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(a||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:i=[],options:a}=this,l=s,o=this._getActiveElements(e,i,n,l),c=M1(e),d=jw(e,this._lastEvent,n,c);n&&(this._lastEvent=null,de(a.onHover,[e,o,this],this),c&&de(a.onClick,[e,o,this],this));const u=!sl(o,i);return(u||s)&&(this._active=o,this._updateHoverStyles(o,i,s)),this._lastEvent=d,u}_getActiveElements(e,s,n,i){if(e.type==="mouseout")return[];if(!n)return s;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}}H(Gt,"defaults",be),H(Gt,"instances",Sa),H(Gt,"overrides",cn),H(Gt,"registry",Bt),H(Gt,"version",gw),H(Gt,"getChart",om);function cm(){return le(Gt.instances,t=>t._plugins.invalidate())}function ww(t,e,s){const{startAngle:n,x:i,y:a,outerRadius:l,innerRadius:o,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/l,Ve(n-s));if(t.beginPath(),t.arc(i,a,l-d/2,n+h/2,s-h/2),o>0){const m=Math.min(d/o,Ve(n-s));t.arc(i,a,o+d/2,s-m/2,n+m/2,!0)}else{const m=Math.min(d/2,l*Ve(n-s));if(u==="round")t.arc(i,a,m,s-ie/2,n+ie/2,!0);else if(u==="bevel"){const p=2*m*m,f=-p*Math.cos(s+ie/2)+i,x=-p*Math.sin(s+ie/2)+a,y=p*Math.cos(n+ie/2)+i,b=p*Math.sin(n+ie/2)+a;t.lineTo(f,x),t.lineTo(y,b)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function Nw(t,e,s){const{startAngle:n,pixelMargin:i,x:a,y:l,outerRadius:o,innerRadius:c}=e;let d=i/o;t.beginPath(),t.arc(a,l,o,n-d,s+d),c>i?(d=i/c,t.arc(a,l,c,s+d,n-d,!0)):t.arc(a,l,i,s+Se,n-Se),t.closePath(),t.clip()}function kw(t){return Vd(t,["outerStart","outerEnd","innerStart","innerEnd"])}function _w(t,e,s,n){const i=kw(t.options.borderRadius),a=(s-e)/2,l=Math.min(a,n*e/2),o=c=>{const d=(s-Math.min(a,c))*n/2;return Oe(c,0,Math.min(a,d))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Oe(i.innerStart,0,l),innerEnd:Oe(i.innerEnd,0,l)}}function yn(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function ol(t,e,s,n,i,a){const{x:l,y:o,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+n+s-d,0),m=u>0?u+n+s+d:0;let p=0;const f=i-c;if(n){const O=u>0?u-n:0,z=h>0?h-n:0,X=(O+z)/2,W=X!==0?f*X/(X+n):f;p=(f-W)/2}const x=Math.max(.001,f*h-s/ie)/h,y=(f-x)/2,b=c+y+p,g=i-y-p,{outerStart:j,outerEnd:w,innerStart:v,innerEnd:N}=_w(e,m,h,g-b),k=h-j,_=h-w,T=b+j/k,C=g-w/_,L=m+v,D=m+N,S=b+v/L,E=g-N/D;if(t.beginPath(),a){const O=(T+C)/2;if(t.arc(l,o,h,T,O),t.arc(l,o,h,O,C),w>0){const U=yn(_,C,l,o);t.arc(U.x,U.y,w,C,g+Se)}const z=yn(D,g,l,o);if(t.lineTo(z.x,z.y),N>0){const U=yn(D,E,l,o);t.arc(U.x,U.y,N,g+Se,E+Math.PI)}const X=(g-N/m+(b+v/m))/2;if(t.arc(l,o,m,g-N/m,X,!0),t.arc(l,o,m,X,b+v/m,!0),v>0){const U=yn(L,S,l,o);t.arc(U.x,U.y,v,S+Math.PI,b-Se)}const W=yn(k,b,l,o);if(t.lineTo(W.x,W.y),j>0){const U=yn(k,T,l,o);t.arc(U.x,U.y,j,b-Se,T)}}else{t.moveTo(l,o);const O=Math.cos(T)*h+l,z=Math.sin(T)*h+o;t.lineTo(O,z);const X=Math.cos(C)*h+l,W=Math.sin(C)*h+o;t.lineTo(X,W)}t.closePath()}function Sw(t,e,s,n,i){const{fullCircles:a,startAngle:l,circumference:o}=e;let c=e.endAngle;if(a){ol(t,e,s,n,c,i);for(let d=0;d<a;++d)t.fill();isNaN(o)||(c=l+(o%pe||pe))}return ol(t,e,s,n,c,i),t.fill(),c}function Cw(t,e,s,n,i){const{fullCircles:a,startAngle:l,circumference:o,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:m,borderRadius:p}=c,f=c.borderAlign==="inner";if(!d)return;t.setLineDash(h||[]),t.lineDashOffset=m,f?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let x=e.endAngle;if(a){ol(t,e,s,n,x,i);for(let y=0;y<a;++y)t.stroke();isNaN(o)||(x=l+(o%pe||pe))}f&&Nw(t,e,x),c.selfJoin&&x-l>=ie&&p===0&&u!=="miter"&&ww(t,e,x),a||(ol(t,e,s,n,x,i),t.stroke())}class Si extends Et{constructor(s){super();H(this,"circumference");H(this,"endAngle");H(this,"fullCircles");H(this,"innerRadius");H(this,"outerRadius");H(this,"pixelMargin");H(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,n,i){const a=this.getProps(["x","y"],i),{angle:l,distance:o}=xx(a,{x:s,y:n}),{startAngle:c,endAngle:d,innerRadius:u,outerRadius:h,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,f=G(m,d-c),x=dr(l,c,d)&&c!==d,y=f>=pe||x,b=es(o,u+p,h+p);return y&&b}getCenterPoint(s){const{x:n,y:i,startAngle:a,endAngle:l,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:d,spacing:u}=this.options,h=(a+l)/2,m=(o+c+u+d)/2;return{x:n+Math.cos(h)*m,y:i+Math.sin(h)*m}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:n,circumference:i}=this,a=(n.offset||0)/4,l=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>pe?Math.floor(i/pe):0,i===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const c=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(c)*a,Math.sin(c)*a);const d=1-Math.sin(Math.min(ie,i||0)),u=a*d;s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,Sw(s,this,u,l,o),Cw(s,this,u,l,o),s.restore()}}H(Si,"id","arc"),H(Si,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),H(Si,"defaultRoutes",{backgroundColor:"backgroundColor"}),H(Si,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});function Qx(t,e,s=e){t.lineCap=G(s.borderCapStyle,e.borderCapStyle),t.setLineDash(G(s.borderDash,e.borderDash)),t.lineDashOffset=G(s.borderDashOffset,e.borderDashOffset),t.lineJoin=G(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=G(s.borderWidth,e.borderWidth),t.strokeStyle=G(s.borderColor,e.borderColor)}function Mw(t,e,s){t.lineTo(s.x,s.y)}function Pw(t){return t.stepped?G1:t.tension||t.cubicInterpolationMode==="monotone"?Z1:Mw}function Gx(t,e,s={}){const n=t.length,{start:i=0,end:a=n-1}=s,{start:l,end:o}=e,c=Math.max(i,l),d=Math.min(a,o),u=i<l&&a<l||i>o&&a>o;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function Tw(t,e,s,n){const{points:i,options:a}=e,{count:l,start:o,loop:c,ilen:d}=Gx(i,s,n),u=Pw(a);let{move:h=!0,reverse:m}=n||{},p,f,x;for(p=0;p<=d;++p)f=i[(o+(m?d-p:p))%l],!f.skip&&(h?(t.moveTo(f.x,f.y),h=!1):u(t,x,f,m,a.stepped),x=f);return c&&(f=i[(o+(m?d:0))%l],u(t,x,f,m,a.stepped)),!!c}function Dw(t,e,s,n){const i=e.points,{count:a,start:l,ilen:o}=Gx(i,s,n),{move:c=!0,reverse:d}=n||{};let u=0,h=0,m,p,f,x,y,b;const g=w=>(l+(d?o-w:w))%a,j=()=>{x!==y&&(t.lineTo(u,y),t.lineTo(u,x),t.lineTo(u,b))};for(c&&(p=i[g(0)],t.moveTo(p.x,p.y)),m=0;m<=o;++m){if(p=i[g(m)],p.skip)continue;const w=p.x,v=p.y,N=w|0;N===f?(v<x?x=v:v>y&&(y=v),u=(h*u+w)/++h):(j(),t.lineTo(w,v),f=N,h=0,x=y=v),b=v}j()}function Pc(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?Dw:Tw}function Lw(t){return t.stepped?T2:t.tension||t.cubicInterpolationMode==="monotone"?D2:qs}function Iw(t,e,s,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,s,n)&&i.closePath()),Qx(t,e.options),t.stroke(i)}function Aw(t,e,s,n){const{segments:i,options:a}=e,l=Pc(e);for(const o of i)Qx(t,a,o.style),t.beginPath(),l(t,e,o,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const Ow=typeof Path2D=="function";function Ew(t,e,s,n){Ow&&!e.options.segment?Iw(t,e,s,n):Aw(t,e,s,n)}class ys extends Et{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;w2(this._points,n,e,i,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=R2(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,i=e[s],a=this.points,l=Ex(this,{property:s,start:i,end:i});if(!l.length)return;const o=[],c=Lw(n);let d,u;for(d=0,u=l.length;d<u;++d){const{start:h,end:m}=l[d],p=a[h],f=a[m];if(p===f){o.push(p);continue}const x=Math.abs((i-p[s])/(f[s]-p[s])),y=c(p,f,x,n.stepped);y[s]=e[s],o.push(y)}return o.length===1?o[0]:o}pathSegment(e,s,n){return Pc(this)(e,this,s,n)}path(e,s,n){const i=this.segments,a=Pc(this);let l=this._loop;s=s||0,n=n||this.points.length-s;for(const o of i)l&=a(e,this,o,{start:s,end:s+n-1});return!!l}draw(e,s,n,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),Ew(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}H(ys,"id","line"),H(ys,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),H(ys,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),H(ys,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function dm(t,e,s,n){const i=t.options,{[s]:a}=t.getProps([s],n);return Math.abs(e-a)<i.radius+i.hitRadius}class Ca extends Et{constructor(s){super();H(this,"parsed");H(this,"skip");H(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,i){const a=this.options,{x:l,y:o}=this.getProps(["x","y"],i);return Math.pow(s-l,2)+Math.pow(n-o,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(s,n){return dm(this,s,"x",n)}inYRange(s,n){return dm(this,s,"y",n)}getCenterPoint(s){const{x:n,y:i}=this.getProps(["x","y"],s);return{x:n,y:i}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const i=n&&s.borderWidth||0;return(n+i)*2}draw(s,n){const i=this.options;this.skip||i.radius<.1||!ss(this,n,this.size(i)/2)||(s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.fillStyle=i.backgroundColor,_c(s,i,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}H(Ca,"id","point"),H(Ca,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),H(Ca,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Zx(t,e){const{x:s,y:n,base:i,width:a,height:l}=t.getProps(["x","y","base","width","height"],e);let o,c,d,u,h;return t.horizontal?(h=l/2,o=Math.min(s,i),c=Math.max(s,i),d=n-h,u=n+h):(h=a/2,o=s-h,c=s+h,d=Math.min(n,i),u=Math.max(n,i)),{left:o,top:d,right:c,bottom:u}}function js(t,e,s,n){return t?0:Oe(e,s,n)}function Rw(t,e,s){const n=t.options.borderWidth,i=t.borderSkipped,a=_x(n);return{t:js(i.top,a.top,0,s),r:js(i.right,a.right,0,e),b:js(i.bottom,a.bottom,0,s),l:js(i.left,a.left,0,e)}}function zw(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,a=en(i),l=Math.min(e,s),o=t.borderSkipped,c=n||te(i);return{topLeft:js(!c||o.top||o.left,a.topLeft,0,l),topRight:js(!c||o.top||o.right,a.topRight,0,l),bottomLeft:js(!c||o.bottom||o.left,a.bottomLeft,0,l),bottomRight:js(!c||o.bottom||o.right,a.bottomRight,0,l)}}function Fw(t){const e=Zx(t),s=e.right-e.left,n=e.bottom-e.top,i=Rw(t,s/2,n/2),a=zw(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:a},inner:{x:e.left+i.l,y:e.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function vo(t,e,s,n){const i=e===null,a=s===null,o=t&&!(i&&a)&&Zx(t,n);return o&&(i||es(e,o.left,o.right))&&(a||es(s,o.top,o.bottom))}function Bw(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Ww(t,e){t.rect(e.x,e.y,e.w,e.h)}function yo(t,e,s={}){const n=t.x!==s.x?-e:0,i=t.y!==s.y?-e:0,a=(t.x+t.w!==s.x+s.w?e:0)-n,l=(t.y+t.h!==s.y+s.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+a,h:t.h+l,radius:t.radius}}class Ma extends Et{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:a,outer:l}=Fw(this),o=Bw(l.radius)?ur:Ww;e.save(),(l.w!==a.w||l.h!==a.h)&&(e.beginPath(),o(e,yo(l,s,a)),e.clip(),o(e,yo(a,-s,l)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,yo(a,s)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,s,n){return vo(this,e,s,n)}inXRange(e,s){return vo(this,e,null,s)}inYRange(e,s){return vo(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:i,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(s+i)/2:s,y:a?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}H(Ma,"id","bar"),H(Ma,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),H(Ma,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var $w=Object.freeze({__proto__:null,ArcElement:Si,BarElement:Ma,LineElement:ys,PointElement:Ca});const Tc=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],um=Tc.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function Jx(t){return Tc[t%Tc.length]}function e0(t){return um[t%um.length]}function Hw(t,e){return t.borderColor=Jx(e),t.backgroundColor=e0(e),++e}function Vw(t,e){return t.backgroundColor=t.data.map(()=>Jx(e++)),e}function Uw(t,e){return t.backgroundColor=t.data.map(()=>e0(e++)),e}function Yw(t){let e=0;return(s,n)=>{const i=t.getDatasetMeta(n).controller;i instanceof Gs?e=Vw(s,e):i instanceof $i?e=Uw(s,e):i&&(e=Hw(s,e))}}function hm(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function qw(t){return t&&(t.borderColor||t.backgroundColor)}function Xw(){return be.borderColor!=="rgba(0,0,0,0.1)"||be.backgroundColor!=="rgba(0,0,0,0.1)"}var Kw={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,s){if(!s.enabled)return;const{data:{datasets:n},options:i}=t.config,{elements:a}=i,l=hm(n)||qw(i)||a&&hm(a)||Xw();if(!s.forceOverride&&l)return;const o=Yw(t);n.forEach(o)}};function Qw(t,e,s,n,i){const a=i.samples||n;if(a>=s)return t.slice(e,e+s);const l=[],o=(s-2)/(a-2);let c=0;const d=e+s-1;let u=e,h,m,p,f,x;for(l[c++]=t[u],h=0;h<a-2;h++){let y=0,b=0,g;const j=Math.floor((h+1)*o)+1+e,w=Math.min(Math.floor((h+2)*o)+1,s)+e,v=w-j;for(g=j;g<w;g++)y+=t[g].x,b+=t[g].y;y/=v,b/=v;const N=Math.floor(h*o)+1+e,k=Math.min(Math.floor((h+1)*o)+1,s)+e,{x:_,y:T}=t[u];for(p=f=-1,g=N;g<k;g++)f=.5*Math.abs((_-y)*(t[g].y-T)-(_-t[g].x)*(b-T)),f>p&&(p=f,m=t[g],x=g);l[c++]=m,u=x}return l[c++]=t[d],l}function Gw(t,e,s,n){let i=0,a=0,l,o,c,d,u,h,m,p,f,x;const y=[],b=e+s-1,g=t[e].x,w=t[b].x-g;for(l=e;l<e+s;++l){o=t[l],c=(o.x-g)/w*n,d=o.y;const v=c|0;if(v===u)d<f?(f=d,h=l):d>x&&(x=d,m=l),i=(a*i+o.x)/++a;else{const N=l-1;if(!J(h)&&!J(m)){const k=Math.min(h,m),_=Math.max(h,m);k!==p&&k!==N&&y.push({...t[k],x:i}),_!==p&&_!==N&&y.push({...t[_],x:i})}l>0&&N!==p&&y.push(t[N]),y.push(o),u=v,a=0,f=x=d,h=m=p=l}}return y}function t0(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function mm(t){t.data.datasets.forEach(e=>{t0(e)})}function Zw(t,e){const s=e.length;let n=0,i;const{iScale:a}=t,{min:l,max:o,minDefined:c,maxDefined:d}=a.getUserBounds();return c&&(n=Oe(ts(e,a.axis,l).lo,0,s-1)),d?i=Oe(ts(e,a.axis,o).hi+1,n,s)-n:i=s-n,{start:n,count:i}}var Jw={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,s)=>{if(!s.enabled){mm(t);return}const n=t.width;t.data.datasets.forEach((i,a)=>{const{_data:l,indexAxis:o}=i,c=t.getDatasetMeta(a),d=l||i.data;if(ki([o,t.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=t.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:m}=Zw(c,d);const p=s.threshold||4*n;if(m<=p){t0(i);return}J(l)&&(i._data=d,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let f;switch(s.algorithm){case"lttb":f=Qw(d,h,m,n,s);break;case"min-max":f=Gw(d,h,m,n);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}i._decimated=f})},destroy(t){mm(t)}};function eN(t,e,s){const n=t.segments,i=t.points,a=e.points,l=[];for(const o of n){let{start:c,end:d}=o;d=Ll(c,d,i);const u=Dc(s,i[c],i[d],o.loop);if(!e.segments){l.push({source:o,target:u,start:i[c],end:i[d]});continue}const h=Ex(e,u);for(const m of h){const p=Dc(s,a[m.start],a[m.end],m.loop),f=Ox(o,i,p);for(const x of f)l.push({source:x,target:m,start:{[s]:fm(u,p,"start",Math.max)},end:{[s]:fm(u,p,"end",Math.min)}})}}return l}function Dc(t,e,s,n){if(n)return;let i=e[t],a=s[t];return t==="angle"&&(i=Ve(i),a=Ve(a)),{property:t,start:i,end:a}}function tN(t,e){const{x:s=null,y:n=null}=t||{},i=e.points,a=[];return e.segments.forEach(({start:l,end:o})=>{o=Ll(l,o,i);const c=i[l],d=i[o];n!==null?(a.push({x:c.x,y:n}),a.push({x:d.x,y:n})):s!==null&&(a.push({x:s,y:c.y}),a.push({x:s,y:d.y}))}),a}function Ll(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function fm(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function s0(t,e){let s=[],n=!1;return ge(t)?(n=!0,s=t):s=tN(t,e),s.length?new ys({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function pm(t){return t&&t.fill!==!1}function sN(t,e,s){let i=t[e].fill;const a=[e];let l;if(!s)return i;for(;i!==!1&&a.indexOf(i)===-1;){if(!Ne(i))return i;if(l=t[i],!l)return!1;if(l.visible)return i;a.push(i),i=l.fill}return!1}function nN(t,e,s){const n=lN(t);if(te(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Ne(i)&&Math.floor(i)===i?iN(n[0],e,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function iN(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function rN(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:te(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function aN(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:te(t)?n=t.value:n=e.getBaseValue(),n}function lN(t){const e=t.options,s=e.fill;let n=G(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function oN(t){const{scale:e,index:s,line:n}=t,i=[],a=n.segments,l=n.points,o=cN(e,s);o.push(s0({x:null,y:e.bottom},n));for(let c=0;c<a.length;c++){const d=a[c];for(let u=d.start;u<=d.end;u++)dN(i,l[u],o)}return new ys({points:i,options:{}})}function cN(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const a=n[i];if(a.index===e)break;a.hidden||s.unshift(a.dataset)}return s}function dN(t,e,s){const n=[];for(let i=0;i<s.length;i++){const a=s[i],{first:l,last:o,point:c}=uN(a,e,"x");if(!(!c||l&&o)){if(l)n.unshift(c);else if(t.push(c),!o)break}}t.push(...n)}function uN(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const i=n[s],a=t.segments,l=t.points;let o=!1,c=!1;for(let d=0;d<a.length;d++){const u=a[d],h=l[u.start][s],m=l[u.end][s];if(es(i,h,m)){o=i===h,c=i===m;break}}return{first:o,last:c,point:n}}class n0{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:i,y:a,radius:l}=this;return s=s||{start:0,end:pe},e.arc(i,a,l,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:i}=this,a=e.angle;return{x:s+Math.cos(a)*i,y:n+Math.sin(a)*i,angle:a}}}function hN(t){const{chart:e,fill:s,line:n}=t;if(Ne(s))return mN(e,s);if(s==="stack")return oN(t);if(s==="shape")return!0;const i=fN(t);return i instanceof n0?i:s0(i,n)}function mN(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function fN(t){return(t.scale||{}).getPointPositionForValue?xN(t):pN(t)}function pN(t){const{scale:e={},fill:s}=t,n=rN(s,e);if(Ne(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function xN(t){const{scale:e,fill:s}=t,n=e.options,i=e.getLabels().length,a=n.reverse?e.max:e.min,l=aN(s,e,a),o=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,a);return new n0({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(l)})}for(let c=0;c<i;++c)o.push(e.getPointPositionForValue(c,l));return o}function jo(t,e,s){const n=hN(e),{chart:i,index:a,line:l,scale:o,axis:c}=e,d=l.options,u=d.fill,h=d.backgroundColor,{above:m=h,below:p=h}=u||{},f=i.getDatasetMeta(a),x=Rx(i,f);n&&l.points.length&&(Ml(t,s),gN(t,{line:l,target:n,above:m,below:p,area:s,scale:o,axis:c,clip:x}),Pl(t))}function gN(t,e){const{line:s,target:n,above:i,below:a,area:l,scale:o,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let u=a;a!==i&&(d==="x"?(xm(t,n,l.top),wo(t,{line:s,target:n,color:i,scale:o,property:d,clip:c}),t.restore(),t.save(),xm(t,n,l.bottom)):d==="y"&&(gm(t,n,l.left),wo(t,{line:s,target:n,color:a,scale:o,property:d,clip:c}),t.restore(),t.save(),gm(t,n,l.right),u=i)),wo(t,{line:s,target:n,color:u,scale:o,property:d,clip:c}),t.restore()}function xm(t,e,s){const{segments:n,points:i}=e;let a=!0,l=!1;t.beginPath();for(const o of n){const{start:c,end:d}=o,u=i[c],h=i[Ll(c,d,i)];a?(t.moveTo(u.x,u.y),a=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),l=!!e.pathSegment(t,o,{move:l}),l?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function gm(t,e,s){const{segments:n,points:i}=e;let a=!0,l=!1;t.beginPath();for(const o of n){const{start:c,end:d}=o,u=i[c],h=i[Ll(c,d,i)];a?(t.moveTo(u.x,u.y),a=!1):(t.lineTo(s,u.y),t.lineTo(u.x,u.y)),l=!!e.pathSegment(t,o,{move:l}),l?t.closePath():t.lineTo(s,h.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function wo(t,e){const{line:s,target:n,property:i,color:a,scale:l,clip:o}=e,c=eN(s,n,i);for(const{source:d,target:u,start:h,end:m}of c){const{style:{backgroundColor:p=a}={}}=d,f=n!==!0;t.save(),t.fillStyle=p,bN(t,l,o,f&&Dc(i,h,m)),t.beginPath();const x=!!s.pathSegment(t,d);let y;if(f){x?t.closePath():bm(t,n,m,i);const b=!!n.pathSegment(t,u,{move:x,reverse:!0});y=x&&b,y||bm(t,n,h,i)}t.closePath(),t.fill(y?"evenodd":"nonzero"),t.restore()}}function bN(t,e,s,n){const i=e.chart.chartArea,{property:a,start:l,end:o}=n||{};if(a==="x"||a==="y"){let c,d,u,h;a==="x"?(c=l,d=i.top,u=o,h=i.bottom):(c=i.left,d=l,u=i.right,h=o),t.beginPath(),s&&(c=Math.max(c,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),h=Math.min(h,s.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function bm(t,e,s,n){const i=e.interpolate(s,n);i&&t.lineTo(i.x,i.y)}var vN={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,i=[];let a,l,o,c;for(l=0;l<n;++l)a=t.getDatasetMeta(l),o=a.dataset,c=null,o&&o.options&&o instanceof ys&&(c={visible:t.isDatasetVisible(l),index:l,fill:nN(o,l,n),chart:t,axis:a.controller.options.indexAxis,scale:a.vScale,line:o}),a.$filler=c,i.push(c);for(l=0;l<n;++l)c=i[l],!(!c||c.fill===!1)&&(c.fill=sN(i,l,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),a=t.chartArea;for(let l=i.length-1;l>=0;--l){const o=i[l].$filler;o&&(o.line.updateControlPoints(a,o.axis),n&&o.fill&&jo(t.ctx,o,a))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const a=n[i].$filler;pm(a)&&jo(t.ctx,a,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!pm(n)||s.drawTime!=="beforeDatasetDraw"||jo(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const vm=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},yN=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class ym extends Et{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=de(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=De(n.font),a=i.size,l=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=vm(n,a);let d,u;s.font=i.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(l,a,o,c)+10):(u=this.maxHeight,d=this._fitCols(l,i,o,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,i){const{ctx:a,maxWidth:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=i+o;let h=e;a.textAlign="left",a.textBaseline="middle";let m=-1,p=-u;return this.legendItems.forEach((f,x)=>{const y=n+s/2+a.measureText(f.text).width;(x===0||d[d.length-1]+y+2*o>l)&&(h+=u,d[d.length-(x>0?0:1)]=0,p+=u,m++),c[x]={left:0,top:p,row:m,width:y,height:i},d[d.length-1]+=y+o}),h}_fitCols(e,s,n,i){const{ctx:a,maxHeight:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=l-e;let h=o,m=0,p=0,f=0,x=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:g,itemHeight:j}=jN(n,s,a,y,i);b>0&&p+j+2*o>u&&(h+=m+o,d.push({width:m,height:p}),f+=m+o,x++,m=p=0),c[b]={left:f,top:p,col:x,width:g,height:j},m=Math.max(m,g),p+=j+o}),h+=m,d.push({width:m,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:a}}=this,l=Bn(a,this.left,this.width);if(this.isHorizontal()){let o=0,c=He(n,this.left+i,this.right-this.lineWidths[o]);for(const d of s)o!==d.row&&(o=d.row,c=He(n,this.left+i,this.right-this.lineWidths[o])),d.top+=this.top+e+i,d.left=l.leftForLtr(l.x(c),d.width),c+=d.width+i}else{let o=0,c=He(n,this.top+e+i,this.bottom-this.columnSizes[o].height);for(const d of s)d.col!==o&&(o=d.col,c=He(n,this.top+e+i,this.bottom-this.columnSizes[o].height)),d.top=c,d.left+=this.left+i,d.left=l.leftForLtr(l.x(d.left),d.width),c+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Ml(e,this),this._draw(),Pl(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:i}=this,{align:a,labels:l}=e,o=be.color,c=Bn(e.rtl,this.left,this.width),d=De(l.font),{padding:u}=l,h=d.size,m=h/2;let p;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:f,boxHeight:x,itemHeight:y}=vm(l,h),b=function(N,k,_){if(isNaN(f)||f<=0||isNaN(x)||x<0)return;i.save();const T=G(_.lineWidth,1);if(i.fillStyle=G(_.fillStyle,o),i.lineCap=G(_.lineCap,"butt"),i.lineDashOffset=G(_.lineDashOffset,0),i.lineJoin=G(_.lineJoin,"miter"),i.lineWidth=T,i.strokeStyle=G(_.strokeStyle,o),i.setLineDash(G(_.lineDash,[])),l.usePointStyle){const C={radius:x*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:T},L=c.xPlus(N,f/2),D=k+m;kx(i,C,L,D,l.pointStyleWidth&&f)}else{const C=k+Math.max((h-x)/2,0),L=c.leftForLtr(N,f),D=en(_.borderRadius);i.beginPath(),Object.values(D).some(S=>S!==0)?ur(i,{x:L,y:C,w:f,h:x,radius:D}):i.rect(L,C,f,x),i.fill(),T!==0&&i.stroke()}i.restore()},g=function(N,k,_){dn(i,_.text,N,k+y/2,d,{strikethrough:_.hidden,textAlign:c.textAlign(_.textAlign)})},j=this.isHorizontal(),w=this._computeTitleHeight();j?p={x:He(a,this.left+u,this.right-n[0]),y:this.top+u+w,line:0}:p={x:this.left+u,y:He(a,this.top+w+u,this.bottom-s[0].height),line:0},Lx(this.ctx,e.textDirection);const v=y+u;this.legendItems.forEach((N,k)=>{i.strokeStyle=N.fontColor,i.fillStyle=N.fontColor;const _=i.measureText(N.text).width,T=c.textAlign(N.textAlign||(N.textAlign=l.textAlign)),C=f+m+_;let L=p.x,D=p.y;c.setWidth(this.width),j?k>0&&L+C+u>this.right&&(D=p.y+=v,p.line++,L=p.x=He(a,this.left+u,this.right-n[p.line])):k>0&&D+v>this.bottom&&(L=p.x=L+s[p.line].width+u,p.line++,D=p.y=He(a,this.top+w+u,this.bottom-s[p.line].height));const S=c.x(L);if(b(S,D,N),L=B1(T,L+f+m,j?L+C:this.right,e.rtl),g(c.x(L),D,N),j)p.x+=C+u;else if(typeof N.text!="string"){const E=d.lineHeight;p.y+=i0(N,E)+u}else p.y+=v}),Ix(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=De(s.font),i=Xe(s.padding);if(!s.display)return;const a=Bn(e.rtl,this.left,this.width),l=this.ctx,o=s.position,c=n.size/2,d=i.top+c;let u,h=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+d,h=He(e.align,h,this.right-m);else{const f=this.columnSizes.reduce((x,y)=>Math.max(x,y.height),0);u=d+He(e.align,this.top,this.bottom-f-e.labels.padding-this._computeTitleHeight())}const p=He(o,h,h+m);l.textAlign=a.textAlign($d(o)),l.textBaseline="middle",l.strokeStyle=s.color,l.fillStyle=s.color,l.font=n.string,dn(l,s.text,p,u,n)}_computeTitleHeight(){const e=this.options.title,s=De(e.font),n=Xe(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,i,a;if(es(e,this.left,this.right)&&es(s,this.top,this.bottom)){for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(i=a[n],es(e,i.left,i.left+i.width)&&es(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!kN(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,a=yN(i,n);i&&!a&&de(s.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!a&&de(s.onHover,[e,n,this],this)}else n&&de(s.onClick,[e,n,this],this)}}function jN(t,e,s,n,i){const a=wN(n,t,e,s),l=NN(i,n,e.lineHeight);return{itemWidth:a,itemHeight:l}}function wN(t,e,s,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((a,l)=>a.length>l.length?a:l)),e+s.size/2+n.measureText(i).width}function NN(t,e,s){let n=t;return typeof e.text!="string"&&(n=i0(e,s)),n}function i0(t,e){const s=t.text?t.text.length:0;return e*s}function kN(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var _N={id:"legend",_element:ym,start(t,e,s){const n=t.legend=new ym({ctx:t.ctx,options:s,chart:t});Ye.configure(t,n,s),Ye.addBox(t,n)},stop(t){Ye.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;Ye.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:a,useBorderRadius:l,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),u=Xe(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:a,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:l&&(o||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Gd extends Et{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const i=ge(n.text)?n.text.length:1;this._padding=Xe(n.padding);const a=i*De(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:i,right:a,options:l}=this,o=l.align;let c=0,d,u,h;return this.isHorizontal()?(u=He(o,n,a),h=s+e,d=a-n):(l.position==="left"?(u=n+e,h=He(o,i,s),c=ie*-.5):(u=a-e,h=He(o,s,i),c=ie*.5),d=i-s),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=De(s.font),a=n.lineHeight/2+this._padding.top,{titleX:l,titleY:o,maxWidth:c,rotation:d}=this._drawArgs(a);dn(e,s.text,0,0,n,{color:s.color,maxWidth:c,rotation:d,textAlign:$d(s.align),textBaseline:"middle",translation:[l,o]})}}function SN(t,e){const s=new Gd({ctx:t.ctx,options:e,chart:t});Ye.configure(t,s,e),Ye.addBox(t,s),t.titleBlock=s}var CN={id:"title",_element:Gd,start(t,e,s){SN(t,s)},stop(t){const e=t.titleBlock;Ye.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;Ye.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const na=new WeakMap;var MN={id:"subtitle",start(t,e,s){const n=new Gd({ctx:t.ctx,options:s,chart:t});Ye.configure(t,n,s),Ye.addBox(t,n),na.set(t,n)},stop(t){Ye.removeBox(t,na.get(t)),na.delete(t)},beforeUpdate(t,e,s){const n=na.get(t);Ye.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ci={average(t){if(!t.length)return!1;let e,s,n=new Set,i=0,a=0;for(e=0,s=t.length;e<s;++e){const o=t[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();n.add(c.x),i+=c.y,++a}}return a===0||n.size===0?!1:{x:[...n].reduce((o,c)=>o+c)/n.size,y:i/a}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,i=Number.POSITIVE_INFINITY,a,l,o;for(a=0,l=t.length;a<l;++a){const c=t[a].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Nc(e,d);u<i&&(i=u,o=c)}}if(o){const c=o.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function zt(t,e){return e&&(ge(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function qt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function PN(t,e){const{element:s,datasetIndex:n,index:i}=e,a=t.getDatasetMeta(n).controller,{label:l,value:o}=a.getLabelAndValue(i);return{chart:t,label:l,parsed:a.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:o,dataset:a.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function jm(t,e){const s=t.chart.ctx,{body:n,footer:i,title:a}=t,{boxWidth:l,boxHeight:o}=e,c=De(e.bodyFont),d=De(e.titleFont),u=De(e.footerFont),h=a.length,m=i.length,p=n.length,f=Xe(e.padding);let x=f.height,y=0,b=n.reduce((w,v)=>w+v.before.length+v.lines.length+v.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,h&&(x+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),b){const w=e.displayColors?Math.max(o,c.lineHeight):c.lineHeight;x+=p*w+(b-p)*c.lineHeight+(b-1)*e.bodySpacing}m&&(x+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let g=0;const j=function(w){y=Math.max(y,s.measureText(w).width+g)};return s.save(),s.font=d.string,le(t.title,j),s.font=c.string,le(t.beforeBody.concat(t.afterBody),j),g=e.displayColors?l+2+e.boxPadding:0,le(n,w=>{le(w.before,j),le(w.lines,j),le(w.after,j)}),g=0,s.font=u.string,le(t.footer,j),s.restore(),y+=f.width,{width:y,height:x}}function TN(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function DN(t,e,s,n){const{x:i,width:a}=n,l=s.caretSize+s.caretPadding;if(t==="left"&&i+a+l>e.width||t==="right"&&i-a-l<0)return!0}function LN(t,e,s,n){const{x:i,width:a}=s,{width:l,chartArea:{left:o,right:c}}=t;let d="center";return n==="center"?d=i<=(o+c)/2?"left":"right":i<=a/2?d="left":i>=l-a/2&&(d="right"),DN(d,t,e,s)&&(d="center"),d}function wm(t,e,s){const n=s.yAlign||e.yAlign||TN(t,s);return{xAlign:s.xAlign||e.xAlign||LN(t,e,s,n),yAlign:n}}function IN(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function AN(t,e,s){let{y:n,height:i}=t;return e==="top"?n+=s:e==="bottom"?n-=i+s:n-=i/2,n}function Nm(t,e,s,n){const{caretSize:i,caretPadding:a,cornerRadius:l}=t,{xAlign:o,yAlign:c}=s,d=i+a,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:p}=en(l);let f=IN(e,o);const x=AN(e,c,d);return c==="center"?o==="left"?f+=d:o==="right"&&(f-=d):o==="left"?f-=Math.max(u,m)+i:o==="right"&&(f+=Math.max(h,p)+i),{x:Oe(f,0,n.width-e.width),y:Oe(x,0,n.height-e.height)}}function ia(t,e,s){const n=Xe(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function km(t){return zt([],qt(t))}function ON(t,e,s){return zs(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function _m(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const r0={beforeTitle:Ut,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:Ut,beforeBody:Ut,beforeLabel:Ut,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return J(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Ut,afterBody:Ut,beforeFooter:Ut,footer:Ut,afterFooter:Ut};function et(t,e,s,n){const i=t[e].call(s,n);return typeof i>"u"?r0[e].call(s,n):i}class Lc extends Et{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,a=new zx(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=ON(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,i=et(n,"beforeTitle",this,e),a=et(n,"title",this,e),l=et(n,"afterTitle",this,e);let o=[];return o=zt(o,qt(i)),o=zt(o,qt(a)),o=zt(o,qt(l)),o}getBeforeBody(e,s){return km(et(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,i=[];return le(e,a=>{const l={before:[],lines:[],after:[]},o=_m(n,a);zt(l.before,qt(et(o,"beforeLabel",this,a))),zt(l.lines,et(o,"label",this,a)),zt(l.after,qt(et(o,"afterLabel",this,a))),i.push(l)}),i}getAfterBody(e,s){return km(et(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,i=et(n,"beforeFooter",this,e),a=et(n,"footer",this,e),l=et(n,"afterFooter",this,e);let o=[];return o=zt(o,qt(i)),o=zt(o,qt(a)),o=zt(o,qt(l)),o}_createItems(e){const s=this._active,n=this.chart.data,i=[],a=[],l=[];let o=[],c,d;for(c=0,d=s.length;c<d;++c)o.push(PN(this.chart,s[c]));return e.filter&&(o=o.filter((u,h,m)=>e.filter(u,h,m,n))),e.itemSort&&(o=o.sort((u,h)=>e.itemSort(u,h,n))),le(o,u=>{const h=_m(e.callbacks,u);i.push(et(h,"labelColor",this,u)),a.push(et(h,"labelPointStyle",this,u)),l.push(et(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=o,o}update(e,s){const n=this.options.setContext(this.getContext()),i=this._active;let a,l=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const o=Ci[n.position].call(this,i,this._eventPosition);l=this._createItems(n),this.title=this.getTitle(l,n),this.beforeBody=this.getBeforeBody(l,n),this.body=this.getBody(l,n),this.afterBody=this.getAfterBody(l,n),this.footer=this.getFooter(l,n);const c=this._size=jm(this,n),d=Object.assign({},o,c),u=wm(this.chart,n,d),h=Nm(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,a={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,i){const a=this.getCaretPosition(e,n,i);s.lineTo(a.x1,a.y1),s.lineTo(a.x2,a.y2),s.lineTo(a.x3,a.y3)}getCaretPosition(e,s,n){const{xAlign:i,yAlign:a}=this,{caretSize:l,cornerRadius:o}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=en(o),{x:m,y:p}=e,{width:f,height:x}=s;let y,b,g,j,w,v;return a==="center"?(w=p+x/2,i==="left"?(y=m,b=y-l,j=w+l,v=w-l):(y=m+f,b=y+l,j=w-l,v=w+l),g=y):(i==="left"?b=m+Math.max(c,u)+l:i==="right"?b=m+f-Math.max(d,h)-l:b=this.caretX,a==="top"?(j=p,w=j-l,y=b-l,g=b+l):(j=p+x,w=j+l,y=b+l,g=b-l),v=j),{x1:y,x2:b,x3:g,y1:j,y2:w,y3:v}}drawTitle(e,s,n){const i=this.title,a=i.length;let l,o,c;if(a){const d=Bn(n.rtl,this.x,this.width);for(e.x=ia(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",l=De(n.titleFont),o=n.titleSpacing,s.fillStyle=n.titleColor,s.font=l.string,c=0;c<a;++c)s.fillText(i[c],d.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+o,c+1===a&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,s,n,i,a){const l=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=a,u=De(a.bodyFont),h=ia(this,"left",a),m=i.x(h),p=c<u.lineHeight?(u.lineHeight-c)/2:0,f=s.y+p;if(a.usePointStyle){const x={radius:Math.min(d,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},y=i.leftForLtr(m,d)+d/2,b=f+c/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,_c(e,x,y,b),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,_c(e,x,y,b)}else{e.lineWidth=te(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const x=i.leftForLtr(m,d),y=i.leftForLtr(i.xPlus(m,1),d-2),b=en(l.borderRadius);Object.values(b).some(g=>g!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,ur(e,{x,y:f,w:d,h:c,radius:b}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),ur(e,{x:y,y:f+1,w:d-2,h:c-2,radius:b}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(x,f,d,c),e.strokeRect(x,f,d,c),e.fillStyle=l.backgroundColor,e.fillRect(y,f+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:i}=this,{bodySpacing:a,bodyAlign:l,displayColors:o,boxHeight:c,boxWidth:d,boxPadding:u}=n,h=De(n.bodyFont);let m=h.lineHeight,p=0;const f=Bn(n.rtl,this.x,this.width),x=function(_){s.fillText(_,f.x(e.x+p),e.y+m/2),e.y+=m+a},y=f.textAlign(l);let b,g,j,w,v,N,k;for(s.textAlign=l,s.textBaseline="middle",s.font=h.string,e.x=ia(this,y,n),s.fillStyle=n.bodyColor,le(this.beforeBody,x),p=o&&y!=="right"?l==="center"?d/2+u:d+2+u:0,w=0,N=i.length;w<N;++w){for(b=i[w],g=this.labelTextColors[w],s.fillStyle=g,le(b.before,x),j=b.lines,o&&j.length&&(this._drawColorBox(s,e,w,f,n),m=Math.max(h.lineHeight,c)),v=0,k=j.length;v<k;++v)x(j[v]),m=h.lineHeight;le(b.after,x)}p=0,m=h.lineHeight,le(this.afterBody,x),e.y-=a}drawFooter(e,s,n){const i=this.footer,a=i.length;let l,o;if(a){const c=Bn(n.rtl,this.x,this.width);for(e.x=ia(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",l=De(n.footerFont),s.fillStyle=n.footerColor,s.font=l.string,o=0;o<a;++o)s.fillText(i[o],c.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+n.footerSpacing}}drawBackground(e,s,n,i){const{xAlign:a,yAlign:l}=this,{x:o,y:c}=e,{width:d,height:u}=n,{topLeft:h,topRight:m,bottomLeft:p,bottomRight:f}=en(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(o+h,c),l==="top"&&this.drawCaret(e,s,n,i),s.lineTo(o+d-m,c),s.quadraticCurveTo(o+d,c,o+d,c+m),l==="center"&&a==="right"&&this.drawCaret(e,s,n,i),s.lineTo(o+d,c+u-f),s.quadraticCurveTo(o+d,c+u,o+d-f,c+u),l==="bottom"&&this.drawCaret(e,s,n,i),s.lineTo(o+p,c+u),s.quadraticCurveTo(o,c+u,o,c+u-p),l==="center"&&a==="left"&&this.drawCaret(e,s,n,i),s.lineTo(o,c+h),s.quadraticCurveTo(o,c,o+h,c),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,i=n&&n.x,a=n&&n.y;if(i||a){const l=Ci[e.position].call(this,this._active,this._eventPosition);if(!l)return;const o=this._size=jm(this,e),c=Object.assign({},l,this._size),d=wm(s,e,c),u=Nm(e,c,d,s);(i._to!==u.x||a._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const l=Xe(s.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,i,s),Lx(e,s.textDirection),a.y+=l.top,this.drawTitle(a,e,s),this.drawBody(a,e,s),this.drawFooter(a,e,s),Ix(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,i=e.map(({datasetIndex:o,index:c})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[c],index:c}}),a=!sl(n,i),l=this._positionChanged(i,s);(a||l)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],l=this._getActiveElements(e,a,s,n),o=this._positionChanged(l,e),c=s||!sl(l,a)||o;return c&&(this._active=l,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,i){const a=this.options;if(e.type==="mouseout")return[];if(!i)return s.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&l.reverse(),l}_positionChanged(e,s){const{caretX:n,caretY:i,options:a}=this,l=Ci[a.position].call(this,e,s);return l!==!1&&(n!==l.x||i!==l.y)}}H(Lc,"positioners",Ci);var EN={id:"tooltip",_element:Lc,positioners:Ci,afterInit(t,e,s){s&&(t.tooltip=new Lc({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:r0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},RN=Object.freeze({__proto__:null,Colors:Kw,Decimation:Jw,Filler:vN,Legend:_N,SubTitle:MN,Title:CN,Tooltip:EN});const zN=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function FN(t,e,s,n){const i=t.indexOf(e);if(i===-1)return zN(t,e,s,n);const a=t.lastIndexOf(e);return i!==a?s:i}const BN=(t,e)=>t===null?null:Oe(Math.round(t),0,e);function Sm(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Ic extends pn{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:i,label:a}of s)n[i]===a&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(J(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:FN(n,e,G(s,e),this._addedLabels),BN(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,i=[];let a=this.getLabels();a=e===0&&s===a.length-1?a:a.slice(e,s+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let l=e;l<=s;l++)i.push({value:l});return i}getLabelForValue(e){return Sm.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}H(Ic,"id","category"),H(Ic,"defaults",{ticks:{callback:Sm}});function WN(t,e){const s=[],{bounds:i,step:a,min:l,max:o,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:m}=t,p=a||1,f=u-1,{min:x,max:y}=e,b=!J(l),g=!J(o),j=!J(d),w=(y-x)/(h+1);let v=jh((y-x)/f/p)*p,N,k,_,T;if(v<1e-14&&!b&&!g)return[{value:x},{value:y}];T=Math.ceil(y/v)-Math.floor(x/v),T>f&&(v=jh(T*v/f/p)*p),J(c)||(N=Math.pow(10,c),v=Math.ceil(v*N)/N),i==="ticks"?(k=Math.floor(x/v)*v,_=Math.ceil(y/v)*v):(k=x,_=y),b&&g&&a&&I1((o-l)/a,v/1e3)?(T=Math.round(Math.min((o-l)/v,u)),v=(o-l)/T,k=l,_=o):j?(k=b?l:k,_=g?o:_,T=d-1,v=(_-k)/T):(T=(_-k)/v,Fi(T,Math.round(T),v/1e3)?T=Math.round(T):T=Math.ceil(T));const C=Math.max(wh(v),wh(k));N=Math.pow(10,J(c)?C:c),k=Math.round(k*N)/N,_=Math.round(_*N)/N;let L=0;for(b&&(m&&k!==l?(s.push({value:l}),k<l&&L++,Fi(Math.round((k+L*v)*N)/N,l,Cm(l,w,t))&&L++):k<l&&L++);L<T;++L){const D=Math.round((k+L*v)*N)/N;if(g&&D>o)break;s.push({value:D})}return g&&m&&_!==o?s.length&&Fi(s[s.length-1].value,o,Cm(o,w,t))?s[s.length-1].value=o:s.push({value:o}):(!g||_===o)&&s.push({value:_}),s}function Cm(t,e,{horizontal:s,minRotation:n}){const i=Dt(n),a=(s?Math.sin(i):Math.cos(i))||.001,l=.75*e*(""+t).length;return Math.min(e/a,l)}class cl extends pn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return J(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:a}=this;const l=c=>i=s?i:c,o=c=>a=n?a:c;if(e){const c=Vt(i),d=Vt(a);c<0&&d<0?o(0):c>0&&d>0&&l(0)}if(i===a){let c=a===0?1:Math.abs(a*.05);o(a+c),e||l(i-c)}this.min=i,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},a=this._range||this,l=WN(i,a);return e.bounds==="ticks"&&px(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-s)/Math.max(e.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return jr(e,this.chart.options.locale,this.options.ticks.format)}}class Ac extends cl{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Ne(e)?e:0,this.max=Ne(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=Dt(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,a.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}H(Ac,"id","linear"),H(Ac,"defaults",{ticks:{callback:Cl.formatters.numeric}});const mr=t=>Math.floor(bs(t)),Hs=(t,e)=>Math.pow(10,mr(t)+e);function Mm(t){return t/Math.pow(10,mr(t))===1}function Pm(t,e,s){const n=Math.pow(10,s),i=Math.floor(t/n);return Math.ceil(e/n)-i}function $N(t,e){const s=e-t;let n=mr(s);for(;Pm(t,e,n)>10;)n++;for(;Pm(t,e,n)<10;)n--;return Math.min(n,mr(t))}function HN(t,{min:e,max:s}){e=lt(t.min,e);const n=[],i=mr(e);let a=$N(e,s),l=a<0?Math.pow(10,Math.abs(a)):1;const o=Math.pow(10,a),c=i>a?Math.pow(10,i):0,d=Math.round((e-c)*l)/l,u=Math.floor((e-c)/o/10)*o*10;let h=Math.floor((d-u)/Math.pow(10,a)),m=lt(t.min,Math.round((c+u+h*Math.pow(10,a))*l)/l);for(;m<s;)n.push({value:m,major:Mm(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,l=a>=0?1:l),m=Math.round((c+u+h*Math.pow(10,a))*l)/l;const p=lt(t.max,m);return n.push({value:p,major:Mm(p),significand:h}),n}class Oc extends pn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=cl.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return Ne(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Ne(e)?Math.max(0,e):null,this.max=Ne(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ne(this._userMin)&&(this.min=e===Hs(this.min,0)?Hs(this.min,-1):Hs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,i=this.max;const a=o=>n=e?n:o,l=o=>i=s?i:o;n===i&&(n<=0?(a(1),l(10)):(a(Hs(n,-1)),l(Hs(i,1)))),n<=0&&a(Hs(i,-1)),i<=0&&l(Hs(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=HN(s,this);return e.bounds==="ticks"&&px(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":jr(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=bs(e),this._valueRange=bs(this.max)-bs(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(bs(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}H(Oc,"id","logarithmic"),H(Oc,"defaults",{ticks:{callback:Cl.formatters.logarithmic,major:{enabled:!0}}});function Ec(t){const e=t.ticks;if(e.display&&t.display){const s=Xe(e.backdropPadding);return G(e.font&&e.font.size,be.font.size)+s.height}return 0}function VN(t,e,s){return s=ge(s)?s:[s],{w:Q1(t,e.string,s),h:s.length*e.lineHeight}}function Tm(t,e,s,n,i){return t===n||t===i?{start:e-s/2,end:e+s/2}:t<n||t>i?{start:e-s,end:e}:{start:e,end:e+s}}function UN(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],i=[],a=t._pointLabels.length,l=t.options.pointLabels,o=l.centerPointLabels?ie/a:0;for(let c=0;c<a;c++){const d=l.setContext(t.getPointLabelContext(c));i[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+i[c],o),h=De(d.font),m=VN(t.ctx,h,t._pointLabels[c]);n[c]=m;const p=Ve(t.getIndexAngle(c)+o),f=Math.round(Bd(p)),x=Tm(f,u.x,m.w,0,180),y=Tm(f,u.y,m.h,90,270);YN(s,e,p,x,y)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=KN(t,n,i)}function YN(t,e,s,n,i){const a=Math.abs(Math.sin(s)),l=Math.abs(Math.cos(s));let o=0,c=0;n.start<e.l?(o=(e.l-n.start)/a,t.l=Math.min(t.l,e.l-o)):n.end>e.r&&(o=(n.end-e.r)/a,t.r=Math.max(t.r,e.r+o)),i.start<e.t?(c=(e.t-i.start)/l,t.t=Math.min(t.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/l,t.b=Math.max(t.b,e.b+c))}function qN(t,e,s){const n=t.drawingArea,{extra:i,additionalAngle:a,padding:l,size:o}=s,c=t.getPointPosition(e,n+i+l,a),d=Math.round(Bd(Ve(c.angle+Se))),u=ZN(c.y,o.h,d),h=QN(d),m=GN(c.x,o.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:m,top:u,right:m+o.w,bottom:u+o.h}}function XN(t,e){if(!e)return!0;const{left:s,top:n,right:i,bottom:a}=t;return!(ss({x:s,y:n},e)||ss({x:s,y:a},e)||ss({x:i,y:n},e)||ss({x:i,y:a},e))}function KN(t,e,s){const n=[],i=t._pointLabels.length,a=t.options,{centerPointLabels:l,display:o}=a.pointLabels,c={extra:Ec(a)/2,additionalAngle:l?ie/i:0};let d;for(let u=0;u<i;u++){c.padding=s[u],c.size=e[u];const h=qN(t,u,c);n.push(h),o==="auto"&&(h.visible=XN(h,d),h.visible&&(d=h))}return n}function QN(t){return t===0||t===180?"center":t<180?"left":"right"}function GN(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function ZN(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function JN(t,e,s){const{left:n,top:i,right:a,bottom:l}=s,{backdropColor:o}=e;if(!J(o)){const c=en(e.borderRadius),d=Xe(e.backdropPadding);t.fillStyle=o;const u=n-d.left,h=i-d.top,m=a-n+d.width,p=l-i+d.height;Object.values(c).some(f=>f!==0)?(t.beginPath(),ur(t,{x:u,y:h,w:m,h:p,radius:c}),t.fill()):t.fillRect(u,h,m,p)}}function e5(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){const a=t._pointLabelItems[i];if(!a.visible)continue;const l=n.setContext(t.getPointLabelContext(i));JN(s,l,a);const o=De(l.font),{x:c,y:d,textAlign:u}=a;dn(s,t._pointLabels[i],c,d+o.lineHeight/2,o,{color:l.color,textAlign:u,textBaseline:"middle"})}}function a0(t,e,s,n){const{ctx:i}=t;if(s)i.arc(t.xCenter,t.yCenter,e,0,pe);else{let a=t.getPointPosition(0,e);i.moveTo(a.x,a.y);for(let l=1;l<n;l++)a=t.getPointPosition(l,e),i.lineTo(a.x,a.y)}}function t5(t,e,s,n,i){const a=t.ctx,l=e.circular,{color:o,lineWidth:c}=e;!l&&!n||!o||!c||s<0||(a.save(),a.strokeStyle=o,a.lineWidth=c,a.setLineDash(i.dash||[]),a.lineDashOffset=i.dashOffset,a.beginPath(),a0(t,s,l,n),a.closePath(),a.stroke(),a.restore())}function s5(t,e,s){return zs(t,{label:s,index:e,type:"pointLabel"})}class Mi extends cl{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Xe(Ec(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=Ne(e)&&!isNaN(e)?e:0,this.max=Ne(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ec(this.options))}generateTickLabels(e){cl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const i=de(this.options.pointLabels.callback,[s,n],this);return i||i===0?i:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?UN(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,i){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,i))}getIndexAngle(e){const s=pe/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ve(e*s+Dt(n))}getDistanceFromCenterForValue(e){if(J(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(J(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return s5(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const i=this.getIndexAngle(e)-Se+n;return{x:Math.cos(i)*s+this.xCenter,y:Math.sin(i)*s+this.yCenter,angle:i}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:i,bottom:a}=this._pointLabelItems[e];return{left:s,top:n,right:i,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),a0(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:i,border:a}=s,l=this._pointLabels.length;let o,c,d;if(s.pointLabels.display&&e5(this,l),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const m=this.getContext(h),p=i.setContext(m),f=a.setContext(m);t5(this,p,c,l,f)}}),n.display){for(e.save(),o=l-1;o>=0;o--){const u=n.setContext(this.getPointLabelContext(o)),{color:h,lineWidth:m}=u;!m||!h||(e.lineWidth=m,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(o,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let a,l;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),u=De(d.font);if(a=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,l=e.measureText(o.label).width,e.fillStyle=d.backdropColor;const h=Xe(d.backdropPadding);e.fillRect(-l/2-h.left,-a-u.size/2-h.top,l+h.width,u.size+h.height)}dn(e,o.label,0,-a,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}H(Mi,"id","radialLinear"),H(Mi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Cl.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),H(Mi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),H(Mi,"descriptors",{angleLines:{_fallback:"grid"}});const Il={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},st=Object.keys(Il);function Dm(t,e){return t-e}function Lm(t,e){if(J(e))return null;const s=t._adapter,{parser:n,round:i,isoWeekday:a}=t._parseOpts;let l=e;return typeof n=="function"&&(l=n(l)),Ne(l)||(l=typeof n=="string"?s.parse(l,n):s.parse(l)),l===null?null:(i&&(l=i==="week"&&(Qn(a)||a===!0)?s.startOf(l,"isoWeek",a):s.startOf(l,i)),+l)}function Im(t,e,s,n){const i=st.length;for(let a=st.indexOf(t);a<i-1;++a){const l=Il[st[a]],o=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((s-e)/(o*l.size))<=n)return st[a]}return st[i-1]}function n5(t,e,s,n,i){for(let a=st.length-1;a>=st.indexOf(s);a--){const l=st[a];if(Il[l].common&&t._adapter.diff(i,n,l)>=e-1)return l}return st[s?st.indexOf(s):0]}function i5(t){for(let e=st.indexOf(t)+1,s=st.length;e<s;++e)if(Il[st[e]].common)return st[e]}function Am(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:i}=Wd(s,e),a=s[n]>=e?s[n]:s[i];t[a]=!0}}function r5(t,e,s,n){const i=t._adapter,a=+i.startOf(e[0].value,n),l=e[e.length-1].value;let o,c;for(o=a;o<=l;o=+i.add(o,1,n))c=s[o],c>=0&&(e[c].major=!0);return e}function Om(t,e,s){const n=[],i={},a=e.length;let l,o;for(l=0;l<a;++l)o=e[l],i[o]=l,n.push({value:o,major:!1});return a===0||!s?n:r5(t,n,i,s)}class fr extends pn{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),i=this._adapter=new mj._date(e.adapters.date);i.init(s),zi(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Lm(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:i,max:a,minDefined:l,maxDefined:o}=this.getUserBounds();function c(d){!l&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!o&&!isNaN(d.max)&&(a=Math.max(a,d.max))}(!l||!o)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=Ne(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),a=Ne(a)&&!isNaN(a)?a:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,l=this.max,o=R1(i,a,l);return this._unit=s.unit||(n.autoSkip?Im(s.minUnit,this.min,this.max,this._getLabelCapacity(a)):n5(this,o.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:i5(this._unit),this.initOffsets(i),e.reverse&&o.reverse(),Om(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?s=1-i:s=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?n=a:n=(a-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;s=Oe(s,0,l),n=Oe(n,0,l),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,i=this.options,a=i.time,l=a.unit||Im(a.minUnit,s,n,this._getLabelCapacity(s)),o=G(i.ticks.stepSize,1),c=l==="week"?a.isoWeekday:!1,d=Qn(c)||c===!0,u={};let h=s,m,p;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":l),e.diff(n,s,l)>1e5*o)throw new Error(s+" and "+n+" are too far apart with stepSize of "+o+" "+l);const f=i.ticks.source==="data"&&this.getDataTimestamps();for(m=h,p=0;m<n;m=+e.add(m,o,l),p++)Am(u,m,f);return(m===n||i.bounds==="ticks"||p===1)&&Am(u,m,f),Object.keys(u).sort(Dm).map(x=>+x)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const i=this.options.time.displayFormats,a=this._unit,l=s||i[a];return this._adapter.format(e,l)}_tickFormatFunction(e,s,n,i){const a=this.options,l=a.ticks.callback;if(l)return de(l,[e,s,n],this);const o=a.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&o[c],h=d&&o[d],m=n[s],p=d&&h&&m&&m.major;return this._adapter.format(e,i||(p?h:u))}generateTickLabels(e){let s,n,i;for(s=0,n=e.length;s<n;++s)i=e[s],i.label=this._tickFormatFunction(i.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,i=Dt(this.isHorizontal()?s.maxRotation:s.minRotation),a=Math.cos(i),l=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*a+o*l,h:n*l+o*a}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,a=this._tickFormatFunction(e,0,Om(this,[e],this._majorUnit),i),l=this._getLabelSize(a),o=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)e=e.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)e.push(Lm(this,i[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bx(e.sort(Dm))}}H(fr,"id","time"),H(fr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ra(t,e,s){let n=0,i=t.length-1,a,l,o,c;s?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=ts(t,"pos",e)),{pos:a,time:o}=t[n],{pos:l,time:c}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=ts(t,"time",e)),{time:a,pos:o}=t[n],{time:l,pos:c}=t[i]);const d=l-a;return d?o+(c-o)*(e-a)/d:o}class Rc extends fr{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=ra(s,this.min),this._tableRange=ra(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,i=[],a=[];let l,o,c,d,u;for(l=0,o=e.length;l<o;++l)d=e[l],d>=s&&d<=n&&i.push(d);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(l=0,o=i.length;l<o;++l)u=i[l+1],c=i[l-1],d=i[l],Math.round((u+c)/2)!==d&&a.push({time:d,pos:l/(o-1)});return a}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(ra(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return ra(this._table,n*this._tableRange+this._minPos,!0)}}H(Rc,"id","timeseries"),H(Rc,"defaults",fr.defaults);var a5=Object.freeze({__proto__:null,CategoryScale:Ic,LinearScale:Ac,LogarithmicScale:Oc,RadialLinearScale:Mi,TimeScale:fr,TimeSeriesScale:Rc});const l5=[hj,$w,RN,a5];Gt.register(...l5);const Em=()=>{const{adminDashboardData:t,getAllCompanyAdmins:e,getPendingCompanies:s}=Q(),n=M.useRef(null),i=M.useRef(null),a=M.useRef(null),l=M.useRef(null),o=e().length,c=s().length;M.useEffect(()=>{const u=(h,m,p,f,x)=>{if(h.current){m.current&&m.current.destroy();const y=h.current.getContext("2d");if(y){const b=Object.keys(f),g=Object.values(f);m.current=new Gt(y,{type:p,data:{labels:b,datasets:[{label:x,data:g,backgroundColor:["#10b981","#f97316","#3b82f6","#ef4444","#8b5cf6","#64748b"],hoverOffset:4}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})}}};return u(n,a,"pie",t.usersByRegion,"   "),u(i,l,"doughnut",t.usersByIndustry,"   "),()=>{a.current&&a.current.destroy(),l.current&&l.current.destroy()}},[t]);const d=[{name:" ",value:o,icon:""},{name:"  ",value:c,icon:""},{name:" ",value:t.accountStatus.active,icon:""},{name:" ",value:t.accountStatus.inactive,icon:""}];return r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-8",children:"   "}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:d.map(u=>r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center",children:[r.jsx("div",{className:"text-4xl ms-4",children:u.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"text-3xl font-bold text-slate-800",children:u.value}),r.jsx("div",{className:"text-slate-500",children:u.name})]})]},u.name))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 text-center",children:"   "}),r.jsx("div",{className:"h-80 flex justify-center items-center",children:r.jsx("canvas",{ref:n})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 text-center",children:"   "}),r.jsx("div",{className:"h-80 flex justify-center items-center",children:r.jsx("canvas",{ref:i})})]})]})]})},o5=({onNavigateToRegister:t,onNavigateToAdminLogin:e})=>{const{login:s}=Q(),[n,i]=M.useState(""),[a,l]=M.useState(""),[o,c]=M.useState(!1),d=async h=>{h.preventDefault(),c(!0),await s(n,a),c(!1)},u="w-full px-4 py-3 bg-slate-100 text-slate-800 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 placeholder-slate-500 text-right";return r.jsxs("div",{className:"w-full max-w-md p-8 sm:p-12 space-y-6 bg-white rounded-2xl shadow-xl text-center",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Food Safety est."}),r.jsx("p",{className:"text-2xl font-semibold text-slate-600 mt-1",children:"  "})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:" "}),r.jsx("p",{className:"text-slate-600",children:"  !      ."})]}),r.jsxs("form",{className:"space-y-5 text-right",onSubmit:d,children:[r.jsx("div",{children:r.jsx("input",{id:"email-address",name:"email",type:"email",required:!0,value:n,onChange:h=>i(h.target.value),className:u,placeholder:" "})}),r.jsx("div",{children:r.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:a,onChange:h=>l(h.target.value),className:u,placeholder:" "})}),r.jsx("div",{className:"pt-4",children:r.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:bg-slate-400",children:o?"  ...":" "})})]}),r.jsxs("p",{className:"mt-6 text-center text-sm text-slate-600",children:["  "," ",r.jsx("a",{href:"#",onClick:h=>{h.preventDefault(),t()},className:"font-medium text-emerald-600 hover:text-emerald-500",children:"  "})]}),r.jsxs("p",{className:"mt-4 text-center text-xs text-slate-500",children:["   "," ",r.jsx("a",{href:"#",onClick:h=>{h.preventDefault(),e()},className:"font-medium text-slate-600 hover:text-slate-800 underline",children:"  "})]})]})},c5=({onNavigateToLogin:t,onRegisterSuccess:e})=>{const{register:s}=Q(),[n,i]=M.useState(""),[a,l]=M.useState(""),[o,c]=M.useState(""),[d,u]=M.useState("factory"),[h,m]=M.useState(!1),p=async y=>{y.preventDefault(),m(!0);const b=await s(o,n,a,d);b?e(b):m(!1)},f="w-full px-4 py-3 bg-slate-700 text-white border border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 placeholder-slate-400 text-right";return r.jsxs("div",{className:"w-full max-w-md p-8 sm:p-12 space-y-6 bg-white rounded-2xl shadow-xl text-center",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Food Safety est."}),r.jsx("p",{className:"text-2xl font-semibold text-slate-600 mt-1",children:"  "})]}),r.jsx("div",{children:r.jsx("h2",{className:"mt-6 text-center text-4xl font-bold tracking-tight text-slate-900",children:"   "})}),r.jsxs("form",{className:"mt-8 space-y-5 text-right",onSubmit:p,children:[r.jsxs("div",{className:"space-y-5",children:[r.jsx("input",{name:"companyName",type:"text",required:!0,value:o,onChange:y=>c(y.target.value),className:f,placeholder:" "}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{name:"businessType",required:!0,value:d,onChange:y=>u(y.target.value),className:"w-full px-4 py-3 bg-white text-slate-800 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-right appearance-none",children:[r.jsx("option",{value:"factory",children:""}),r.jsx("option",{value:"kitchen",children:"  / "}),r.jsx("option",{value:"restaurant",children:""})]}),r.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center px-3 text-slate-700",children:r.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),r.jsx("input",{name:"email",type:"email",required:!0,value:n,onChange:y=>i(y.target.value),className:f,placeholder:"  "}),r.jsx("input",{name:"password",type:"password",required:!0,value:a,onChange:y=>l(y.target.value),className:f,placeholder:" "})]}),r.jsx("div",{className:"pt-4",children:r.jsx("button",{type:"submit",disabled:h,className:"group relative flex w-full justify-center rounded-md border border-transparent bg-emerald-600 py-3 px-4 text-lg font-medium text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:bg-slate-400",children:h?" ...":" "})})]}),r.jsxs("p",{className:"mt-6 text-center text-sm text-slate-600",children:["  "," ",r.jsx("a",{href:"#",onClick:y=>{y.preventDefault(),t()},className:"font-medium text-emerald-600 hover:text-emerald-500",children:"  "})]})]})},d5=({onNavigateToCompanyLogin:t})=>{const{login:e}=Q(),[s,n]=M.useState(""),[i,a]=M.useState(""),[l,o]=M.useState(!1),c=async d=>{d.preventDefault(),o(!0),await e(s,i),o(!1)};return r.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-lg shadow-lg",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Food Safety est."}),r.jsx("p",{className:"text-xl font-semibold text-slate-600 mt-1",children:"  "})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-slate-900",children:"  "}),r.jsx("p",{className:"mt-2 text-center text-sm text-slate-600",children:" !"})]}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[r.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email-address",className:"sr-only",children:" "}),r.jsx("input",{id:"email-address",name:"email",type:"email",required:!0,value:s,onChange:d=>n(d.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-slate-300 placeholder-slate-500 text-slate-900 rounded-t-md focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 focus:z-10 sm:text-sm",placeholder:" "})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"sr-only",children:" "}),r.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:i,onChange:d=>a(d.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-slate-300 placeholder-slate-500 text-slate-900 rounded-b-md focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 focus:z-10 sm:text-sm",placeholder:" "})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-slate-800 hover:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 disabled:bg-slate-400",children:l?" ...":""})})]}),r.jsx("p",{className:"mt-2 text-center text-sm text-slate-600",children:r.jsx("a",{href:"#",onClick:d=>{d.preventDefault(),t()},className:"font-medium text-emerald-600 hover:text-emerald-500",children:"   "})})]})},Ce=({isOpen:t,onClose:e,title:s,children:n})=>t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-200",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:s}),r.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-2 rounded-full hover:bg-slate-100",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6 overflow-y-auto",children:n})]})}):null,Nt=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Qe=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),wr=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),u5=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5L7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})}),aa={name:"",description:"",barcode:"",sizeOrWeight:"",ingredients:[],category:"lunch",allergens:[],preparationSteps:[],cookingInstructions:[],servingMethod:{packaging:"",servingCondition:"immediate",hotHoldingTemperature:"",coldHoldingTemperature:"",requiresExpiryPrinting:!1},headChefId:""},h5={name:"",amount:0,unit:"g",supplierId:"",reorderPoint:0},m5={temperature:"",time:"",tools:"",responsiblePersonId:""},f5=()=>{var ke,_t,Nr,ii,kr,_r,Fs,Sr,ri,Cr,xn;const{products:t,suppliers:e,team:s,addProduct:n,updateProduct:i,deleteProduct:a,showNotification:l,setActivePage:o,setHaccpProductIdForPlan:c,setPrintablePlanProductId:d,processFlows:u,ccpDeterminations:h,hasPermission:m,getCompanyBusinessType:p}=Q(),f=p(),x=f==="kitchen"||f==="restaurant",[y,b]=M.useState(!1),[g,j]=M.useState(null),[w,v]=M.useState(aa),[N,k]=M.useState(!1);M.useEffect(()=>{var F;const R=(F=w.ingredients)==null?void 0:F.map(ae=>ae.name).filter(ae=>(ae==null?void 0:ae.trim())!=="");if(!R||R.length===0){v(ae=>({...ae,allergens:[]}));return}const V=setTimeout(async()=>{k(!0);try{const ae=await Iy(R);v(Ie=>({...Ie,allergens:ae}))}catch(ae){console.error("Allergen analysis failed:",ae),l("   .","error")}finally{k(!1)}},1500);return()=>{clearTimeout(V)}},[JSON.stringify((ke=w.ingredients)==null?void 0:ke.map(R=>R.name))]),M.useEffect(()=>{var Ie,gn;if(!y)return;const R=(Ie=w.servingMethod)==null?void 0:Ie.servingCondition;let V="",F=!1;R==="immediate"?V=" ":R==="internal_transport"?V="  ":R==="external_transport"&&(V="    ",F=!0),[" ","  ","    ",""].includes(((gn=w.servingMethod)==null?void 0:gn.packaging)||"")&&D("servingMethod","packaging",V),D("servingMethod","requiresExpiryPrinting",F)},[(_t=w.servingMethod)==null?void 0:_t.servingCondition,y]);const _=R=>{R?(j(R),v({...aa,...JSON.parse(JSON.stringify(R)),cookingInstructions:R.cookingInstructions||[]})):(j(null),v(aa)),b(!0)},T=()=>{b(!1),j(null),v(aa)},C=async()=>{if(!w.name){l("   /.","error");return}g?(await i({...g,...w}),l("   !","success")):(await n(w),l("   !","success")),T()},L=(R,V)=>{v(F=>({...F,[R]:V}))},D=(R,V,F)=>{v(ae=>{const Ie=ae[R]||{},{packaging:gn,servingCondition:cs,requiresExpiryPrinting:Mr,...Al}=Ie;return{...ae,[R]:{...Al,packaging:gn??"",servingCondition:cs??"immediate",requiresExpiryPrinting:Mr??!1,[V]:F}}})},S=(R,V,F)=>{const ae=[...w.ingredients??[]];ae[R][V]=F,v(Ie=>({...Ie,ingredients:ae}))},E=()=>{const R={...h5,id:`new_${Date.now()}`};v(V=>({...V,ingredients:[...V.ingredients??[],R]}))},O=R=>{v(V=>{var F;return{...V,ingredients:(F=V.ingredients)==null?void 0:F.filter((ae,Ie)=>Ie!==R)}})},z=(R,V)=>{const F=[...w.preparationSteps??[]];F[R]=V,v(ae=>({...ae,preparationSteps:F}))},X=()=>{v(R=>({...R,preparationSteps:[...R.preparationSteps??[],""]}))},W=R=>{v(V=>{var F;return{...V,preparationSteps:(F=V.preparationSteps)==null?void 0:F.filter((ae,Ie)=>Ie!==R)}})},U=(R,V,F)=>{const ae=[...w.cookingInstructions??[]];ae[R][V]=F,v(Ie=>({...Ie,cookingInstructions:ae}))},K=()=>{const R={...m5,id:`cook_${Date.now()}`};v(V=>({...V,cookingInstructions:[...V.cookingInstructions??[],R]}))},re=R=>{v(V=>{var F;return{...V,cookingInstructions:(F=V.cookingInstructions)==null?void 0:F.filter((ae,Ie)=>Ie!==R)}})},ne=R=>{const V=u.find(F=>F.productId===R);return!!V&&V.steps.length>0&&V.steps.every(F=>F.hazardAnalysis)&&!!h[R]},Le={breakfast:"",lunch:"",dinner:"",coffee_break:" ",desserts:"",banquets:"",custom:" "},ce="w-full px-3 py-2 bg-slate-800 text-white border border-slate-600 rounded-md placeholder-slate-400",Be="w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-slate-800";return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:x?"  ()":" "}),m("product:create")&&r.jsxs("button",{onClick:()=>_(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition",children:[r.jsx(Nt,{className:"h-5 w-5"}),x?" /":" "]})]}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:t.length===0?r.jsxs("p",{className:"text-slate-500 text-center",children:["    ",x?"":""," ."]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(R=>r.jsxs("div",{className:"border rounded-lg shadow-sm flex flex-col bg-slate-50",children:[r.jsxs("div",{className:"p-4 flex-grow",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:R.name}),x&&R.category&&r.jsx("span",{className:"text-xs font-semibold bg-emerald-100 text-emerald-800 px-2 py-1 rounded-full",children:Le[R.category]})]}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:R.description}),r.jsx("h4",{className:"text-sm font-semibold text-slate-700 mt-3",children:":"}),r.jsxs("ul",{className:"text-xs text-slate-600 list-disc list-inside mt-1 space-y-1",children:[R.ingredients.slice(0,4).map(V=>r.jsxs("li",{children:[V.name," (",V.amount," ",V.unit,")"]},V.id)),R.ingredients.length>4&&r.jsx("li",{children:"..."})]})]}),r.jsxs("div",{className:"p-3 bg-slate-100 border-t flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>{c(R.id),o("ProcessFlow")},className:"text-slate-600 hover:text-blue-700 p-1.5 rounded-full hover:bg-slate-200 transition",title:" ",children:r.jsx(u5,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>{d(R.id)},disabled:!ne(R.id),className:"text-slate-600 hover:text-emerald-700 p-1.5 rounded-full hover:bg-slate-200 transition disabled:opacity-50 disabled:cursor-not-allowed",title:x?"  ":"   ",children:r.jsx(on,{className:"h-5 w-5"})}),r.jsx("div",{className:"border-l h-5 mx-1"}),m("product:edit")&&r.jsx("button",{onClick:()=>_(R),className:"text-slate-600 hover:text-blue-700 p-1.5 rounded-full hover:bg-slate-200 transition",title:"",children:r.jsx(wr,{className:"h-5 w-5"})}),m("product:delete")&&r.jsx("button",{onClick:()=>a(R.id),className:"text-slate-600 hover:text-red-700 p-1.5 rounded-full hover:bg-slate-200 transition",title:"",children:r.jsx(Qe,{className:"h-5 w-5"})})]})]},R.id))})}),x?r.jsx(Ce,{isOpen:y,onClose:T,title:g?" ":"  ",children:r.jsxs("div",{className:"space-y-6 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("select",{value:w.category,onChange:R=>L("category",R.target.value),className:"w-full px-4 py-3 bg-white text-slate-800 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",children:Object.entries(Le).map(([R,V])=>r.jsx("option",{value:R,children:V},R))}),r.jsx("input",{type:"text",placeholder:" ",value:w.name,onChange:R=>L("name",R.target.value),className:"w-full px-4 py-3 bg-slate-800 text-white border border-slate-600 rounded-md placeholder-slate-400"})]}),r.jsx("textarea",{placeholder:" ",value:w.description,onChange:R=>L("description",R.target.value),className:"w-full px-4 py-3 bg-slate-800 text-white border border-slate-600 rounded-md placeholder-slate-400",rows:2}),r.jsxs("fieldset",{className:"p-4 border-t-2 border-emerald-500",children:[r.jsx("legend",{className:"px-2 font-bold text-lg",children:""}),r.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:(Nr=w.ingredients)==null?void 0:Nr.map((R,V)=>r.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-slate-100 rounded-md",children:[r.jsx("button",{onClick:()=>O(V),className:"text-red-500 hover:text-red-700 p-2",children:r.jsx(Qe,{className:"h-5 w-5"})}),r.jsx("div",{className:"flex-1 min-w-[120px]",children:r.jsxs("select",{value:R.supplierId,onChange:F=>S(V,"supplierId",F.target.value),className:`${Be} text-xs`,children:[r.jsx("option",{value:"",children:" "}),e.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})}),r.jsx("div",{className:"w-24",children:r.jsx("input",{type:"number",min:"0",value:R.amount,onChange:F=>S(V,"amount",Number(F.target.value)),className:ce,placeholder:""})}),r.jsx("div",{className:"w-28",children:r.jsxs("select",{value:R.unit,onChange:F=>S(V,"unit",F.target.value),className:Be,children:[r.jsx("option",{value:"g",children:""}),r.jsx("option",{value:"kg",children:""}),r.jsx("option",{value:"ml",children:""}),r.jsx("option",{value:"l",children:""}),r.jsx("option",{value:"piece",children:" / "})]})}),r.jsx("div",{className:"w-28",children:r.jsx("input",{type:"number",min:"0",value:R.reorderPoint||"",onChange:F=>S(V,"reorderPoint",Number(F.target.value)),placeholder:" ",className:ce,title:"  "})}),r.jsx("div",{className:"flex-1 min-w-[150px]",children:r.jsx("input",{type:"text",value:R.name,onChange:F=>S(V,"name",F.target.value),placeholder:" ",className:ce})})]},R.id))}),r.jsx("button",{onClick:E,className:"text-sm text-emerald-600 hover:underline mt-2",children:"+  "})]}),r.jsxs("div",{className:"p-3 bg-amber-50 border-l-4 border-amber-400 rounded-r-md",children:[r.jsxs("h4",{className:"font-semibold text-amber-800 flex items-center gap-2",children:[r.jsx(Od,{className:"h-5 w-5"}),"   ( )"]}),N?r.jsx("p",{className:"text-sm text-slate-500 animate-pulse",children:" ..."}):w.allergens&&w.allergens.length>0?r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:w.allergens.map(R=>r.jsx("span",{className:"bg-amber-200 text-amber-900 text-xs font-bold px-2 py-1 rounded-full",children:R},R))}):r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"     ."})]}),r.jsxs("fieldset",{className:"p-4 border-t-2 border-emerald-500",children:[r.jsx("legend",{className:"px-2 font-bold text-lg",children:" "}),r.jsx("div",{className:"space-y-2",children:(ii=w.preparationSteps)==null?void 0:ii.map((R,V)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold",children:[V+1,"."]}),r.jsx("input",{type:"text",value:R,onChange:F=>z(V,F.target.value),className:"w-full px-4 py-2 bg-slate-800 text-white border border-slate-600 rounded-md"}),r.jsx("button",{onClick:()=>W(V),className:"text-red-500",children:r.jsx(Qe,{className:"h-5 w-5"})})]},V))}),r.jsx("button",{onClick:X,className:"text-sm text-emerald-600 hover:underline mt-2",children:"+   "})]}),r.jsxs("fieldset",{className:"p-4 border-t-2 border-emerald-500",children:[r.jsx("legend",{className:"px-2 font-bold text-lg",children:" "}),r.jsx("div",{className:"space-y-3",children:(kr=w.cookingInstructions)==null?void 0:kr.map((R,V)=>r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-center",children:[r.jsxs("select",{value:R.responsiblePersonId,onChange:F=>U(V,"responsiblePersonId",F.target.value),className:"w-full px-3 py-2 border rounded-md bg-white",children:[r.jsx("option",{value:"",children:"..."}),s.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]}),r.jsx("input",{type:"text",placeholder:"",value:R.tools,onChange:F=>U(V,"tools",F.target.value),className:"w-full px-3 py-2 bg-slate-800 text-white border border-slate-600 rounded-md"}),r.jsx("input",{type:"text",placeholder:" ()",value:R.time,onChange:F=>U(V,"time",F.target.value),className:"w-full px-3 py-2 bg-slate-800 text-white border border-slate-600 rounded-md"}),r.jsx("input",{type:"text",placeholder:" (C)",value:R.temperature,onChange:F=>U(V,"temperature",F.target.value),className:"w-full px-3 py-2 bg-slate-800 text-white border border-slate-600 rounded-md"}),r.jsx("button",{onClick:()=>re(V),className:"text-red-500 justify-self-center",children:r.jsx(Qe,{className:"h-5 w-5"})})]},R.id))}),r.jsx("button",{onClick:K,className:"text-sm text-emerald-600 hover:underline mt-2",children:"+   "})]}),r.jsxs("fieldset",{className:"p-4 border-t-2 border-emerald-500",children:[r.jsx("legend",{className:"px-2 font-bold text-lg",children:"  "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("select",{value:((_r=w.servingMethod)==null?void 0:_r.servingCondition)||"immediate",onChange:R=>D("servingMethod","servingCondition",R.target.value),className:"w-full px-3 py-2 border rounded-md bg-white",children:[r.jsx("option",{value:"immediate",children:"  "}),r.jsx("option",{value:"internal_transport",children:" "}),r.jsx("option",{value:"external_transport",children:" "})]}),r.jsx("input",{type:"text",placeholder:" ",value:((Fs=w.servingMethod)==null?void 0:Fs.packaging)||"",onChange:R=>D("servingMethod","packaging",R.target.value),className:"w-full px-3 py-2 bg-slate-800 text-white border border-slate-600 rounded-md"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:[r.jsx("input",{type:"text",placeholder:"  ()",value:((Sr=w.servingMethod)==null?void 0:Sr.hotHoldingTemperature)||"",onChange:R=>D("servingMethod","hotHoldingTemperature",R.target.value),className:"w-full px-3 py-2 bg-slate-800 text-white border border-slate-600 rounded-md"}),r.jsx("input",{type:"text",placeholder:"  ()",value:((ri=w.servingMethod)==null?void 0:ri.coldHoldingTemperature)||"",onChange:R=>D("servingMethod","coldHoldingTemperature",R.target.value),className:"w-full px-3 py-2 bg-slate-800 text-white border border-slate-600 rounded-md"})]}),((Cr=w.servingMethod)==null?void 0:Cr.servingCondition)==="external_transport"&&r.jsx("div",{className:"mt-3",children:r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[r.jsx("input",{type:"checkbox",checked:((xn=w.servingMethod)==null?void 0:xn.requiresExpiryPrinting)||!1,onChange:R=>D("servingMethod","requiresExpiryPrinting",R.target.checked),className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),"     "]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"font-semibold",children:"   "}),r.jsxs("select",{value:w.headChefId,onChange:R=>L("headChefId",R.target.value),className:"w-full px-3 py-2 border rounded-md bg-white mt-1",children:[r.jsx("option",{value:"",children:" ..."}),s.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsx("button",{onClick:C,className:"bg-emerald-600 text-white px-5 py-2.5 rounded-md hover:bg-emerald-700",children:g?" ":" "})})]})}):r.jsx(Ce,{isOpen:y,onClose:T,title:g?" ":"  ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:" ",value:w.name,onChange:R=>v(V=>({...V,name:R.target.value})),className:ce}),r.jsx("textarea",{placeholder:" ",value:w.description,onChange:R=>v(V=>({...V,description:R.target.value})),className:ce,rows:2}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",placeholder:"/",value:w.sizeOrWeight,onChange:R=>v(V=>({...V,sizeOrWeight:R.target.value})),className:ce}),r.jsx("input",{type:"text",placeholder:"",value:w.barcode,onChange:R=>v(V=>({...V,barcode:R.target.value})),className:ce})]}),r.jsx("h4",{className:"font-semibold pt-4 border-t",children:""}),r.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:w.ingredients.map((R,V)=>r.jsxs("div",{className:"p-3 bg-slate-100 rounded-md border grid grid-cols-1 md:grid-cols-5 gap-3",children:[r.jsx("input",{type:"text",value:R.name,onChange:F=>S(V,"name",F.target.value),placeholder:" ",className:`md:col-span-2 ${ce}`}),r.jsx("input",{type:"number",min:"0",value:R.amount,onChange:F=>S(V,"amount",Number(F.target.value)),className:ce}),r.jsxs("select",{value:R.unit,onChange:F=>S(V,"unit",F.target.value),className:Be,children:[r.jsx("option",{value:"g",children:""}),r.jsx("option",{value:"kg",children:""}),r.jsx("option",{value:"ml",children:""}),r.jsx("option",{value:"l",children:""}),r.jsx("option",{value:"piece",children:" / "})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{value:R.supplierId,onChange:F=>S(V,"supplierId",F.target.value),className:`flex-grow text-xs ${Be}`,children:[r.jsx("option",{value:"",children:" ..."}),e.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]}),r.jsx("button",{onClick:()=>O(V),className:"text-red-500 hover:text-red-700 flex-shrink-0",children:r.jsx(Qe,{className:"h-5 w-5"})})]})]},R.id))}),r.jsx("button",{onClick:E,className:"text-sm text-emerald-600 hover:underline",children:"+   "}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsx("button",{onClick:C,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:g?" ":" "})})]})})]})},Rm=({className:t,onClick:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",onClick:e,children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),Jn=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 5.25a3 3 0 01-3 3-3 3 0 01-3-3m6 0a3 3 0 00-3-3-3 3 0 00-3 3m6 0v7.5a3 3 0 01-3 3-3 3 0 01-3-3v-7.5m6 0l-3-3-3 3m0 0l-3 3m3-3l3 3m-3-3v12"})}),zm={name:"",materials:[],phone:"",email:"",address:"",commercialRegistrationNo:"",taxNo:"",qualityCertificates:"",requiredTests:[],otherRequirements:""},Fm={date:new Date().toISOString().slice(0,10),evaluator:"",score:3,notes:""},p5=()=>{const{suppliers:t,addSupplier:e,updateSupplier:s,deleteSupplier:n,addSupplierEvaluation:i,showNotification:a,hasPermission:l,currentUser:o}=Q(),[c,d]=M.useState(!1),[u,h]=M.useState(!1),[m,p]=M.useState(null),[f,x]=M.useState(zm),[y,b]=M.useState(Fm),[g,j]=M.useState(null),[w,v]=M.useState(!1);M.useEffect(()=>{const D=f.materials;if(!c||!D||D.length===0||D.every(E=>E.trim()==="")){x(E=>({...E,requiredTests:[]}));return}const S=setTimeout(async()=>{v(!0);try{const E=await Ay(D.join(", "));x(O=>({...O,requiredTests:E}))}catch(E){console.error("Test generation failed:",E),a("  .","error")}finally{v(!1)}},1500);return()=>clearTimeout(S)},[JSON.stringify(f.materials),c]);const N=D=>{D?(p(D),x(JSON.parse(JSON.stringify(D)))):(p(null),x(zm)),d(!0)},k=()=>{d(!1),p(null)},_=async()=>{if(!f.name){a("   .","error");return}m?(await s({...m,...f}),a("    !","success")):(await e(f),a("   !","success")),k()},T=D=>{j(D),b({...Fm,evaluator:(o==null?void 0:o.name)||(o==null?void 0:o.companyName)||""}),h(!0)},C=async()=>{g&&(await i(g,y),a("  .","success"),h(!1),j(null))},L=D=>!Array.isArray(D)||D.length===0?"N/A":(D.reduce((E,O)=>E+O.score,0)/D.length).toFixed(1);return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" "}),l("supplier:create")&&r.jsxs("button",{onClick:()=>N(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition",children:[r.jsx(Nt,{className:"h-5 w-5"}),"  "]})]}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:t.length===0?r.jsx("p",{className:"text-slate-500 text-center",children:"     ."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:" "}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:""}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:" "}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:" "}),r.jsx("th",{className:"px-6 py-3"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:t.map(D=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm font-medium text-slate-900",children:D.name}),r.jsx("div",{className:"text-sm text-slate-600",children:D.address})]}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm text-slate-900",children:D.phone}),r.jsx("div",{className:"text-sm text-slate-600",children:D.email})]}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:D.materials.join(", ")}),r.jsxs("td",{className:"px-6 py-4 text-center font-bold text-slate-700",children:[L(D.evaluations)," / 5"]}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[l("supplier:evaluate")&&r.jsx("button",{onClick:()=>T(D.id),className:"text-yellow-500 hover:text-yellow-700",title:" ",children:r.jsx(Rm,{className:"h-5 w-5"})}),l("supplier:edit")&&r.jsx("button",{onClick:()=>N(D),className:"text-blue-600 hover:text-blue-900",title:"",children:r.jsx(wr,{className:"h-5 w-5"})}),l("supplier:delete")&&r.jsx("button",{onClick:()=>n(D.id),className:"text-red-600 hover:text-red-900",title:"",children:r.jsx(Qe,{className:"h-5 w-5"})})]})})]},D.id))})]})})}),r.jsx(Ce,{isOpen:c,onClose:k,title:m?"  ":"  ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:" ",value:f.name,onChange:D=>x(S=>({...S,name:D.target.value}))}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",placeholder:"  ",value:f.commercialRegistrationNo||"",onChange:D=>x(S=>({...S,commercialRegistrationNo:D.target.value}))}),r.jsx("input",{type:"text",placeholder:" ",value:f.taxNo||"",onChange:D=>x(S=>({...S,taxNo:D.target.value}))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",placeholder:" ",value:f.phone,onChange:D=>x(S=>({...S,phone:D.target.value}))}),r.jsx("input",{type:"email",placeholder:" ",value:f.email,onChange:D=>x(S=>({...S,email:D.target.value}))})]}),r.jsx("input",{type:"text",placeholder:"",value:f.address,onChange:D=>x(S=>({...S,address:D.target.value}))}),r.jsxs("fieldset",{className:"p-4 border-t-2 border-emerald-500",children:[r.jsx("legend",{className:"px-2 font-bold text-lg",children:" "}),r.jsx("input",{type:"text",placeholder:"  (  )",value:f.materials.join(", "),onChange:D=>x(S=>({...S,materials:D.target.value.split(",").map(E=>E.trim())}))}),r.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border-l-4 border-blue-400 rounded-r-md",children:[r.jsxs("h4",{className:"font-semibold text-blue-800 flex items-center gap-2",children:[r.jsx(Jn,{className:"h-5 w-5"}),"   ( AI)"]}),w?r.jsx("p",{className:"text-sm text-slate-500 animate-pulse",children:"    ..."}):f.requiredTests&&f.requiredTests.length>0?r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:f.requiredTests.map(D=>r.jsx("span",{className:"bg-blue-200 text-blue-900 text-xs font-bold px-2 py-1 rounded-full",children:D},D))}):r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"       ."})]})]}),r.jsx("textarea",{placeholder:"  ()",value:f.qualityCertificates||"",onChange:D=>x(S=>({...S,qualityCertificates:D.target.value})),rows:2}),r.jsx("textarea",{placeholder:"  ()",value:f.otherRequirements||"",onChange:D=>x(S=>({...S,otherRequirements:D.target.value})),rows:2}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:_,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:m?" ":" "})})]})}),r.jsx(Ce,{isOpen:u,onClose:()=>h(!1),title:"  ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:" ( 1  5)"}),r.jsx("div",{className:"flex items-center gap-2 mt-1",children:[1,2,3,4,5].map(D=>r.jsx(Rm,{onClick:()=>b(S=>({...S,score:D})),className:`h-8 w-8 cursor-pointer ${y.score>=D?"text-yellow-400":"text-slate-300"}`},D))})]}),r.jsx("textarea",{placeholder:" ",rows:4,value:y.notes,onChange:D=>b(S=>({...S,notes:D.target.value}))}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:C,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:" "})})]})})]})},x5={product:{label:"",permissions:{"product:view":" ","product:create":" ","product:edit":" ","product:delete":" "}},supplier:{label:"",permissions:{"supplier:view":" ","supplier:create":" ","supplier:edit":" ","supplier:delete":" ","supplier:evaluate":" "}},inventory:{label:"",permissions:{"inventory:view":" ","inventory:manage":"  ()"}},production:{label:"",permissions:{"production:view":"  ","production:create":"  ","production:manage":"  "}},sales:{label:"",permissions:{"sales:view":"  ","sales:create":"   ","sales:delete":" "}},haccp:{label:"",permissions:{"haccp:view_water_plan":"  ","haccp:manage_water_plan":"  ","haccp:view_temp_monitoring":"  ","haccp:manage_temp_monitoring":"  "}},prp:{label:" ",permissions:{"prp:view":"  ","prp:manage":"   "}},maintenance:{label:"",permissions:{"maintenance:view":"  ","maintenance:manage":"  "}},team:{label:" ",permissions:{"team:view":"  ","team:invite":"  ","team:edit":"  ","team:delete":" ","team:assign_permissions":" "}},task:{label:"",permissions:{"task:view":" ","task:create":" ","task:edit":" "}},training:{label:"",permissions:{"training:view":"  ","training:create":"  ","training:delete":"  ","training:manage_attendees":" "}},traceability:{label:" ",permissions:{"traceability:view":"  ","traceability:manage":"  "}}},l0={personalHygiene:{title:" ",description:"   ."},cleaningAndSanitation:{title:" ",description:"    ."},pestControl:{title:" ",description:"     ."},supplierControl:{title:"  ",description:"   ."}},o0=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),No={name:"",email:"",password:"",companyId:"",companyName:"",role:"TEAM_MEMBER",joined:"",position:"",haccpRole:"",responsibilities:"",status:"pending",businessType:"factory",permissions:[]},g5=()=>{const{team:t,addTeamMember:e,updateTeamMember:s,deleteTeamMember:n,showNotification:i,resetTeamMemberPassword:a,hasPermission:l}=Q(),[o,c]=M.useState(!1),[d,u]=M.useState(No),[h,m]=M.useState(!1),p="w-full px-4 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500",f=j=>{j?(u({...JSON.parse(JSON.stringify(j)),password:""}),m(!0)):(u(No),m(!1)),c(!0)},x=()=>{c(!1),u(No),m(!1)},y=j=>{const{name:w,value:v}=j.target;u(N=>({...N,[w]:v}))},b=(j,w)=>{u(v=>{const N=v.permissions||[];return w?{...v,permissions:[...new Set([...N,j])]}:{...v,permissions:N.filter(k=>k!==j)}})},g=async j=>{if(j.preventDefault(),!d.name||!d.email){i("     .","error");return}if(h)await s(d),i("    .","success");else{const{id:w,companyId:v,companyName:N,role:k,joined:_,status:T,businessType:C,...L}=d;await e(L),i("   .","success")}x()};return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"  "}),l("team:invite")&&r.jsxs("button",{onClick:()=>f(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition",children:[r.jsx(Nt,{className:"h-5 w-5"}),"  "]})]}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:t.length===0?r.jsx("p",{className:"text-slate-500 text-center",children:"      ."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:""}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:" "}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"  "}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:""}),r.jsx("th",{className:"px-6 py-3"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:t.map(j=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm font-medium text-slate-900",children:j.name}),r.jsx("div",{className:"text-sm text-slate-600",children:j.email})]}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:j.position}),r.jsxs("td",{className:"px-6 py-4 text-sm text-slate-700",children:[j.haccpRole,r.jsxs("span",{className:"block text-xs text-slate-500",children:[" ",j.permissions.length," "]})]}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${j.status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:j.status==="active"?"":""})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[l("team:assign_permissions")&&r.jsx("button",{onClick:()=>a(j.id),className:"text-slate-500 hover:text-yellow-600",title:"   ",children:r.jsx(o0,{className:"h-5 w-5"})}),l("team:edit")&&r.jsx("button",{onClick:()=>f(j),className:"text-slate-500 hover:text-blue-600",title:"",children:r.jsx(wr,{className:"h-5 w-5"})}),l("team:delete")&&r.jsx("button",{onClick:()=>n(j.id),className:"text-slate-500 hover:text-red-600",title:"",children:r.jsx(Qe,{className:"h-5 w-5"})})]})})]},j.id))})]})})}),r.jsx(Ce,{isOpen:o,onClose:x,title:h?"  ":"  ",children:r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("input",{name:"name",type:"text",placeholder:" ",value:d.name,onChange:y,className:p,required:!0}),r.jsx("input",{name:"email",type:"email",placeholder:" ",value:d.email,onChange:y,className:p,required:!0})]}),!h&&r.jsx("input",{name:"password",type:"password",placeholder:"  ",value:d.password||"",onChange:y,className:p,required:!0}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("input",{name:"position",type:"text",placeholder:" ",value:d.position,onChange:y,className:p}),r.jsx("input",{name:"haccpRole",type:"text",placeholder:"   ",value:d.haccpRole,onChange:y,className:p})]}),r.jsx("textarea",{name:"responsibilities",placeholder:" ",value:d.responsibilities,onChange:y,className:p,rows:3}),l("team:assign_permissions")&&r.jsxs("fieldset",{className:"p-4 border-t-2 border-emerald-500",children:[r.jsx("legend",{className:"px-2 font-bold text-lg",children:" "}),r.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto pr-2 mt-2",children:Object.entries(x5).map(([j,w])=>r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-base mt-2 mb-2 text-slate-700",children:w.label}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-y-2 gap-x-4",children:Object.entries(w.permissions).map(([v,N])=>r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500",checked:d.permissions.includes(v),onChange:k=>b(v,k.target.checked)}),N]},v))})]},j))})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsx("button",{type:"submit",className:"bg-emerald-600 text-white px-5 py-2.5 rounded-md hover:bg-emerald-700",children:h?" ":" "})})]})})]})},b5=({task:t,onClick:e})=>{const{team:s,hasPermission:n}=Q(),i=s.find(l=>l.id===t.assignedTo),a=l=>{l.dataTransfer.setData("taskId",t.id)};return r.jsxs("div",{draggable:n("task:edit"),onDragStart:a,onClick:()=>e(t),className:"bg-white p-4 rounded-lg shadow-sm border cursor-pointer hover:shadow-md hover:border-emerald-500","aria-label":`Task: ${t.title}`,children:[r.jsx("h4",{className:"font-semibold text-slate-800",children:t.title}),i&&r.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[": ",i.name]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-slate-400",children:[t.progress,"%"]}),r.jsx("div",{className:"w-16 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500",style:{width:`${t.progress}%`}})})]})]})},v5=({title:t,status:e,color:s,onCardClick:n})=>{const{tasks:i,updateTask:a}=Q(),[l,o]=M.useState(!1),c=i.filter(m=>m.status===e),d=m=>{m.preventDefault(),o(!0)},u=()=>{o(!1)},h=async m=>{m.preventDefault(),o(!1);const p=m.dataTransfer.getData("taskId");if(!p)return;const f=i.find(x=>x.id===p);f&&f.status!==e&&await a({...f,status:e})};return r.jsxs("div",{onDragOver:d,onDragLeave:u,onDrop:h,className:`flex flex-col bg-slate-100 p-4 rounded-lg border-t-4 ${s} transition-colors ${l?"bg-emerald-100":""}`,children:[r.jsxs("h3",{className:"font-bold text-slate-700 mb-4 flex justify-between flex-shrink-0",children:[r.jsx("span",{children:t}),r.jsx("span",{className:"bg-slate-200 text-slate-600 text-xs font-semibold px-2 py-1 rounded-full",children:c.length})]}),r.jsx("div",{className:"space-y-4 overflow-y-auto h-full pr-1",children:c.length>0?c.map(m=>r.jsx(b5,{task:m,onClick:n},m.id)):r.jsx("div",{className:`flex items-center justify-center h-32 border-2 border-dashed border-slate-300 rounded-md transition-colors ${l?"border-emerald-400 bg-emerald-50":""}`,children:r.jsx("p",{className:"text-sm text-center text-slate-400",children:l?"  ":"   "})})})]})},y5=()=>{var _;const{team:t,tasks:e,addTask:s,updateTask:n,addTaskComment:i,currentUser:a,showNotification:l,hasPermission:o}=Q(),[c,d]=M.useState(!1),[u,h]=M.useState(!1),[m,p]=M.useState(null),[f,x]=M.useState(""),[y,b]=M.useState({title:"",assignedTo:"",description:"",status:"todo"}),g=async()=>{if(!y.title||!y.assignedTo){l("     .","error");return}await s(y),l("   .","success"),b({title:"",assignedTo:"",description:"",status:"todo"}),d(!1)},j=T=>{p(T),h(!0)},w=()=>{h(!1),p(null)},v=T=>{if(m){const C={...m,progress:T};p(C),n(C)}},N=async()=>{m&&f.trim()&&(await i(m.id,f),x(""))};tf.useEffect(()=>{if(m){const T=e.find(C=>C.id===m.id);T&&p(T)}},[e,m]);const k=[{title:" ",status:"todo",color:"border-blue-500"},{title:" ",status:"inprogress",color:"border-orange-500"},{title:" ",status:"done",color:"border-green-500"}];return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" "}),o("task:create")&&r.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition","aria-label":"  ",children:[r.jsx(Nt,{className:"h-5 w-5"})," "]})]}),r.jsx("div",{className:"flex-grow grid grid-cols-1 md:grid-cols-3 gap-6",children:k.map(T=>r.jsx(v5,{title:T.title,status:T.status,color:T.color,onCardClick:j},T.status))}),r.jsx(Ce,{isOpen:c,onClose:()=>d(!1),title:"  ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{htmlFor:"task-title",className:"block text-sm font-medium text-slate-700",children:" "}),r.jsx("input",{id:"task-title",type:"text",placeholder:" ",value:y.title,onChange:T=>b(C=>({...C,title:T.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md text-slate-800"}),r.jsx("label",{htmlFor:"task-description",className:"block text-sm font-medium text-slate-700",children:" "}),r.jsx("textarea",{id:"task-description",placeholder:"  ",value:y.description,onChange:T=>b(C=>({...C,description:T.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md text-slate-800",rows:3}),r.jsx("label",{htmlFor:"assign-to",className:"block text-sm font-medium text-slate-700",children:" "}),r.jsxs("select",{id:"assign-to",value:y.assignedTo,onChange:T=>b(C=>({...C,assignedTo:T.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md bg-white text-slate-800",children:[r.jsx("option",{value:"",disabled:!0,children:"  ..."}),t.map(T=>r.jsx("option",{value:T.id,children:T.name},T.id))]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:g,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:" "})})]})}),m&&r.jsx(Ce,{isOpen:u,onClose:w,title:m.title,children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:""}),r.jsx("p",{className:"p-3 bg-slate-50 rounded-md text-sm text-slate-600",children:m.description||"    ."})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-slate-700 mb-2",children:[" : ",m.progress,"%"]}),r.jsx("input",{type:"range",min:"0",max:"100",value:m.progress,onChange:T=>v(Number(T.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",disabled:!((a==null?void 0:a.role)==="COMPANY_ADMIN"||((_=t.find(T=>T.id===m.assignedTo))==null?void 0:_.email)===(a==null?void 0:a.email))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-3",children:""}),r.jsxs("div",{className:"space-y-3 max-h-48 overflow-y-auto bg-slate-50 p-3 rounded-md",children:[m.comments.map((T,C)=>r.jsxs("div",{className:`flex flex-col ${T.authorId===(a==null?void 0:a.id)?"items-end":"items-start"}`,children:[r.jsxs("div",{className:`rounded-lg px-3 py-2 max-w-xs ${T.authorId===(a==null?void 0:a.id)?"bg-emerald-600 text-white":"bg-white border"}`,children:[r.jsx("p",{className:"text-sm font-bold",children:T.authorName}),r.jsx("p",{className:"text-sm",children:T.text})]}),r.jsx("span",{className:"text-xs text-slate-400 mt-1",children:new Date(T.timestamp).toLocaleTimeString("ar-SA")})]},C)),m.comments.length===0&&r.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"  ."})]}),r.jsxs("div",{className:"mt-3 flex gap-2",children:[r.jsx("input",{type:"text",value:f,onChange:T=>x(T.target.value),placeholder:" ...",className:"flex-grow px-3 py-2 border border-slate-300 rounded-md text-slate-800"}),r.jsx("button",{onClick:N,className:"bg-slate-700 text-white px-4 rounded-md hover:bg-slate-800",children:""})]})]})]})})]})},j5=()=>{const{companyInfo:t,showNotification:e,updateCompanyInfo:s}=Q(),[n,i]=M.useState(t);M.useEffect(()=>{i(t)},[t]);const a=o=>{const{name:c,value:d}=o.target;i(u=>({...u,[c]:d}))},l=async()=>{await s(n),e("    .","success")};return r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:" "}),r.jsxs("form",{className:"space-y-6",onSubmit:o=>o.preventDefault(),children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("input",{type:"text",id:"companyName",name:"companyName",value:n.companyName,onChange:a,className:"w-full px-4 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-slate-700 mb-1",children:""}),r.jsx("input",{type:"text",id:"address",name:"address",value:n.address,onChange:a,className:"w-full px-4 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"contactPerson",className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:n.contactPerson,onChange:a,className:"w-full px-4 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("input",{type:"text",id:"phone",name:"phone",value:n.phone,onChange:a,className:"w-full px-4 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:a,className:"w-full px-4 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500"})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{type:"button",onClick:l,className:"bg-emerald-600 text-white px-5 py-2.5 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:" "})})]})]})},c0=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.536 8.464a5 5 0 10-7.07 7.072m7.07-7.072a5 5 0 11-7.07 7.072m7.07-7.072L12 12m0 0l-3.536-3.536M12 12l3.536 3.536M12 12l-3.536 3.536"})}),d0=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l-6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2"})}),u0=({className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),h0=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.471-2.471a.563.563 0 01.8 0l2.5 2.5a.563.563 0 010 .8l-2.47 2.471m-4.5-4.5L9 17.75l-6-6 4.75-2.25L11.42 15.17z"})}),m0=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.03 1.125 0 1.131.094 1.976 1.057 1.976 2.192V7.5m-9 3.75h12M18.75 11.25v6.75a2.25 2.25 0 01-2.25 2.25H7.5A2.25 2.25 0 015.25 18V11.25"})}),f0=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-5 8l2 2 4-4"})}),w5=()=>{const{products:t,processFlows:e,setActivePage:s,ccpDeterminations:n,criticalLimits:i,monitoringProcedures:a,correctiveActions:l,verificationProcedures:o,recordKeeping:c,haccpProductIdForPlan:d,setHaccpProductIdForPlan:u}=Q(),[h,m]=M.useState("");M.useEffect(()=>{d&&(m(d),u(null))},[d,u]);const p=[{id:"ProcessFlow",title:" 1:  ",description:"            .",icon:Jn,isComplete:f=>{const x=e.find(y=>y.productId===f);return!!x&&x.steps.length>0&&x.steps.every(y=>y.hazardAnalysis)}},{id:"CCPDetermination",title:" 2:    ",description:"           (CCPs)   .",icon:c0,isComplete:f=>!!n[f]},{id:"CriticalLimits",title:" 3:   ",description:"             (   ).",icon:d0,isComplete:f=>!!i[f]},{id:"Monitoring",title:" 4:  ",description:"           .",icon:u0,isComplete:f=>!!a[f]},{id:"CorrectiveActions",title:" 5:  ",description:"          .",icon:h0,isComplete:f=>!!l[f]},{id:"Verification",title:" 6:  ",description:"         .",icon:f0,isComplete:f=>!!o[f]},{id:"RecordKeeping",title:" 7:   ",description:"        .",icon:m0,isComplete:f=>!!c[f]}];return r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"   "})}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("p",{className:"text-slate-600 mb-6",children:"          .       ."}),r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{htmlFor:"product-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"     :"}),r.jsxs("select",{id:"product-select",value:h,onChange:f=>m(f.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md bg-white shadow-sm focus:ring-emerald-500 focus:border-emerald-500",children:[r.jsx("option",{value:"",disabled:!0,children:"--   --"}),t.map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]})]}),h?r.jsx("div",{className:"space-y-4",children:p.map(f=>{const x=f.isComplete(h);return r.jsxs("div",{className:`p-5 border rounded-lg flex items-start gap-4 transition-all ${x?"border-green-200 bg-green-50":"bg-white"}`,children:[r.jsx("div",{className:`flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center ${x?"bg-green-500":"bg-slate-200"}`,children:r.jsx(f.icon,{className:`h-6 w-6 ${x?"text-white":"text-slate-600"}`})}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("h3",{className:"font-bold text-slate-800",children:f.title}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:f.description})]}),r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[x?r.jsxs("div",{className:"flex items-center gap-1 text-xs font-semibold text-green-600",children:[r.jsx(fn,{className:"h-4 w-4"}),r.jsx("span",{children:""})]}):r.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"  "}),r.jsx("button",{onClick:()=>s(f.id),className:`px-4 py-1.5 text-sm rounded-md font-semibold transition ${x?"bg-white border border-slate-300 text-slate-700 hover:bg-slate-50":"bg-emerald-600 text-white hover:bg-emerald-700"}`,children:x?" ":" "})]})]},f.id)})}):r.jsxs("div",{className:"text-center py-10 border-2 border-dashed rounded-lg",children:[r.jsx(on,{className:"h-16 w-16 mx-auto text-slate-300"}),r.jsx("p",{className:"mt-4 text-slate-500",children:"        ."})]})]})})]})},kt=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"})}),N5=({className:t})=>r.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),k5=({className:t})=>r.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),_5=()=>{const{products:t,processFlows:e,addOrUpdateProcessFlow:s,generateAndSaveHazardAnalysis:n,showNotification:i,haccpProductIdForPlan:a,setHaccpProductIdForPlan:l,setPrintableProcessFlowProductId:o}=Q(),[c,d]=M.useState(""),[u,h]=M.useState([]),[m,p]=M.useState(!1);M.useEffect(()=>{a&&(d(a),l(null))},[a,l]),M.useEffect(()=>{const v=e.find(N=>N.productId===c);if(v)h(v.steps);else{const N=t.find(k=>k.id===c);if(N&&Array.isArray(N.preparationSteps)&&N.preparationSteps.length>0){const k=N.preparationSteps.map((_,T)=>({id:`prep_${Date.now()}_${T}`,stepNumber:T+1,description:_,hazardAnalysis:null}));h(k),i("    .","success")}else h([])}},[c,e,t]);const f=async()=>{if(!c)return;const v=u.map((k,_)=>({...k,stepNumber:_+1}));await s({id:c,productId:c,steps:v}),i("    .","success")},x=(v,N)=>{h(u.map(k=>k.id===v?{...k,description:N}:k))},y=()=>{const v={id:`step_${Date.now()}`,stepNumber:u.length+1,description:"",hazardAnalysis:null};h([...u,v])},b=v=>{h(u.filter(N=>N.id!==v))},g=(v,N)=>{if(N==="up"&&v===0||N==="down"&&v===u.length-1)return;const k=[...u],_=N==="up"?v-1:v+1;[k[v],k[_]]=[k[_],k[v]],h(k)},j=async()=>{const v=e.find(N=>N.productId===c);if(!v||v.steps.length===0||v.steps.some(N=>!N.description.trim())){i("           .","error");return}p(!0),await n(v),p(!1)},w=v=>{if(!v)return r.jsx("p",{className:"text-xs text-slate-500 italic mt-1",children:"    ."});const N=v.controlPointType,k=N==="CCP"?"text-red-600":N==="oPRP"?"text-blue-600":"text-green-600";return r.jsxs("div",{className:"text-xs space-y-2 mt-2",children:[r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",v.hazards.map(_=>`${_.description} (${_.type})`).join(", ")]}),r.jsxs("div",{children:[r.jsx("strong",{children:" :"})," ",v.controlMeasures]}),r.jsxs("div",{children:[r.jsx("strong",{children:" :"})," ",r.jsx("span",{className:`font-bold ${k}`,children:N})," (",v.justification,")"]})]})};return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"    "}),r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"     :"}),r.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full max-w-lg px-4 py-2 border border-slate-300 rounded-md bg-white",children:[r.jsx("option",{value:"",disabled:!0,children:"--   --"}),t.map(v=>r.jsx("option",{value:v.id,children:v.name},v.id))]})]}),c&&r.jsxs("div",{children:[r.jsx("div",{className:"space-y-3",children:u.map((v,N)=>r.jsx("div",{className:"p-4 border rounded-md bg-white shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("button",{onClick:()=>g(N,"up"),disabled:N===0,className:"p-1 disabled:opacity-30 text-slate-500 hover:text-slate-800",children:r.jsx(N5,{className:"h-5 w-5"})}),r.jsxs("span",{className:"font-bold text-slate-700 select-none",children:[N+1,"."]}),r.jsx("button",{onClick:()=>g(N,"down"),disabled:N===u.length-1,className:"p-1 disabled:opacity-30 text-slate-500 hover:text-slate-800",children:r.jsx(k5,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("input",{type:"text",value:v.description,onChange:k=>x(v.id,k.target.value),className:"w-full px-4 py-3 bg-white text-slate-800 border border-slate-300 rounded-md placeholder-slate-400",placeholder:"   ..."}),r.jsx("div",{className:"pr-2 pt-2",children:w(v.hazardAnalysis)})]}),r.jsx("button",{onClick:()=>b(v.id),className:"p-1 text-red-500 hover:text-red-700 self-start",children:r.jsx(Qe,{className:"h-5 w-5"})})]})},v.id))}),r.jsxs("button",{onClick:y,className:"mt-4 flex items-center gap-2 text-sm text-emerald-600 hover:underline",children:[r.jsx(Nt,{className:"h-4 w-4"}),"   "]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-300 flex items-center justify-between",children:[r.jsx("button",{onClick:f,className:"bg-blue-600 text-white px-5 py-2.5 rounded-md hover:bg-blue-700",children:"  "}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>o(c),disabled:!u.every(v=>v.hazardAnalysis),className:"flex items-center gap-2 text-slate-600 hover:text-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(kt,{className:"h-5 w-5"})," "]}),r.jsxs("button",{onClick:j,disabled:m||u.length===0||u.some(v=>!v.description.trim()),className:"bg-emerald-600 text-white px-5 py-2.5 rounded-md hover:bg-emerald-700 disabled:bg-slate-400 flex items-center gap-2",children:[r.jsx(Jn,{className:"h-5 w-5"}),m?" ...":"  (AI)"]})]})]})]})]})]})},S5=t=>{if(!t)return[];const s=t.trim().split(`
`).filter(l=>l.trim().startsWith("|")&&l.trim().endsWith("|"));if(s.length<3)return[];const i=s[0].slice(1,-1).split("|").map(l=>l.trim());return s.slice(2).map(l=>{const o=l.slice(1,-1).split("|").map(d=>d.trim()),c={};return i.forEach((d,u)=>{d&&(c[d]=o[u]||"")}),c})},C5=()=>{var p,f;const{products:t,processFlows:e,ccpDeterminations:s,generateAndSaveCCPs:n}=Q(),[i,a]=M.useState(""),[l,o]=M.useState(!1),[c,d]=M.useState([]),u=s[i];M.useEffect(()=>{d(u?S5(u):[])},[u]);const h=async()=>{i&&(o(!0),await n(i),o(!1))},m=M.useMemo(()=>t.map(x=>{const y=e.find(g=>g.productId===x.id),b=!!y&&y.steps.length>0&&y.steps.every(g=>g.hazardAnalysis);return{...x,isAnalyzed:b}}),[t,e]);return r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" 2:     (CCPs)"})}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("p",{className:"text-slate-600 mb-6",children:"                (CCPs)           ."}),r.jsxs("div",{className:"mb-6 flex items-end gap-4",children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("label",{htmlFor:"product-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"     :"}),r.jsxs("select",{id:"product-select",value:i,onChange:x=>a(x.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md bg-white shadow-sm focus:ring-emerald-500 focus:border-emerald-500",children:[r.jsx("option",{value:"",disabled:!0,children:"--   --"}),m.map(x=>r.jsxs("option",{value:x.id,disabled:!x.isAnalyzed,children:[x.name," ",x.isAnalyzed?"":"(   )"]},x.id))]}),m.every(x=>!x.isAnalyzed)&&r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:'   " 1:  "    .'})]}),i&&((p=m.find(x=>x.id===i))==null?void 0:p.isAnalyzed)&&r.jsxs("button",{onClick:h,disabled:l,className:"bg-emerald-600 text-white px-6 py-2.5 rounded-md hover:bg-emerald-700 transition disabled:bg-slate-400 flex items-center gap-2",children:[r.jsx(c0,{className:"h-5 w-5"}),l?" ...":u?" ":"   "]})]})]})}),l&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-emerald-500 border-dashed rounded-full animate-spin"}),r.jsx("p",{className:"mt-4 text-slate-600",children:"     ..."})]}),c.length>0&&!l&&r.jsxs("div",{className:"bg-slate-50 p-8 rounded-lg mt-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 text-center",children:['      "',(f=t.find(x=>x.id===i))==null?void 0:f.name,'"']}),r.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:c.map((x,y)=>{var g;const b=(g=x["  CCP (/)"])==null?void 0:g.toLowerCase().includes("");return r.jsxs("div",{className:`p-6 rounded-lg shadow border-l-4 ${b?"border-red-500 bg-red-50":"border-slate-400 bg-white"}`,children:[r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-3",children:x[" "]}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:" "}),r.jsx("p",{className:"text-slate-800",children:x[" "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:"  CCP"}),r.jsx("p",{className:`font-bold ${b?"text-red-600":"text-green-600"}`,children:x["  CCP (/)"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:""}),r.jsx("p",{className:"text-slate-800",children:x[" (   )"]})]})]})]},y)})})]})]})},M5=t=>{if(!t)return[];const s=t.trim().split(`
`).filter(l=>l.trim().startsWith("|")&&l.trim().endsWith("|"));if(s.length<3)return[];const i=s[0].slice(1,-1).split("|").map(l=>l.trim());return s.slice(2).map(l=>{const o=l.slice(1,-1).split("|").map(d=>d.trim()),c={};return i.forEach((d,u)=>{d&&(c[d]=o[u]||"")}),c})},P5=()=>{var p;const{products:t,ccpDeterminations:e,criticalLimits:s,generateAndSaveCriticalLimits:n}=Q(),[i,a]=M.useState(""),[l,o]=M.useState(!1),[c,d]=M.useState([]),u=s[i];M.useEffect(()=>{d(u?M5(u):[])},[u]);const h=async()=>{i&&(o(!0),await n(i),o(!1))},m=e[i];return r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" 3:   "})}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("p",{className:"text-slate-600 mb-6",children:"    (CCP)                ."}),r.jsxs("div",{className:"mb-6 flex items-end gap-4",children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("label",{htmlFor:"product-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"       :"}),r.jsxs("select",{id:"product-select",value:i,onChange:f=>a(f.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md bg-white shadow-sm focus:ring-emerald-500 focus:border-emerald-500",children:[r.jsx("option",{value:"",disabled:!0,children:"--   --"}),t.filter(f=>e[f.id]).map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]}),Object.keys(e).length===0&&r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:'   " 2:    ".'})]}),m&&r.jsxs("button",{onClick:h,disabled:l,className:"bg-emerald-600 text-white px-6 py-2.5 rounded-md hover:bg-emerald-700 transition disabled:bg-slate-400 flex items-center gap-2",children:[r.jsx(d0,{className:"h-5 w-5"}),l?" ...":u?" ":"  "]})]})]})}),l&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-emerald-500 border-dashed rounded-full animate-spin"}),r.jsx("p",{className:"mt-4 text-slate-600",children:"     ..."})]}),c.length>0&&!l&&r.jsxs("div",{className:"bg-slate-50 p-8 rounded-lg mt-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 text-center",children:['    "',(p=t.find(f=>f.id===i))==null?void 0:p.name,'"']}),r.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:c.map((f,x)=>r.jsxs("div",{className:"p-6 rounded-lg shadow border-l-4 border-emerald-500 bg-white",children:[r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-3",children:f["   (CCP)"]}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:"    "}),r.jsx("p",{className:"text-slate-800",children:f["    "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:"  "}),r.jsx("p",{className:"text-slate-800 font-mono bg-slate-50 p-2 rounded",children:f["  "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:"   "}),r.jsx("p",{className:"text-slate-800",children:f["   "]})]})]})]},x))})]})]})},T5=t=>{if(!t)return[];const s=t.trim().split(`
`).filter(l=>l.trim().startsWith("|")&&l.trim().endsWith("|"));if(s.length<3)return[];const i=s[0].slice(1,-1).split("|").map(l=>l.trim());return s.slice(2).map(l=>{const o=l.slice(1,-1).split("|").map(d=>d.trim()),c={};return i.forEach((d,u)=>{d&&(c[d]=o[u]||"")}),c})},D5=()=>{var p;const{products:t,criticalLimits:e,monitoringProcedures:s,generateAndSaveMonitoring:n}=Q(),[i,a]=M.useState(""),[l,o]=M.useState(!1),[c,d]=M.useState([]),u=s[i];M.useEffect(()=>{d(u?T5(u):[])},[u]);const h=async()=>{i&&(o(!0),await n(i),o(!1))},m=e[i];return r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" 4:   "})}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("p",{className:"text-slate-600 mb-6",children:"             ."}),r.jsxs("div",{className:"mb-6 flex items-end gap-4",children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("label",{htmlFor:"product-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"      :"}),r.jsxs("select",{id:"product-select",value:i,onChange:f=>a(f.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md bg-white shadow-sm focus:ring-emerald-500 focus:border-emerald-500",children:[r.jsx("option",{value:"",disabled:!0,children:"--   --"}),t.filter(f=>e[f.id]).map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]}),Object.keys(e).length===0&&r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:'   " 3:   ".'})]}),m&&r.jsxs("button",{onClick:h,disabled:l,className:"bg-emerald-600 text-white px-6 py-2.5 rounded-md hover:bg-emerald-700 transition disabled:bg-slate-400 flex items-center gap-2",children:[r.jsx(u0,{className:"h-5 w-5"}),l?" ...":u?" ":"  "]})]})]})}),l&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-emerald-500 border-dashed rounded-full animate-spin"}),r.jsx("p",{className:"mt-4 text-slate-600",children:"     ..."})]}),c.length>0&&!l&&r.jsxs("div",{className:"bg-slate-50 p-8 rounded-lg mt-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 text-center",children:['    "',(p=t.find(f=>f.id===i))==null?void 0:p.name,'"']}),r.jsx("div",{className:"space-y-4 max-w-5xl mx-auto",children:c.map((f,x)=>r.jsxs("div",{className:"p-6 rounded-lg shadow border-l-4 border-blue-500 bg-white",children:[r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-3",children:f["   (CCP)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:"  "}),r.jsx("p",{className:"text-slate-800",children:f["  "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:"  "}),r.jsx("p",{className:"text-slate-800",children:f["   ( )"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:""}),r.jsx("p",{className:"text-slate-800",children:f.})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:" "}),r.jsx("p",{className:"text-slate-800",children:f["   "]})]})]})]},x))})]})]})},L5=t=>{if(!t)return[];const s=t.trim().split(`
`).filter(l=>l.trim().startsWith("|")&&l.trim().endsWith("|"));if(s.length<3)return[];const i=s[0].slice(1,-1).split("|").map(l=>l.trim());return s.slice(2).map(l=>{const o=l.slice(1,-1).split("|").map(d=>d.trim()),c={};return i.forEach((d,u)=>{d&&(c[d]=o[u]||"")}),c})},I5=()=>{var p;const{products:t,criticalLimits:e,correctiveActions:s,generateAndSaveCorrectiveActions:n}=Q(),[i,a]=M.useState(""),[l,o]=M.useState(!1),[c,d]=M.useState([]),u=s[i];M.useEffect(()=>{d(u?L5(u):[])},[u]);const h=async()=>{i&&(o(!0),await n(i),o(!1))},m=e[i];return r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" 5:   "})}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("p",{className:"text-slate-600 mb-6",children:"              ."}),r.jsxs("div",{className:"mb-6 flex items-end gap-4",children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("label",{htmlFor:"product-select",className:"block text-sm font-medium text-slate-700 mb-2",children:" :"}),r.jsxs("select",{id:"product-select",value:i,onChange:f=>a(f.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md bg-white shadow-sm focus:ring-emerald-500 focus:border-emerald-500",children:[r.jsx("option",{value:"",disabled:!0,children:"--   --"}),t.filter(f=>e[f.id]).map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]}),Object.keys(e).length===0&&r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:'   " 3:   ".'})]}),m&&r.jsxs("button",{onClick:h,disabled:l,className:"bg-emerald-600 text-white px-6 py-2.5 rounded-md hover:bg-emerald-700 transition disabled:bg-slate-400 flex items-center gap-2",children:[r.jsx(h0,{className:"h-5 w-5"}),l?" ...":u?" ":"  "]})]})]})}),l&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-emerald-500 border-dashed rounded-full animate-spin"}),r.jsx("p",{className:"mt-4 text-slate-600",children:"     ..."})]}),c.length>0&&!l&&r.jsxs("div",{className:"bg-slate-50 p-8 rounded-lg mt-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 text-center",children:['    "',(p=t.find(f=>f.id===i))==null?void 0:p.name,'"']}),r.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:c.map((f,x)=>r.jsxs("div",{className:"p-6 rounded-lg shadow border-l-4 border-orange-500 bg-white",children:[r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-3",children:f["   (CCP)"]}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:""}),r.jsx("p",{className:"text-slate-800",children:f[" (     )"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:"  "}),r.jsx("p",{className:"text-slate-800",children:f["  "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:"  "}),r.jsx("p",{className:"text-slate-800",children:f["  "]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-3 border-t",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:" "}),r.jsx("p",{className:"text-slate-800",children:f[" "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:" "}),r.jsx("p",{className:"text-slate-800",children:f[" "]})]})]})]})]},x))})]})]})},A5=t=>{if(!t)return[];const s=t.trim().split(`
`).filter(l=>l.trim().startsWith("|")&&l.trim().endsWith("|"));if(s.length<3)return[];const i=s[0].slice(1,-1).split("|").map(l=>l.trim());return s.slice(2).map(l=>{const o=l.slice(1,-1).split("|").map(d=>d.trim()),c={};return i.forEach((d,u)=>{d&&(c[d]=o[u]||"")}),c})},O5=()=>{var p;const{products:t,ccpDeterminations:e,verificationProcedures:s,generateAndSaveVerification:n}=Q(),[i,a]=M.useState(""),[l,o]=M.useState(!1),[c,d]=M.useState([]),u=s[i];M.useEffect(()=>{d(u?A5(u):[])},[u]);const h=async()=>{i&&(o(!0),await n(i),o(!1))},m=e[i];return r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" 6:   "})}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("p",{className:"text-slate-600 mb-6",children:"        .     ."}),r.jsxs("div",{className:"mb-6 flex items-end gap-4",children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("label",{htmlFor:"product-select",className:"block text-sm font-medium text-slate-700 mb-2",children:" :"}),r.jsxs("select",{id:"product-select",value:i,onChange:f=>a(f.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md bg-white shadow-sm focus:ring-emerald-500 focus:border-emerald-500",children:[r.jsx("option",{value:"",disabled:!0,children:"--   --"}),t.filter(f=>e[f.id]).map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]}),Object.keys(e).length===0&&r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:'   " 2:    ".'})]}),m&&r.jsxs("button",{onClick:h,disabled:l,className:"bg-emerald-600 text-white px-6 py-2.5 rounded-md hover:bg-emerald-700 transition disabled:bg-slate-400 flex items-center gap-2",children:[r.jsx(f0,{className:"h-5 w-5"}),l?" ...":u?" ":"  "]})]})]})}),l&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-emerald-500 border-dashed rounded-full animate-spin"}),r.jsx("p",{className:"mt-4 text-slate-600",children:"     ..."})]}),c.length>0&&!l&&r.jsxs("div",{className:"bg-slate-50 p-8 rounded-lg mt-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 text-center",children:['    "',(p=t.find(f=>f.id===i))==null?void 0:p.name,'"']}),r.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:c.map((f,x)=>r.jsxs("div",{className:"p-6 rounded-lg shadow border-l-4 border-purple-500 bg-white",children:[r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-3",children:f[" "]}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:"  "}),r.jsx("p",{className:"text-slate-800",children:f["  "]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-3 border-t",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:""}),r.jsx("p",{className:"text-slate-800",children:f.})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:""}),r.jsx("p",{className:"text-slate-800",children:f.})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:""}),r.jsx("p",{className:"text-slate-800",children:f.})]})]})]})]},x))})]})]})},E5=t=>{if(!t)return[];const s=t.trim().split(`
`).filter(l=>l.trim().startsWith("|")&&l.trim().endsWith("|"));if(s.length<3)return[];const i=s[0].slice(1,-1).split("|").map(l=>l.trim());return s.slice(2).map(l=>{const o=l.slice(1,-1).split("|").map(d=>d.trim()),c={};return i.forEach((d,u)=>{d&&(c[d]=o[u]||"")}),c})},R5=()=>{var h;const{products:t,recordKeeping:e,generateAndSaveRecordKeeping:s}=Q(),[n,i]=M.useState(""),[a,l]=M.useState(!1),[o,c]=M.useState([]),d=e[n];M.useEffect(()=>{c(d?E5(d):[])},[d]);const u=async()=>{n&&(l(!0),await s(n),l(!1))};return r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" 7:   "})}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("p",{className:"text-slate-600 mb-6",children:"             ."}),r.jsxs("div",{className:"mb-6 flex items-end gap-4",children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("label",{htmlFor:"product-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"     :"}),r.jsxs("select",{id:"product-select",value:n,onChange:m=>i(m.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md bg-white shadow-sm focus:ring-emerald-500 focus:border-emerald-500",children:[r.jsx("option",{value:"",disabled:!0,children:"--   --"}),t.map(m=>r.jsx("option",{value:m.id,children:m.name},m.id))]})]}),r.jsxs("button",{onClick:u,disabled:a||!n,className:"bg-emerald-600 text-white px-6 py-2.5 rounded-md hover:bg-emerald-700 transition disabled:bg-slate-400 flex items-center gap-2",children:[r.jsx(m0,{className:"h-5 w-5"}),a?" ...":d?" ":"  "]})]})]})}),a&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-emerald-500 border-dashed rounded-full animate-spin"}),r.jsx("p",{className:"mt-4 text-slate-600",children:"     ..."})]}),o.length>0&&!a&&r.jsxs("div",{className:"bg-slate-50 p-8 rounded-lg mt-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 text-center",children:['    "',(h=t.find(m=>m.id===n))==null?void 0:h.name,'"']}),r.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:o.map((m,p)=>r.jsxs("div",{className:"p-6 rounded-lg shadow border-l-4 border-gray-500 bg-white",children:[r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-3",children:m["  / "]}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:"  "}),r.jsx("p",{className:"text-slate-800",children:m["  "]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-3 border-t",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:" "}),r.jsx("p",{className:"text-slate-800",children:m[" "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-600",children:" "}),r.jsx("p",{className:"text-slate-800",children:m[" "]})]})]})]})]},p))})]})]})},z5=()=>{const{setActivePage:t}=Q(),e=[{id:"PersonalHygiene",key:"personalHygiene"},{id:"CleaningAndSanitation",key:"cleaningAndSanitation"},{id:"PestControl",key:"pestControl"},{id:"SupplierControl",key:"supplierControl"}];return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"  (PRPs)"}),r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[r.jsx("p",{className:"text-slate-600 mb-6",children:"             (HACCP).        ."}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(s=>{const n=l0[s.key];return r.jsxs("button",{onClick:()=>t(s.id),className:"p-6 bg-slate-50 border border-slate-200 rounded-lg text-right hover:border-emerald-500 hover:bg-emerald-50 transition group",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:n.title}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:n.description})]}),r.jsx(Fn,{className:"h-10 w-10 text-slate-400 group-hover:text-emerald-500 transition"})]}),r.jsxs("div",{className:"mt-4 text-sm font-semibold text-emerald-600 flex items-center gap-2",children:[r.jsx("span",{children:"  "}),r.jsx(jc,{className:"h-4 w-4 transform transition-transform group-hover:-translate-x-1"})]})]},s.id)})})]})]})},F5=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),ko={name:"",department:"",position:"",email:"",phone:""},B5=()=>{const{trainingPrograms:t,addTrainingProgram:e,deleteTrainingProgram:s,addAttendee:n,removeAttendee:i,sendTrainingInvitation:a,showNotification:l,hasPermission:o}=Q(),[c,d]=M.useState(!1),[u,h]=M.useState(null),[m,p]=M.useState(ko),[f,x]=M.useState({name:"",trainer:"",location:"",date:"",topics:""}),y=async()=>{f.name&&f.date?(await e(f),l("    !","success"),d(!1),x({name:"",trainer:"",location:"",date:"",topics:""})):l("    .","error")},b=async w=>{window.confirm("         ")&&await s(w)},g=w=>{h(u===w?null:w),p(ko)},j=async w=>{if(!m.name.trim()||!m.email.trim()){l("       .","error");return}await n(w,m),p(ko)};return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" "}),o("training:create")&&r.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition",children:[r.jsx(Nt,{className:"h-5 w-5"}),"  "]})]}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:t.length===0?r.jsx("p",{className:"text-slate-500 text-center",children:"      ."}):r.jsx("div",{className:"space-y-4",children:t.map(w=>r.jsxs("div",{className:"border rounded-lg transition-shadow hover:shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer bg-slate-50",onClick:()=>g(w.id),children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:w.name}),r.jsxs("p",{className:"text-sm text-slate-600",children:[w.date," - : ",w.trainer]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[o("training:delete")&&r.jsx("button",{onClick:v=>{v.stopPropagation(),b(w.id)},className:"text-red-500 hover:text-red-700",children:r.jsx(Qe,{className:"h-5 w-5"})}),r.jsx(F5,{className:`h-6 w-6 text-slate-500 transition-transform ${u===w.id?"rotate-180":""}`})]})]}),u===w.id&&r.jsxs("div",{className:"p-6 border-t bg-white",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",w.location]}),r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",w.topics]})]}),o("training:manage_attendees")&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:" :"}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600",children:" "}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600",children:""})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:w.attendees.map(v=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2 text-sm text-slate-800",children:v.name}),r.jsx("td",{className:"px-4 py-2 text-sm text-slate-700",children:v.email}),r.jsxs("td",{className:"px-4 py-2 text-sm space-x-4",children:[r.jsx("button",{onClick:()=>a(v.email,v.name,w.name),className:"text-blue-600 hover:underline text-xs",children:" "}),r.jsx("button",{onClick:()=>i(w.id,v.id),className:"text-red-600 hover:underline text-xs",children:""})]})]},v.id))})]})}),r.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:[r.jsx("h5",{className:"font-semibold text-sm mb-3",children:"  "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[r.jsx("input",{type:"text",value:m.name,onChange:v=>p(N=>({...N,name:v.target.value})),placeholder:" ",className:"bg-white px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),r.jsx("input",{type:"email",value:m.email,onChange:v=>p(N=>({...N,email:v.target.value})),placeholder:" ",className:"bg-white px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),r.jsx("input",{type:"text",value:m.department,onChange:v=>p(N=>({...N,department:v.target.value})),placeholder:"",className:"bg-white px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),r.jsx("input",{type:"text",value:m.position,onChange:v=>p(N=>({...N,position:v.target.value})),placeholder:"",className:"bg-white px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),r.jsx("input",{type:"text",value:m.phone,onChange:v=>p(N=>({...N,phone:v.target.value})),placeholder:" ",className:"bg-white px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>j(w.id),className:"bg-slate-700 text-white px-4 py-2 rounded-md text-sm hover:bg-slate-800",children:""})})]})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"  "}),r.jsx("p",{className:"text-sm text-slate-600",children:"        ."})]}),r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"  "}),r.jsx("p",{className:"text-sm text-slate-600",children:"         ."})]})]})]})]},w.id))})}),r.jsx(Ce,{isOpen:c,onClose:()=>d(!1),title:"   ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:"  ",value:f.name,onChange:w=>x(v=>({...v,name:w.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md"}),r.jsx("input",{type:"text",placeholder:" ",value:f.trainer,onChange:w=>x(v=>({...v,trainer:w.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md"}),r.jsx("input",{type:"text",placeholder:" ",value:f.location,onChange:w=>x(v=>({...v,location:w.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md"}),r.jsx("input",{type:"date",value:f.date,onChange:w=>x(v=>({...v,date:w.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md"}),r.jsx("textarea",{placeholder:" ",value:f.topics,onChange:w=>x(v=>({...v,topics:w.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md",rows:4}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:y,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:" "})})]})})]})},zc=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),W5=()=>{const{products:t,productionOrders:e,addProductionOrder:s,updateProductionOrder:n,showNotification:i,issueMaterialsForProduction:a,materialReceipts:l,hasPermission:o,getCompanyBusinessType:c}=Q(),[d,u]=M.useState(!1),[h,m]=M.useState(!1),[p,f]=M.useState(null),[x,y]=M.useState([]),b=c(),g=b==="kitchen"||b==="restaurant",[j,w]=M.useState({productId:"",quantity:100,batchNumber:`B${new Date().toISOString().slice(0,10).replace(/-/g,"")}${Math.floor(Math.random()*900+100)}`,productionDate:new Date().toISOString().slice(0,10),expiryDate:"",status:"planned",notes:""}),v=()=>{w({productId:"",quantity:g?10:100,batchNumber:`B${new Date().toISOString().slice(0,10).replace(/-/g,"")}${Math.floor(Math.random()*900+100)}`,productionDate:new Date().toISOString().slice(0,10),expiryDate:"",status:"planned",notes:""}),u(!0)},N=()=>{u(!1)},k=async()=>{if(!j.productId||!j.batchNumber){i("     .","error");return}await s(j),i(`  ${g?" ":" "} !`,"success"),N()},_=async S=>{await a(S)},T=S=>{const E=t.find(z=>z.id===S.productId);if(!E)return;const O=E.ingredients.map(z=>({ingredientId:z.id,batchNumber:""}));y(O),f(S),m(!0)},C=async()=>{if(p){if(x.some(S=>!S.batchNumber.trim())){i("      .","error");return}await n({...p,status:"in-progress",rawMaterialBatchNumbers:x}),i(`    ${p.orderNumber}`,"success"),m(!1),f(null)}},L=S=>{const E={planned:"bg-slate-200 text-slate-800","materials-issued":"bg-yellow-200 text-yellow-800","in-progress":"bg-blue-200 text-blue-800",completed:"bg-green-200 text-green-800"},O={planned:" ","materials-issued":"  ","in-progress":" ",completed:""};return r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${E[S]}`,children:O[S]})},D=M.useMemo(()=>{if(!p)return[];const S=t.find(E=>E.id===p.productId);return(S==null?void 0:S.ingredients)||[]},[p,t]);return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:g?" ":"  "}),o("production:create")&&r.jsxs("button",{onClick:v,className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition",children:[r.jsx(Nt,{className:"h-5 w-5"}),g?"  ":"  "]})]}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:e.length===0?r.jsxs("p",{className:"text-slate-500 text-center",children:["    ",g?" ":" "," ."]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:g?" ":" "}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:g?"":""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:g?" ":" "}),r.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:e.map(S=>{const E=t.find(O=>O.id===S.productId);return r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2 text-sm font-mono text-slate-800",children:S.batchNumber}),r.jsx("td",{className:"px-4 py-2 text-sm",children:(E==null?void 0:E.name)||" "}),r.jsx("td",{className:"px-4 py-2 text-sm",children:S.quantity}),r.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(S.productionDate).toLocaleDateString("ar-SA")}),r.jsx("td",{className:"px-4 py-2 text-center",children:L(S.status)}),r.jsx("td",{className:"px-4 py-2 text-sm",children:r.jsxs("div",{className:"flex items-center gap-2",children:[o("production:manage")&&S.status==="planned"&&r.jsxs("button",{onClick:()=>_(S.id),className:"text-xs bg-yellow-500 text-white px-2 py-1 rounded flex items-center gap-1",children:[r.jsx(zc,{className:"h-4 w-4"}),"  "]}),o("production:manage")&&S.status==="materials-issued"&&r.jsx("button",{onClick:()=>T(S),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded",children:" "}),o("production:manage")&&S.status==="in-progress"&&r.jsxs("button",{onClick:()=>n({...S,status:"completed"}),className:"text-xs bg-green-500 text-white px-2 py-1 rounded flex items-center gap-1",children:[r.jsx(fn,{className:"h-4 w-4"})," "]})]})})]},S.id)})})]})})}),r.jsx(Ce,{isOpen:d,onClose:N,title:g?"   ":"   ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:g?"":""}),r.jsxs("select",{value:j.productId,onChange:S=>w(E=>({...E,productId:S.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md bg-white",children:[r.jsxs("option",{value:"",disabled:!0,children:[" ",g?"":"","..."]}),t.map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("input",{type:"number",min:"1",value:j.quantity,onChange:S=>w(E=>({...E,quantity:parseInt(S.target.value,10)||0})),className:"w-full px-3 py-2 border border-slate-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:g?" ":"  (Batch)"}),r.jsx("input",{type:"text",value:j.batchNumber,onChange:S=>w(E=>({...E,batchNumber:S.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:g?" ":" "}),r.jsx("input",{type:"date",value:j.productionDate,onChange:S=>w(E=>({...E,productionDate:S.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("input",{type:"date",value:j.expiryDate,onChange:S=>w(E=>({...E,expiryDate:S.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),r.jsx("textarea",{value:j.notes,onChange:S=>w(E=>({...E,notes:S.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md",rows:3})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsx("button",{onClick:k,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:" "})})]})}),p&&r.jsx(Ce,{isOpen:h,onClose:()=>m(!1),title:` ${g?"":""}: ${p.batchNumber}`,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-slate-600",children:"          ."}),D.map((S,E)=>{var z;const O=l.filter(X=>X.ingredientId===S.id).map(X=>X.batchNumber);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("label",{className:"font-medium text-slate-700 col-span-1",children:S.name}),r.jsx("input",{type:"text",list:`batches-${S.id}`,placeholder:"   ",value:((z=x.find(X=>X.ingredientId===S.id))==null?void 0:z.batchNumber)||"",onChange:X=>{const W=[...x],U=W.find(K=>K.ingredientId===S.id);U&&(U.batchNumber=X.target.value),y(W)},className:"w-full px-3 py-2 border border-slate-300 rounded-md col-span-2"}),r.jsx("datalist",{id:`batches-${S.id}`,children:O.map(X=>r.jsx("option",{value:X},X))})]},S.id)}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsxs("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:["  ",g?"":""]})})]})})]})},$5=()=>{const{customers:t,addCustomer:e,deleteCustomer:s,showNotification:n,salesOrders:i,addSalesOrder:a,products:l,productionOrders:o,team:c,hasPermission:d}=Q(),[u,h]=M.useState(!1),[m,p]=M.useState({name:"",type:"customer",phone:"",email:"",website:"",address:""}),[f,x]=M.useState(!1),[y,b]=M.useState({products:[{productId:"",quantity:1,batchNumber:""}],deliveryDate:"",deliveryDriver:"",deliveryLocation:"",salesPersonId:""}),[g,j]=M.useState(""),w=async()=>{m.name&&m.email?(await e(m),n("   .","success"),h(!1),p({name:"",type:"customer",phone:"",email:"",website:"",address:""})):n("     .","error")},v=async S=>{window.confirm("      ")&&await s(S)},N=()=>{b({products:[{productId:"",quantity:1,batchNumber:""}],deliveryDate:"",deliveryDriver:"",deliveryLocation:"",salesPersonId:""}),j(""),x(!0)},k=async()=>{const S=t.find(E=>E.id===g);if(!S){n("  .","error");return}if(y.products.some(E=>!E.productId||!E.batchNumber||E.quantity<=0)){n("      .","error");return}if(!y.deliveryDate||!y.salesPersonId){n("     .","error");return}await a({...y,customer:S}),x(!1)},_=(S,E,O)=>{const z=[...y.products];z[S]={...z[S],[E]:O},E==="productId"&&(z[S].batchNumber=""),b(X=>({...X,products:z}))},T=()=>{b(S=>({...S,products:[...S.products,{productId:"",quantity:1,batchNumber:""}]}))},C=S=>{b(E=>({...E,products:E.products.filter((O,z)=>z!==S)}))},L=S=>{j(S);const E=t.find(O=>O.id===S);E&&E.address&&b(O=>({...O,deliveryLocation:E.address}))},D=S=>o.filter(E=>E.status==="completed"&&E.productId===S);return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"  "}),d("sales:create")&&r.jsxs("button",{onClick:N,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:[r.jsx(Nt,{className:"h-5 w-5"}),"  "]})]}),r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md mb-8",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-4",children:"  "}),i.length===0?r.jsx("p",{className:"text-slate-500 text-center",children:"      ."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:" "}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:" "}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:" "}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:i.map(S=>{var E;return r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2 text-sm font-mono",children:S.orderNumber}),r.jsx("td",{className:"px-4 py-2 text-sm",children:S.customer.name}),r.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(S.deliveryDate).toLocaleDateString("ar-SA")}),r.jsx("td",{className:"px-4 py-2 text-sm",children:((E=c.find(O=>O.id===S.salesPersonId))==null?void 0:E.name)||" "}),r.jsx("td",{className:"px-4 py-2 text-sm",children:r.jsx("ul",{className:"list-disc list-inside",children:S.products.map((O,z)=>{var X;return r.jsxs("li",{children:[(X=l.find(W=>W.id===O.productId))==null?void 0:X.name," (x",O.quantity,") - ",r.jsx("span",{className:"font-mono text-xs",children:O.batchNumber})]},z)})})})]},S.id)})})]})})]}),r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-700",children:" //"}),d("sales:create")&&r.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-md hover:bg-emerald-700 transition text-sm",children:[r.jsx(Nt,{className:"h-4 w-4"})," "]})]}),t.length===0?r.jsx("p",{className:"text-slate-500 text-center",children:"     ."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500",children:" "}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:t.map(S=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:S.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700",children:r.jsx("a",{href:`mailto:${S.email}`,className:"text-blue-600 hover:underline",children:S.email})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700",children:S.phone}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700",children:S.address}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:d("sales:delete")&&r.jsx("button",{onClick:()=>v(S.id),className:"text-red-600 hover:text-red-900",children:r.jsx(Qe,{className:"h-5 w-5"})})})]},S.id))})]})})]}),r.jsx(Ce,{isOpen:u,onClose:()=>h(!1),title:" //",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:"",value:m.name,onChange:S=>p(E=>({...E,name:S.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md"}),r.jsxs("select",{value:m.type,onChange:S=>p(E=>({...E,type:S.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md bg-white",children:[r.jsx("option",{value:"customer",children:""}),r.jsx("option",{value:"distributor",children:""}),r.jsx("option",{value:"sales_rep",children:" "})]}),r.jsx("input",{type:"email",placeholder:" ",value:m.email,onChange:S=>p(E=>({...E,email:S.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md"}),r.jsx("input",{type:"tel",placeholder:" ",value:m.phone,onChange:S=>p(E=>({...E,phone:S.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md"}),r.jsx("input",{type:"text",placeholder:"  ()",value:m.website||"",onChange:S=>p(E=>({...E,website:S.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md"}),r.jsx("input",{type:"text",placeholder:"",value:m.address||"",onChange:S=>p(E=>({...E,address:S.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-md"}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:w,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:""})})]})}),r.jsx(Ce,{isOpen:f,onClose:()=>x(!1),title:"   ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),r.jsxs("select",{value:g,onChange:S=>L(S.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md bg-white",children:[r.jsx("option",{value:"",disabled:!0,children:" ..."}),t.map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsxs("select",{value:y.salesPersonId,onChange:S=>b(E=>({...E,salesPersonId:S.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md bg-white",children:[r.jsx("option",{value:"",disabled:!0,children:" ..."}),c.map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("input",{type:"date",value:y.deliveryDate,onChange:S=>b(E=>({...E,deliveryDate:S.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"  ()"}),r.jsx("input",{type:"text",value:y.deliveryDriver,onChange:S=>b(E=>({...E,deliveryDriver:S.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("input",{type:"text",value:y.deliveryLocation,onChange:S=>b(E=>({...E,deliveryLocation:S.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md"})]}),r.jsx("h4",{className:"font-semibold pt-4 border-t",children:""}),r.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:y.products.map((S,E)=>{const O=D(S.productId);return r.jsxs("div",{className:"p-3 bg-slate-50 rounded-md border grid grid-cols-1 md:grid-cols-4 gap-3",children:[r.jsxs("select",{value:S.productId,onChange:z=>_(E,"productId",z.target.value),className:"md:col-span-2 w-full px-3 py-2 border border-slate-300 rounded-md bg-white",children:[r.jsx("option",{value:"",disabled:!0,children:" ..."}),l.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]}),r.jsx("input",{type:"number",min:"1",value:S.quantity,onChange:z=>_(E,"quantity",Number(z.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-md",placeholder:""}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{value:S.batchNumber,onChange:z=>_(E,"batchNumber",z.target.value),className:"flex-grow w-full px-3 py-2 border border-slate-300 rounded-md bg-white",disabled:!S.productId||O.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:" ..."}),O.map(z=>r.jsxs("option",{value:z.batchNumber,children:[z.batchNumber," (",z.quantity," )"]},z.id))]}),r.jsx("button",{onClick:()=>C(E),className:"text-red-500 hover:text-red-700 flex-shrink-0",children:r.jsx(Qe,{className:"h-5 w-5"})})]})]},E)})}),r.jsx("button",{onClick:T,className:"text-sm text-emerald-600 hover:underline",children:"+   "}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsx("button",{onClick:k,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:"  "})})]})})]})},H5=()=>{const{products:t,productionOrders:e,salesOrders:s,materialReceipts:n,receiveMaterials:i,suppliers:a,showNotification:l,hasPermission:o,getCompanyBusinessType:c}=Q(),[d,u]=M.useState(!1),h=c(),m=h==="kitchen"||h==="restaurant",p={receiptDate:new Date().toISOString().slice(0,10),supplierId:"",ingredientId:"",batchNumber:"",quantity:0,unit:"g",expiryDate:"",actualTemperature:0,requiredTemperature:4,packagingIntact:!0,colorAndOdorNormal:!0,pestFree:!0},[f,x]=M.useState(p),y="w-full mt-1 p-2 bg-white border border-slate-300 rounded-md text-slate-800 shadow-sm focus:ring-emerald-500 focus:border-emerald-500",b=M.useMemo(()=>{const C={};n.forEach(D=>{C[D.ingredientId]||(C[D.ingredientId]={quantity:0,unit:D.unit}),C[D.ingredientId].quantity+=D.quantity}),e.forEach(D=>{D.materialsIssued&&D.usedIngredients.forEach(S=>{C[S.ingredientId]&&(C[S.ingredientId].quantity-=S.quantityUsed)})});const L=t.flatMap(D=>D.ingredients);return Object.entries(C).map(([D,{quantity:S,unit:E}])=>{const O=L.find(z=>z.id===D);return{ingredientId:D,name:(O==null?void 0:O.name)||"  ",quantity:S,unit:E}})},[t,e,n]),g=M.useMemo(()=>{const C={};return e.forEach(L=>{L.status==="completed"&&(C[L.productId]=(C[L.productId]||0)+L.quantity)}),s.forEach(L=>{L.products.forEach(D=>{C[D.productId]&&(C[D.productId]-=D.quantity)})}),Object.entries(C).map(([L,D])=>{var S;return{name:((S=t.find(E=>E.id===L))==null?void 0:S.name)||"  ",quantity:D}}).filter(L=>L.quantity>0)},[t,e,s]),j=M.useMemo(()=>{const C=new Map;t.flatMap(S=>S.ingredients).forEach(S=>{C.has(S.id)||C.set(S.id,S)});const L={},D=S=>(L[S]||(L[S]={grams:0,pieces:0}),L[S]);return n.forEach(S=>{const E=D(S.ingredientId);S.unit==="kg"?E.grams+=S.quantity*1e3:S.unit==="g"?E.grams+=S.quantity:S.unit==="piece"&&(E.pieces+=S.quantity)}),e.forEach(S=>{S.materialsIssued&&S.usedIngredients.forEach(E=>{const O=D(E.ingredientId);let z=E.quantityUsed;E.unit==="kg"?O.grams-=z*1e3:E.unit==="g"?O.grams-=z:E.unit==="piece"&&(O.pieces-=z)})}),Array.from(C.values()).map(S=>{const E=a.find(K=>K.id===S.supplierId),O=D(S.id),z=S.unit==="piece"?O.pieces:O.grams,X=S.reorderPoint?z<S.reorderPoint:!1;let W;S.unit==="piece"?W=`${z} `:W=z>1e3?`${(z/1e3).toFixed(2)} kg`:`${z.toFixed(0)} g`;let U;return S.reorderPoint?S.unit==="piece"?U=`${S.reorderPoint} `:U=S.reorderPoint>1e3?`${(S.reorderPoint/1e3).toFixed(2)} kg`:`${S.reorderPoint} g`:U=" ",{...S,supplierName:(E==null?void 0:E.name)||" ",displayStock:W,displayReorder:U,isLowStock:X}})},[t,n,e,a]),w=M.useMemo(()=>{const C=[];return e.filter(D=>D.status==="completed").forEach(D=>{const S=t.find(z=>z.id===D.productId);let E=0;s.forEach(z=>{z.products.forEach(X=>{X.productId===D.productId&&X.batchNumber===D.batchNumber&&(E+=X.quantity)})});const O=D.quantity-E;O>0&&C.push({id:D.id,productName:(S==null?void 0:S.name)||"  ",batchNumber:D.batchNumber,productionDate:D.productionDate,producedQuantity:D.quantity,remainingQuantity:O})}),C},[e,s,t]),v=M.useMemo(()=>{const C=new Map;return t.flatMap(L=>L.ingredients).forEach(L=>{C.has(L.id)||C.set(L.id,{id:L.id,name:L.name})}),Array.from(C.values())},[t]),N=async()=>{if(!f.supplierId||!f.ingredientId||!f.batchNumber||f.quantity<=0){l("    .","error");return}const C=v.find(S=>S.id===f.ingredientId),L=f.actualTemperature<=f.requiredTemperature,D={...f,ingredientName:(C==null?void 0:C.name)||"Unknown",temperatureCompliant:L,isCompliant:f.packagingIntact&&f.colorAndOdorNormal&&f.pestFree&&L};await i(D),u(!1),x(p)},k=f.packagingIntact&&f.colorAndOdorNormal&&f.pestFree&&f.actualTemperature<=f.requiredTemperature,_=()=>r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(ar,{className:"h-8 w-8 text-slate-500"}),r.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"  "})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:" "})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:b.map(C=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2 text-sm text-slate-800",children:C.name}),r.jsxs("td",{className:"px-4 py-2 text-sm text-slate-600 font-mono",children:[C.quantity.toFixed(2)," ",C.unit]})]},C.ingredientId))})]})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Xn,{className:"h-8 w-8 text-slate-500"}),r.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"  "})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:" "})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:g.map((C,L)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2 text-sm text-slate-800",children:C.name}),r.jsxs("td",{className:"px-4 py-2 text-sm text-slate-600 font-mono",children:[C.quantity," "]})]},L))})]})})]})]}),T=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(ar,{className:"h-8 w-8 text-slate-500"}),r.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"  "})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:" "}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:"  "}),r.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500",children:""})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:j.map(C=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2 text-sm text-slate-800",children:C.name}),r.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:C.supplierName}),r.jsx("td",{className:"px-4 py-2 text-sm text-slate-600 font-mono",children:C.displayStock}),r.jsx("td",{className:"px-4 py-2 text-sm text-slate-600 font-mono",children:C.displayReorder}),r.jsx("td",{className:"px-4 py-2 text-center",children:C.isLowStock?r.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 flex items-center justify-center gap-1",children:[r.jsx(Od,{className:"h-4 w-4"}),"  "]}):r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:""})})]},C.id))})]})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Xn,{className:"h-8 w-8 text-slate-500"}),r.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"  "})]}),r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:"  (Batch)"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:" "}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:" "}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:" "})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:w.map(C=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2 text-sm text-slate-800",children:C.productName}),r.jsx("td",{className:"px-4 py-2 text-sm text-slate-600 font-mono",children:C.batchNumber}),r.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:new Date(C.productionDate).toLocaleDateString("ar-SA")}),r.jsxs("td",{className:"px-4 py-2 text-sm text-slate-600 font-mono",children:[C.producedQuantity," "]}),r.jsxs("td",{className:"px-4 py-2 text-sm text-slate-800 font-bold font-mono",children:[C.remainingQuantity," "]})]},C.id))})]}),w.length===0&&r.jsx("p",{className:"text-center text-slate-500 py-4",children:"      ."})]})]})]});return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" "}),o("inventory:manage")&&r.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition",children:[r.jsx(Nt,{className:"h-5 w-5"}),"  "]})]}),m?T():_(),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-4",children:" "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-right",children:""}),r.jsx("th",{className:"px-3 py-2 text-right",children:""}),r.jsx("th",{className:"px-3 py-2 text-right",children:" "}),r.jsx("th",{className:"px-3 py-2 text-right",children:""})]})}),r.jsx("tbody",{className:"divide-y",children:[...n].reverse().map(C=>{var L;return r.jsxs("tr",{children:[r.jsxs("td",{className:"px-3 py-2",children:[C.ingredientName," ",r.jsx("span",{className:"block text-xs font-mono",children:C.batchNumber})]}),r.jsx("td",{className:"px-3 py-2",children:(L=a.find(D=>D.id===C.supplierId))==null?void 0:L.name}),r.jsx("td",{className:"px-3 py-2",children:C.receiptDate}),r.jsx("td",{className:"px-3 py-2",children:r.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${C.isCompliant?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.isCompliant?"":""})})]},C.id)})})]})})]}),r.jsx(Ce,{isOpen:d,onClose:()=>u(!1),title:"   ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:" "}),r.jsx("input",{type:"date",value:f.receiptDate,onChange:C=>x(L=>({...L,receiptDate:C.target.value})),className:y})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:" "}),r.jsx("input",{type:"date",value:f.expiryDate,onChange:C=>x(L=>({...L,expiryDate:C.target.value})),className:y})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:""}),r.jsxs("select",{value:f.supplierId,onChange:C=>x(L=>({...L,supplierId:C.target.value})),className:y,children:[r.jsx("option",{value:"",disabled:!0,children:" "}),a.map(C=>r.jsx("option",{value:C.id,children:C.name},C.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:" "}),r.jsxs("select",{value:f.ingredientId,onChange:C=>x(L=>({...L,ingredientId:C.target.value})),className:y,children:[r.jsx("option",{value:"",disabled:!0,children:" "}),v.map(C=>r.jsx("option",{value:C.id,children:C.name},C.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:" "}),r.jsx("input",{type:"text",value:f.batchNumber,onChange:C=>x(L=>({...L,batchNumber:C.target.value})),className:y})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:" "}),r.jsx("input",{type:"number",value:f.quantity,onChange:C=>x(L=>({...L,quantity:Number(C.target.value)})),className:y})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:""}),r.jsxs("select",{value:f.unit,onChange:C=>x(L=>({...L,unit:C.target.value})),className:y,children:[r.jsx("option",{value:"g",children:""}),r.jsx("option",{value:"kg",children:""}),r.jsx("option",{value:"piece",children:""})]})]})]})]}),r.jsxs("fieldset",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[r.jsx("legend",{className:"px-2 font-semibold text-slate-700",children:" "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"   (C)"}),r.jsx("input",{type:"number",value:f.requiredTemperature,onChange:C=>x(L=>({...L,requiredTemperature:Number(C.target.value)})),className:"w-full mt-1 p-2 bg-white border border-slate-300 rounded text-slate-800"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"   (C)"}),r.jsx("input",{type:"number",value:f.actualTemperature,onChange:C=>x(L=>({...L,actualTemperature:Number(C.target.value)})),className:"w-full mt-1 p-2 bg-white border border-slate-300 rounded text-slate-800"})]}),r.jsx("div",{className:`p-2 rounded text-center font-bold ${f.actualTemperature<=f.requiredTemperature?"bg-emerald-100 text-emerald-800":"bg-red-100 text-red-800"}`,children:f.actualTemperature<=f.requiredTemperature?"":" "})]}),r.jsxs("div",{className:"mt-4 flex flex-wrap gap-x-6 gap-y-3 text-sm text-slate-700",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:f.packagingIntact,onChange:C=>x(L=>({...L,packagingIntact:C.target.checked})),className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),"  "]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:f.colorAndOdorNormal,onChange:C=>x(L=>({...L,colorAndOdorNormal:C.target.checked})),className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),"   "]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:f.pestFree,onChange:C=>x(L=>({...L,pestFree:C.target.checked})),className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),"   "]})]})]}),r.jsx("div",{className:`p-3 rounded-md font-bold text-center ${k?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:k?" : ":" : "}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:N,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:" "})})]})})]})},V5=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),U5=({className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.108 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.27.96-.12 1.45l-.773.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.78.93l-.15.894c-.09.542-.56.94-1.11.94h-1.093c-.55 0-1.02-.398-1.11-.94l-.149-.894c-.07-.424-.384-.764-.78-.93-.398-.164-.855-.142-1.205.108l-.737.527a1.125 1.125 0 01-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.93l.15-.893z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Y5=()=>{var j;const{salesOrders:t,performTraceabilitySearch:e,initiateRecall:s,setActivePage:n,suppliers:i}=Q(),[a,l]=M.useState(""),[o,c]=M.useState(null),[d,u]=M.useState(!1),[h,m]=M.useState(null),[p,f]=M.useState(!1),[x,y]=M.useState(""),b=async w=>{if(w.preventDefault(),m(null),c(null),!a.trim()){m("   .");return}u(!0);const v=await e(a.trim());v?c(v):m(`     : ${a}`),u(!1)},g=async()=>{o&&x.trim()&&(await s(o.productionOrder.batchNumber,x),f(!1),y(""),n("RecallManagement"))};return r.jsxs("div",{children:[r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:" "}),r.jsx("p",{className:"text-slate-600 mb-6",children:"   (Batch Number)      ."}),r.jsxs("form",{onSubmit:b,className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:a,onChange:w=>l(w.target.value),placeholder:"   ...",className:"flex-grow w-full px-4 py-3 border border-slate-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500"}),r.jsxs("button",{type:"submit",className:"bg-emerald-600 text-white px-6 py-3 rounded-md hover:bg-emerald-700 flex items-center gap-2",children:[r.jsx(V5,{className:"h-6 w-6"}),r.jsx("span",{children:""})]})]})]}),d&&r.jsx("p",{className:"text-center mt-8",children:" ..."}),h&&r.jsx("p",{className:"text-center text-red-600 mt-8",children:h}),o&&r.jsxs("div",{className:"mt-8",children:[r.jsxs("div",{className:"flex justify-between items-center bg-slate-800 text-white p-4 rounded-t-lg",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xl font-bold",children:["  : ",r.jsx("span",{className:"font-mono",children:o.productionOrder.batchNumber})]}),r.jsxs("p",{children:[": ",(j=o.product)==null?void 0:j.name]})]}),r.jsxs("button",{onClick:()=>f(!0),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[r.jsx(U5,{className:"h-5 w-5"}),"  "]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-px bg-slate-200 rounded-b-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-white p-6",children:[r.jsxs("h4",{className:"font-bold text-lg text-slate-700 mb-4 flex items-center gap-2",children:[r.jsx(zc,{className:"h-6 w-6 text-blue-600 transform rotate-180"}),"  (  )"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-right font-medium text-slate-600",children:""}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-slate-600",children:""}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-slate-600",children:" "}),r.jsx("th",{className:"px-3 py-2 text-center font-medium text-slate-600",children:" "})]})}),r.jsx("tbody",{className:"divide-y",children:o.backward.map((w,v)=>{const N=i.find(k=>k.id===w.supplierId);return r.jsxs("tr",{children:[r.jsxs("td",{className:"px-3 py-2",children:[w.ingredientName," ",r.jsx("span",{className:"block text-xs text-slate-500 font-mono",children:w.batchNumber})]}),r.jsx("td",{className:"px-3 py-2",children:N==null?void 0:N.name}),r.jsx("td",{className:"px-3 py-2",children:new Date(w.receiptDate).toLocaleDateString("ar-SA")}),r.jsxs("td",{className:`px-3 py-2 text-center font-mono ${w.temperatureCompliant?"text-green-700":"text-red-700"}`,children:[w.actualTemperature,"C"]})]},v)})})]})})]}),r.jsxs("div",{className:"bg-white p-6",children:[r.jsxs("h4",{className:"font-bold text-lg text-slate-700 mb-4 flex items-center gap-2",children:[r.jsx(zc,{className:"h-6 w-6 text-green-600"}),"  ()"]}),o.forward.length>0?r.jsx("ul",{className:"space-y-2",children:o.forward.map(w=>r.jsxs("li",{className:"p-3 bg-slate-50 rounded-md text-sm",children:[r.jsx("strong",{children:":"})," ",w.customer.name," (",w.customer.type,") ",r.jsx("br",{}),r.jsxs("span",{className:"text-xs text-slate-500",children:[" : ",w.orderNumber," |  : ",new Date(w.deliveryDate).toLocaleDateString("ar-SA")]})]},w.id))}):r.jsx("p",{className:"text-slate-500 p-3 bg-slate-50 rounded-md",children:"       ."})]})]})]}),o&&r.jsx(Ce,{isOpen:p,onClose:()=>f(!1),title:"   ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{children:["        ",r.jsx("strong",{className:"font-mono",children:o.productionOrder.batchNumber}),"."]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("textarea",{value:x,onChange:w=>y(w.target.value),className:"w-full p-2 border rounded-md",rows:3,placeholder:":       ..."})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{onClick:()=>f(!1),className:"bg-slate-200 text-slate-800 px-4 py-2 rounded-md",children:""}),r.jsx("button",{onClick:g,disabled:!x.trim(),className:"bg-red-600 text-white px-4 py-2 rounded-md disabled:bg-slate-400",children:"  "})]})]})})]})},p0=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),q5=()=>{const{recallProcesses:t,team:e,updateRecallProcess:s,showNotification:n,setPrintableRecallPlanBatchNumber:i}=Q(),[a,l]=M.useState(null),[o,c]=M.useState("team"),[d,u]=M.useState({title:"",type:"processing"}),h=v=>{l(JSON.parse(JSON.stringify(v))),c("team")},m=()=>{a&&s(a),l(null)},p=v=>{l(v),s(v)},f=v=>{if(!a||a.team.some(k=>k.memberId===v))return;const N={memberId:v,role:" "};p({...a,team:[...a.team,N]})},x=v=>{a&&p({...a,team:a.team.filter(N=>N.memberId!==v)})},y=(v,N)=>{a&&p({...a,team:a.team.map(k=>k.memberId===v?{...k,role:N}:k)})},b=(v,N,k)=>{if(!a)return;const _=a.affectedCustomers.map(T=>T.customerId===v?{...T,[N]:k}:T);p({...a,affectedCustomers:_})},g=()=>{if(!a||!d.title.trim())return;const v={id:Date.now().toString(),title:d.title,description:"",assignedTo:"",status:"todo",progress:0,comments:[]},N={...a};d.type==="processing"?N.processingTasks.push(v):N.disposalTasks.push(v),p(N),u({title:"",type:"processing"})},j=(v,N,k,_)=>{if(!a)return;const T={...a},L=(N==="processing"?T.processingTasks:T.disposalTasks).map(D=>D.id===v?{...D,[k]:_}:D);N==="processing"?T.processingTasks=L:T.disposalTasks=L,p(T)},w=()=>{if(!a)return null;const v=a.team.map(k=>e.find(_=>_.id===k.memberId)).filter(Boolean),N=e.filter(k=>!a.team.some(_=>_.memberId===k.id));return r.jsxs("div",{children:[r.jsx("div",{className:"border-b border-slate-200 mb-4",children:r.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[r.jsxs("button",{onClick:()=>c("team"),className:`${o==="team"?"border-emerald-500 text-emerald-600":"border-transparent text-slate-500"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm`,children:[r.jsx(Kn,{className:"h-5 w-5"}),"  "]}),r.jsxs("button",{onClick:()=>c("customers"),className:`${o==="customers"?"border-emerald-500 text-emerald-600":"border-transparent text-slate-500"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm`,children:[r.jsx(Kn,{className:"h-5 w-5"})," "]}),r.jsxs("button",{onClick:()=>c("tasks"),className:`${o==="tasks"?"border-emerald-500 text-emerald-600":"border-transparent text-slate-500"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm`,children:[r.jsx(ox,{className:"h-5 w-5"})," "]}),r.jsxs("button",{onClick:()=>c("summary"),className:`${o==="summary"?"border-emerald-500 text-emerald-600":"border-transparent text-slate-500"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm`,children:[r.jsx(p0,{className:"h-5 w-5"})," "]})]})}),r.jsxs("div",{className:"py-4",children:[o==="team"&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:" "}),N.map(k=>r.jsxs("div",{className:"flex justify-between items-center bg-slate-100 p-2 rounded mb-2",children:[r.jsx("span",{children:k.name}),r.jsx("button",{onClick:()=>f(k.id),className:"text-emerald-600",children:"+"})]},k.id))]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:" "}),a.team.map(k=>{var _;return r.jsxs("div",{className:"flex gap-2 items-center bg-white p-2 border rounded mb-2",children:[r.jsx("button",{onClick:()=>x(k.memberId),className:"text-red-500",children:r.jsx(Qe,{className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm",children:(_=e.find(T=>T.id===k.memberId))==null?void 0:_.name}),r.jsx("input",{type:"text",value:k.role,onChange:T=>y(k.memberId,T.target.value),placeholder:"",className:"w-full p-1 text-xs border rounded"})]})]},k.memberId)})]})]}),o==="customers"&&r.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2 pr-2",children:a.affectedCustomers.map(k=>r.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border",children:[r.jsx("p",{className:"font-bold",children:k.customerName}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2 text-sm items-center",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:k.notified,onChange:_=>b(k.customerId,"notified",_.target.checked)}),"  "]}),r.jsxs("select",{value:k.actionTaken,onChange:_=>b(k.customerId,"actionTaken",_.target.value),className:"p-1 border rounded bg-white",children:[r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"isolated",children:" "}),r.jsx("option",{value:"disposed",children:" "}),r.jsx("option",{value:"returned",children:" "})]}),r.jsx("input",{type:"number",value:k.quantityRestored,onChange:_=>b(k.customerId,"quantityRestored",Number(_.target.value)),className:"p-1 border rounded",placeholder:" "})]})]},k.customerId))}),o==="tasks"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("input",{type:"text",value:d.title,onChange:k=>u({...d,title:k.target.value}),placeholder:" ...",className:"flex-grow p-2 border rounded"}),r.jsxs("select",{value:d.type,onChange:k=>u({...d,type:k.target.value}),className:"p-2 border rounded bg-white",children:[r.jsx("option",{value:"processing",children:""}),r.jsx("option",{value:"disposal",children:""})]}),r.jsx("button",{onClick:g,className:"bg-emerald-600 text-white px-3 rounded",children:""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold",children:" "}),a.processingTasks.map(k=>r.jsxs("div",{className:"p-2 border rounded bg-white",children:[r.jsx("p",{children:k.title}),r.jsxs("select",{value:k.assignedTo,onChange:_=>j(k.id,"processing","assignedTo",_.target.value),className:"w-full mt-1 p-1 text-xs border rounded bg-slate-50",children:[r.jsx("option",{value:"",children:" ..."}),v.map(_=>r.jsx("option",{value:_.id,children:_.name},_.id))]}),r.jsxs("select",{value:k.status,onChange:_=>j(k.id,"processing","status",_.target.value),className:"w-full mt-1 p-1 text-xs border rounded bg-slate-50",children:[r.jsx("option",{value:"todo",children:""}),r.jsx("option",{value:"inprogress",children:" "}),r.jsx("option",{value:"done",children:""})]})]},k.id))]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold",children:" "}),a.disposalTasks.map(k=>r.jsxs("div",{className:"p-2 border rounded bg-white",children:[r.jsx("p",{children:k.title}),r.jsxs("select",{value:k.assignedTo,onChange:_=>j(k.id,"disposal","assignedTo",_.target.value),className:"w-full mt-1 p-1 text-xs border rounded bg-slate-50",children:[r.jsx("option",{value:"",children:" ..."}),v.map(_=>r.jsx("option",{value:_.id,children:_.name},_.id))]}),r.jsxs("select",{value:k.status,onChange:_=>j(k.id,"disposal","status",_.target.value),className:"w-full mt-1 p-1 text-xs border rounded bg-slate-50",children:[r.jsx("option",{value:"todo",children:""}),r.jsx("option",{value:"inprogress",children:" "}),r.jsx("option",{value:"done",children:""})]})]},k.id))]})]})]}),o==="summary"&&r.jsx("div",{children:r.jsx("button",{onClick:()=>{p({...a,status:"completed"}),n("   .","success"),m()},className:"w-full bg-green-600 text-white p-2 rounded hover:bg-green-700",children:"    "})})]})]})};return r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"  "})}),r.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:t.length===0?r.jsx("p",{className:"text-slate-500 text-center",children:"      ."}):r.jsx("div",{className:"space-y-4",children:t.map(v=>r.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-bold text-lg",children:[": ",r.jsx("span",{className:"font-mono",children:v.batchNumber})]}),r.jsx("p",{className:"text-sm text-slate-600",children:v.reason})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${v.status==="active"?"bg-red-100 text-red-800 animate-pulse":"bg-green-100 text-green-800"}`,children:v.status==="active"?"":""}),v.status==="active"&&r.jsx("button",{onClick:()=>h(v),className:"bg-blue-600 text-white px-3 py-1 rounded-md text-sm",children:""}),v.status==="completed"&&r.jsxs("button",{onClick:()=>i(v.batchNumber),className:"bg-gray-600 text-white px-3 py-1 rounded-md text-sm flex items-center gap-2 hover:bg-gray-700",children:[r.jsx(kt,{className:"h-4 w-4"})," "]})]})]},v.id))})}),r.jsx(Ce,{isOpen:!!a,onClose:m,title:`  : ${a==null?void 0:a.batchNumber}`,children:w()})]})},Bm=({className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v-2M18.364 5.636l1.414-1.414M5.636 18.364l-1.414 1.414"})]}),X5=()=>{const{mockRecallDrill:t,startMockRecall:e,updateMockRecallDrill:s,completeMockRecallDrill:n,products:i,suppliers:a,team:l}=Q(),[o,c]=M.useState(0),[d,u]=M.useState(t);M.useEffect(()=>{let v;return(t==null?void 0:t.status)==="in-progress"?(u(t),c(Math.floor((Date.now()-t.startTime)/1e3)),v=setInterval(()=>{c(Math.floor((Date.now()-t.startTime)/1e3))},1e3)):u(null),()=>clearInterval(v)},[t]);const h=()=>{e()},m=()=>{if(d&&d.currentStep<4){const v=d.currentStep+1,N={...d,currentStep:v};u(N),s(N)}},p=()=>{if(d&&d.currentStep>1){const v=d.currentStep-1,N={...d,currentStep:v};u(N),s(N)}},f=async()=>{d&&window.confirm("          .")&&await n(d)},x=v=>{const N=Math.floor(v/60).toString().padStart(2,"0"),k=(v%60).toString().padStart(2,"0");return`${N}:${k}`},y=()=>{if(!d)return null;const{backward:v,forward:N}=d.traceabilityResults,k=i.find(_=>_.id===(v==null?void 0:v.productId));return r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:" 1:  "}),r.jsx("p",{className:"text-slate-600 mb-6",children:"     .      ."}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"  ()"}),v&&k?r.jsxs("div",{className:"text-sm space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",k.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:" :"})," ",new Date(v.productionDate).toLocaleDateString("ar-SA")]}),r.jsx("ul",{className:"list-disc list-inside",children:v.usedIngredients.map((_,T)=>{const C=k.ingredients.find(D=>D.id===_.ingredientId),L=a.find(D=>D.id===(C==null?void 0:C.supplierId));return r.jsxs("li",{children:[(C==null?void 0:C.name)||"  "," - ",r.jsx("span",{className:"font-semibold",children:(L==null?void 0:L.name)||"  "})]},T)})})]}):r.jsx("p",{className:"text-sm text-slate-500",children:"  ."})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"  ()"}),N.length>0?r.jsx("ul",{className:"text-sm list-disc list-inside space-y-1",children:N.map(_=>r.jsxs("li",{children:[r.jsx("strong",{children:_.customer.name})," (: ",_.orderNumber,")"]},_.id))}):r.jsx("p",{className:"text-sm text-slate-500",children:"    ."})]})]})]})},b=()=>{if(!d)return null;const v=T=>{if(d.team.some(L=>L.memberId===T))return;const C={memberId:T,role:" "};u({...d,team:[...d.team,C]})},N=T=>{u({...d,team:d.team.filter(C=>C.memberId!==T)})},k=(T,C)=>{u({...d,team:d.team.map(L=>L.memberId===T?{...L,role:C}:L)})},_=l.filter(T=>!d.team.some(C=>C.memberId===T.id));return r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:" 2:   "}),r.jsx("p",{className:"text-slate-600 mb-6",children:"        ."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-3",children:"  "}),r.jsxs("div",{className:"space-y-2",children:[_.map(T=>r.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded-md border",children:[r.jsxs("span",{children:[T.name," ",r.jsxs("span",{className:"text-xs text-slate-500",children:["(",T.position,")"]})]}),r.jsx("button",{onClick:()=>v(T.id),className:"text-sm bg-emerald-100 text-emerald-800 px-2 py-1 rounded hover:bg-emerald-200",children:"+"})]},T.id)),_.length===0&&r.jsx("p",{className:"text-sm text-slate-400 text-center",children:"   ."})]})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-3",children:"  "}),r.jsxs("div",{className:"space-y-2",children:[d.team.map(T=>{const C=l.find(L=>L.id===T.memberId);return r.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-md border",children:[r.jsx("button",{onClick:()=>N(T.memberId),className:"text-red-500",children:r.jsx(Qe,{className:"w-4 h-4"})}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("p",{className:"font-semibold text-sm",children:C==null?void 0:C.name}),r.jsx("input",{type:"text",value:T.role,onChange:L=>k(T.memberId,L.target.value),className:"w-full text-xs p-1 border rounded",placeholder:" ..."})]})]},T.memberId)}),d.team.length===0&&r.jsx("p",{className:"text-sm text-slate-400 text-center",children:"    ."})]})]})]})]})},g=()=>{if(!d)return null;const[v,N]=M.useState({category:"communication",title:""}),k=()=>{if(!v.title.trim())return;const L={...v,id:Date.now().toString(),assignedTo:"",status:"todo"};u({...d,tasks:[...d.tasks,L]}),N({category:"communication",title:""})},_=(L,D,S)=>{u({...d,tasks:d.tasks.map(E=>E.id===L?{...E,[D]:S}:E)})},T=d.team.map(L=>l.find(D=>D.id===L.memberId)).filter(Boolean),C=[{key:"communication",label:" "},{key:"logistics",label:" "},{key:"product_handling",label:"   "}];return r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:" 3:    "}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border mb-4",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"  "}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:v.title,onChange:L=>N({...v,title:L.target.value}),placeholder:" ...",className:"flex-grow p-2 border rounded-md"}),r.jsx("select",{value:v.category,onChange:L=>N({...v,category:L.target.value}),className:"p-2 border rounded-md bg-white",children:C.map(L=>r.jsx("option",{value:L.key,children:L.label},L.key))}),r.jsx("button",{onClick:k,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:""})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:C.map(L=>r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-center mb-2",children:L.label}),r.jsx("div",{className:"space-y-2",children:d.tasks.filter(D=>D.category===L.key).map(D=>r.jsxs("div",{className:"bg-white p-3 border rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium",children:D.title}),r.jsxs("select",{value:D.assignedTo,onChange:S=>_(D.id,"assignedTo",S.target.value),className:"w-full mt-2 p-1 text-xs border rounded bg-slate-50",children:[r.jsx("option",{value:"",children:" ..."}),T.map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]})]},D.id))})]},L.key))})]})},j=()=>d?r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:" 4:    "}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"     (:   )"}),r.jsx("input",{type:"text",value:d.finalDecision,onChange:v=>u({...d,finalDecision:v.target.value}),className:"w-full p-2 border rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"    "}),r.jsx("textarea",{value:d.correctiveActions,onChange:v=>u({...d,correctiveActions:v.target.value}),rows:4,className:"w-full p-2 border rounded-md"})]})]})]}):null,w=()=>{switch(d==null?void 0:d.currentStep){case 1:return y();case 2:return b();case 3:return g();case 4:return j();default:return null}};return(d==null?void 0:d.status)==="in-progress"?r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-5xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center border-b pb-4 mb-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["  : ",r.jsx("span",{className:"font-mono",children:d.targetBatchNumber})]}),r.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold text-slate-700 mt-1",children:[r.jsx(Bm,{className:"h-6 w-6 text-slate-500"}),r.jsxs("span",{children:[": ",x(o)]})]})]}),r.jsx("div",{children:r.jsxs("span",{className:"text-sm font-semibold bg-blue-100 text-blue-800 px-3 py-1.5 rounded-full",children:[" ",d.currentStep,"  4"]})})]}),r.jsx("div",{className:"my-8 min-h-[300px]",children:w()}),r.jsxs("div",{className:"flex justify-between items-center border-t pt-4 mt-4",children:[r.jsx("button",{onClick:p,disabled:d.currentStep===1,className:"bg-slate-500 text-white px-5 py-2 rounded-md hover:bg-slate-600 disabled:bg-slate-300",children:""}),d.currentStep<4?r.jsx("button",{onClick:m,className:"bg-emerald-600 text-white px-5 py-2 rounded-md hover:bg-emerald-700",children:""}):r.jsxs("button",{onClick:f,className:"bg-green-600 text-white px-5 py-2 rounded-md hover:bg-green-700 flex items-center gap-2",children:[r.jsx(fn,{className:"h-5 w-5"}),"    "]})]})]}):r.jsxs("div",{className:"text-center bg-white p-12 rounded-lg shadow-md max-w-2xl mx-auto",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"    (Mock Recall)"}),r.jsx("p",{className:"mt-4 text-slate-600",children:"                 .          ."}),r.jsxs("button",{onClick:h,className:"mt-8 bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition text-lg flex items-center gap-2 mx-auto",children:[r.jsx(Bm,{className:"h-6 w-6"}),"   "]})]})},K5=({sensor:t})=>{const{currentValue:e,targetMin:s,targetMax:n,warningThreshold:i,unit:a}=t,l=()=>{const d=s-i,u=n+i;return e>=s&&e<=n?{status:"compliant",color:"border-emerald-500"}:e>u||e<d?{status:"danger",color:"border-red-500"}:{status:"warning",color:"border-yellow-400"}},{status:o,color:c}=l();return r.jsxs("div",{className:`bg-white p-4 rounded-lg shadow-md border-l-8 transition-colors duration-500 ${c}`,children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-slate-800",children:t.name}),r.jsx("p",{className:"text-xs text-slate-500",children:t.location})]}),r.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full
                    ${o==="compliant"?"bg-emerald-100 text-emerald-800":o==="warning"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800 animate-pulse"}`,children:o==="compliant"?"":o==="warning"?"":""})]}),r.jsx("div",{className:"text-center my-4",children:r.jsxs("p",{className:"text-5xl font-bold text-slate-900",children:[e.toFixed(1),r.jsx("span",{className:"text-3xl text-slate-500",children:a})]})}),r.jsx("div",{className:"text-center text-xs text-slate-600 border-t pt-2",children:r.jsxs("p",{children:[": ",s,a," - ",n,a]})})]})},Q5={dry_storage:" ",cold_storage:" ",freezer_storage:" ",receiving:" ",prep_general:"  ",prep_salad:"  ",prep_pastry:" ",bakery:"",washing:" ",waste_room:" "},G5={hot:"  ",cold:"  "},Wm={site_section:" ",refrigerator:"",freezer:"",oven:"",hot_holding:" ",transport_cart:" "},Z5=({isOpen:t,onClose:e,sensorType:s})=>{const{addSensor:n,showNotification:i}=Q(),[a,l]=M.useState(""),[o,c]=M.useState("");M.useEffect(()=>{t&&(l(""),c(s==="site_section"?"dry_storage":s==="transport_cart"?"hot":""))},[t,s]);const d=()=>{if(!a.trim()){i("   .","error");return}n({name:a,type:s,subType:o||void 0}),e()},u=s==="site_section"||s==="transport_cart";return r.jsx(Ce,{isOpen:t,onClose:e,title:` ${Wm[s]} `,children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"sensor-name",className:"block text-sm font-medium text-slate-700 mb-1",children:"  (:      )"}),r.jsx("input",{id:"sensor-name",type:"text",value:a,onChange:h=>l(h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500",placeholder:` ${Wm[s]} `})]}),s==="site_section"&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"site-section-subtype",className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("select",{id:"site-section-subtype",value:o,onChange:h=>c(h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md bg-white",children:Object.entries(Q5).map(([h,m])=>r.jsx("option",{value:h,children:m},h))})]}),s==="transport_cart"&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"transport-cart-subtype",className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("select",{id:"transport-cart-subtype",value:o,onChange:h=>c(h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md bg-white",children:Object.entries(G5).map(([h,m])=>r.jsx("option",{value:h,children:m},h))})]}),r.jsxs("div",{className:"flex justify-end pt-4 border-t",children:[r.jsx("button",{onClick:e,type:"button",className:"bg-white py-2 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-slate-700 hover:bg-slate-50",children:""}),r.jsx("button",{onClick:d,className:"me-3 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 disabled:opacity-50",disabled:!a.trim()||u&&!o,children:" "})]})]})})},x0=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0l3.181-3.183m-4.991-2.691L7.985 5.964A8.25 8.25 0 003 12.251v0"})}),J5=[{key:"site_section",label:" "},{key:"refrigerator",label:""},{key:"freezer",label:""},{key:"oven",label:""},{key:"hot_holding",label:"  "},{key:"transport_cart",label:" "}],ek=()=>{const{sensors:t,setSensors:e,hasPermission:s}=Q(),[n,i]=M.useState("site_section"),[a,l]=M.useState(!1),[o,c]=M.useState(!1),d=s("haccp:manage_temp_monitoring"),u=m=>{i(m),l(!0)},h=()=>{c(!0),e(m=>m.map(p=>{const f=(Math.random()-.5)*(p.warningThreshold/2);let x=p.currentValue+f;return Math.random()<.05&&(x+=(Math.random()-.5)*p.warningThreshold*3),{...p,currentValue:parseFloat(x.toFixed(1))}})),setTimeout(()=>c(!1),500)};return M.useEffect(()=>{const m=setInterval(h,15e3);return()=>clearInterval(m)},[]),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"   "}),r.jsxs("button",{onClick:h,disabled:o,className:"flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-md hover:bg-slate-700 transition disabled:opacity-50",children:[r.jsx(x0,{className:`h-5 w-5 ${o?"animate-spin":""}`})," "]})]}),r.jsx("div",{className:"border-b border-slate-200 mb-6",children:r.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:J5.map(m=>r.jsx("button",{onClick:()=>i(m.key),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${n===m.key?"border-emerald-500 text-emerald-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:m.label},m.key))})}),r.jsx("div",{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[t.filter(m=>m.type===n).map(m=>r.jsx(K5,{sensor:m},m.id)),d&&r.jsxs("button",{onClick:()=>u(n),className:"flex flex-col items-center justify-center min-h-[200px] border-2 border-dashed border-slate-300 rounded-lg text-slate-400 hover:border-emerald-500 hover:text-emerald-600 transition-colors",children:[r.jsx(Nt,{className:"h-10 w-10"}),r.jsx("span",{className:"mt-2 font-semibold",children:"  "})]})]})}),r.jsx(Z5,{isOpen:a,onClose:()=>l(!1),sensorType:n})]})},un=({content:t})=>{const e=i=>i.trim()===""?"<br/>":i.startsWith("### ")?`<h3 class="text-xl font-semibold mt-4 mb-2 text-slate-700">${i.substring(4)}</h3>`:i.startsWith("**")?`<p><strong>${i.replace(/\*\*/g,"")}</strong></p>`:i.startsWith("- ")?`<li class="ml-6 list-disc">${i.substring(2)}</li>`:`<p>${i}</p>`,n=t.split(`
`).map(i=>i.trim().startsWith("|")&&i.trim().endsWith("|")?i:e(i)).join("").replace(/(<li>.*<\/li>)/gs,"<ul>$1</ul>").replace(/((?:\|.*\|(?:\r?\n|$))+)/g,i=>{const a=i.trim().split(`
`);if(a.length<2)return i;const l=a[0];if(!a[1].includes("---"))return i;const c=l.slice(1,-1).split("|").map(u=>`<th scope="col" class="px-4 py-2">${u.trim()}</th>`).join(""),d=a.slice(2).map(u=>`<tr class="bg-white border-b">${u.slice(1,-1).split("|").map(m=>`<td class="px-4 py-3">${m.trim()}</td>`).join("")}</tr>`).join("");return`
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left text-slate-700 border-collapse mt-4">
                    <thead class="text-xs text-slate-700 uppercase bg-slate-100">
                        <tr>${c}</tr>
                    </thead>
                    <tbody>
                        ${d}
                    </tbody>
                </table>
            </div>
        `});return r.jsx("div",{className:"prose prose-slate max-w-none leading-relaxed text-slate-800",dangerouslySetInnerHTML:{__html:n}})},g0=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),tk=()=>{const{waterHaccpPlan:t,generateAndSaveWaterHaccpPlan:e,updateWaterHaccpTestDate:s,setPrintableWaterHACCP:n,hasPermission:i}=Q(),[a,l]=M.useState(!1),[o,c]=M.useState((t==null?void 0:t.source)||"public_network"),[d,u]=M.useState(null),h=M.useRef(null),m=i("haccp:manage_water_plan"),p=async()=>{l(!0);let g;if(d){const j=new FileReader;j.readAsDataURL(d.file),j.onloadend=async()=>{g={base64:j.result.split(",")[1],mimeType:d.file.type},await e(o,g),l(!1)}}else await e(o),l(!1)},f=g=>{var w;const j=(w=g.target.files)==null?void 0:w[0];j&&u({file:j,preview:URL.createObjectURL(j)})},x=async g=>{await s(g)},y=g=>{if(!g.lastCheck)return"due";const j=new Date(g.lastCheck),w=new Date(j),N={daily:1,weekly:7,monthly:30,quarterly:90,annually:365}[g.frequency]||30;w.setDate(j.getDate()+N);const k=new Date,_=(w.getTime()-k.getTime())/(1e3*3600*24);return _<0?"overdue":_<=7?"due":"ok"},b={public_network:"  ",well:" ",tanker:" ",bottled:" "};return a?r.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-dashed rounded-full animate-spin"}),r.jsx("p",{className:"mt-4 text-slate-600 text-lg",children:"         ..."})]}):t?r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"  "}),r.jsxs("div",{className:"flex items-center gap-2",children:[m&&r.jsxs("button",{onClick:p,className:"flex items-center gap-2 bg-slate-500 text-white px-4 py-2 rounded-md hover:bg-slate-600",children:[r.jsx(x0,{className:"h-5 w-5"}),"   "]}),r.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:[r.jsx(kt,{className:"h-5 w-5"}),"  "]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h3",{className:"font-bold text-lg mb-3",children:" "}),r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:t.requiredTests.map(g=>{const j=y(g),w={ok:"border-slate-200",due:"border-yellow-400 bg-yellow-50",overdue:"border-red-400 bg-red-50"};return r.jsxs("div",{className:`p-3 rounded-md border ${w[j]} flex justify-between items-center`,children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:g.name}),r.jsxs("p",{className:"text-xs text-slate-500",children:[": ",g.frequency," |  : ",g.lastCheck?new Date(g.lastCheck).toLocaleDateString():" "]})]}),m&&r.jsx("button",{onClick:()=>x(g.id),className:"text-emerald-600 hover:text-emerald-800",title:"  ( )",children:r.jsx(fn,{className:"h-6 w-6"})})]},g.id)})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h3",{className:"font-bold text-lg mb-3",children:" "}),r.jsx("h4",{className:"font-semibold text-sm mb-2",children:":"}),r.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm mb-4",children:t.recommendedFilters.map(g=>r.jsxs("li",{children:[r.jsxs("strong",{children:[g.type,":"]})," ",g.maintenanceSchedule]},g.id))}),r.jsx("h4",{className:"font-semibold text-sm mb-2",children:" :"}),r.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:t.chemicals.map((g,j)=>r.jsx("li",{children:g},j))})]})]}),r.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h3",{className:"font-bold text-lg mb-3",children:"  "}),r.jsx(un,{content:t.haccpDetails})]})]})]}):r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-3xl mx-auto",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Sl,{className:"h-20 w-20 mx-auto text-blue-400"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mt-4",children:m?"   ":"  "}),r.jsx("p",{className:"text-slate-600 mt-2",children:m?"          ()     .":"      .      ."})]}),m&&r.jsxs("div",{className:"mt-8 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"water-source",className:"block text-sm font-medium text-slate-700 mb-2",children:"  :"}),r.jsx("select",{id:"water-source",value:o,onChange:g=>c(g.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-md bg-white shadow-sm focus:ring-emerald-500 focus:border-emerald-500",children:Object.entries(b).map(([g,j])=>r.jsx("option",{value:g,children:j},g))})]}),r.jsxs("div",{className:"p-4 border-2 border-dashed rounded-lg text-center",children:[r.jsx("h4",{className:"font-semibold text-slate-700",children:"   ()"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"      ."}),r.jsx("input",{type:"file",accept:"image/*",ref:h,onChange:f,className:"hidden"}),r.jsxs("button",{onClick:()=>{var g;return(g=h.current)==null?void 0:g.click()},className:"mt-3 bg-slate-100 text-slate-700 px-4 py-2 rounded-md hover:bg-slate-200 text-sm flex items-center gap-2 mx-auto",children:[r.jsx(g0,{className:"h-5 w-5"}),d?` : ${d.file.name}`:"  "]}),d&&r.jsx("img",{src:d.preview,alt:"Preview",className:"mt-4 max-h-40 mx-auto rounded-md border"})]}),r.jsx("div",{className:"text-center",children:r.jsxs("button",{onClick:p,className:"bg-emerald-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-emerald-700 transition text-lg flex items-center gap-2 mx-auto",children:[r.jsx(Jn,{className:"h-6 w-6"}),"   AI"]})})]})]})},sk=()=>{const{activityLogs:t,team:e,currentUser:s,users:n}=Q(),i=[...t].reverse();return r.jsxs("div",{className:"printable-content",children:[r.jsx("style",{children:`
                @media print {
                    .no-print { display: none; }
                    body { background-color: white !important; }
                    .printable-content { margin: 0; padding: 0; box-shadow: none; border: none; }
                }
                `}),r.jsxs("div",{className:"no-print flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"  "}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:[r.jsx(kt,{className:"h-5 w-5"})," "]})]}),r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg border border-slate-200",children:[r.jsxs("header",{className:"text-center mb-8 border-b pb-6 border-slate-200 print:block hidden",children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mt-4",children:"  "}),r.jsxs("p",{className:"text-slate-500 mt-2 text-sm",children:[": ",s==null?void 0:s.companyName]}),r.jsxs("p",{className:"text-slate-500 mt-2 text-sm",children:["   : ",new Date().toLocaleString("ar-SA",{dateStyle:"full",timeStyle:"short"})]})]}),r.jsxs("div",{className:"space-y-6",children:[i.map(a=>{const l=e.find(o=>o.id===a.userId)||n.find(o=>o.id===a.userId);return r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"bg-slate-100 rounded-full p-2 mt-1",children:r.jsx(Ad,{className:"h-5 w-5 text-slate-500"})}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("p",{className:"font-medium text-slate-800",children:a.action}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-1",children:[r.jsxs("span",{children:[": ",(l==null?void 0:l.role)==="TEAM_MEMBER"?l.name:l==null?void 0:l.companyName]}),r.jsx("span",{children:"|"}),r.jsx("span",{children:new Date(a.timestamp).toLocaleString("ar-SA")})]})]})]},a.id)}),i.length===0&&r.jsx("p",{className:"text-center text-slate-500 py-10",children:"    ."})]})]})]})},nk=({className:t,onClick:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,onClick:e,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),$m={type:"other",customType:"",name:"",manufacturer:"",manufactureDate:"",installationDate:new Date().toISOString().split("T")[0],maintenanceSchedule:"monthly",responsiblePersonId:"",warrantyPeriod:""},Hm={oven:"",mixer:"",refrigerator:"",freezer:"",slicer:" ",grinder:" ",dishwasher:" ",ice_machine:" ",fryer:" ",grill:"",hot_holding:" ",cold_holding:"  ",packaging_machine:" ",ventilation_hood:" ",dough_sheeter:" ",proofing_cabinet:" ",blast_chiller:" ",water_filter:" ",hand_wash_station:"  ",grease_trap:" ",other:" ( )"},Vm={daily:"",weekly:"",monthly:"",quarterly:" ",annually:"",none:" "},ik=()=>{const{equipment:t,addEquipment:e,updateEquipment:s,deleteEquipment:n,team:i,tasks:a,showNotification:l,hasPermission:o}=Q(),[c,d]=M.useState(!1),[u,h]=M.useState(!1),[m,p]=M.useState(!1),[f,x]=M.useState(null),[y,b]=M.useState($m),[g,j]=M.useState({title:"",content:""}),[w,v]=M.useState({}),N=o("maintenance:manage"),k=M.useMemo(()=>a.filter(O=>O.relatedEquipmentId),[a]),_=O=>{O?(x(O),b(O)):(x(null),b($m)),d(!0)},T=()=>d(!1),C=async()=>{if(!y.name||y.type==="other"&&!y.customType){l("    .","error");return}f?(await s({...f,...y}),l("   .","success")):(await e(y),l("   .","success")),T()},L=async O=>{window.confirm("            .")&&await n(O)},D=O=>{j({title:`   (SOP)  ${O.name}`,content:O.sopContent||"    ."}),h(!0)},S=O=>{j({title:`   ${O.name}`,content:O.cleaningInstructions||"    ."}),p(!0)},E=O=>{v(z=>({...z,[O]:!z[O]})),l("   .","success")};return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"  "}),N&&r.jsxs("button",{onClick:()=>_(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition",children:[r.jsx(Nt,{className:"h-5 w-5"}),"   "]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-4",children:"  "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:" "}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-4 py-2"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:(t||[]).map(O=>{var z;return r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2 text-sm",children:Hm[O.type]||O.customType}),r.jsx("td",{className:"px-4 py-2 text-sm font-semibold",children:O.name}),r.jsx("td",{className:"px-4 py-2 text-sm",children:Vm[O.maintenanceSchedule]}),r.jsx("td",{className:"px-4 py-2 text-sm",children:(z=i.find(X=>X.id===O.responsiblePersonId))==null?void 0:z.name}),r.jsx("td",{className:"px-4 py-2",children:r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[r.jsx("button",{onClick:()=>D(O),title:"  ",children:r.jsx(on,{className:"h-5 w-5 text-slate-500 hover:text-blue-600"})}),N&&r.jsx("button",{onClick:()=>_(O),title:"",children:r.jsx(wr,{className:"h-5 w-5 text-slate-500 hover:text-yellow-600"})}),N&&r.jsx("button",{onClick:()=>L(O.id),title:"",children:r.jsx(Qe,{className:"h-5 w-5 text-slate-500 hover:text-red-600"})})]})})]},O.id)})})]})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-4",children:"   "}),r.jsx("div",{className:"space-y-3",children:(t||[]).map(O=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded",children:[r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:!!w[O.id],onChange:()=>E(O.id),className:"h-5 w-5 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),r.jsx("span",{children:O.name})]}),r.jsx("button",{onClick:()=>S(O),title:"  ",children:r.jsx(nk,{className:"h-6 w-6 text-slate-400 hover:text-blue-600"})})]},O.id))})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-4",children:"  "}),r.jsx("div",{className:"space-y-2",children:(k||[]).map(O=>{var z;return r.jsxs("div",{className:`p-3 rounded border-l-4 ${O.status==="done"?"border-green-500 bg-green-50":"border-orange-500 bg-orange-50"}`,children:[r.jsx("p",{className:"font-semibold",children:O.title}),r.jsxs("p",{className:"text-xs text-slate-500",children:[": ",(z=i.find(X=>X.id===O.assignedTo))==null?void 0:z.name," |  : ",O.dueDate]})]},O.id)})})]}),r.jsx(Ce,{isOpen:c,onClose:T,title:f?" ":"  ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsx("select",{value:y.type,onChange:O=>b(z=>({...z,type:O.target.value})),className:"w-full mt-1 p-2 border rounded bg-white",children:Object.entries(Hm).map(([O,z])=>r.jsx("option",{value:O,children:z},O))})]}),y.type==="other"&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsx("input",{type:"text",value:y.customType,onChange:O=>b(z=>({...z,customType:O.target.value})),className:"w-full mt-1 p-2 border rounded"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"  "}),r.jsx("input",{type:"text",value:y.name,onChange:O=>b(z=>({...z,name:O.target.value})),className:"w-full mt-1 p-2 border rounded"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsx("input",{type:"text",value:y.manufacturer,onChange:O=>b(z=>({...z,manufacturer:O.target.value})),className:"w-full mt-1 p-2 border rounded"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsx("input",{type:"text",value:y.warrantyPeriod,onChange:O=>b(z=>({...z,warrantyPeriod:O.target.value})),className:"w-full mt-1 p-2 border rounded"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsx("input",{type:"date",value:y.manufactureDate,onChange:O=>b(z=>({...z,manufactureDate:O.target.value})),className:"w-full mt-1 p-2 border rounded"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"  "}),r.jsx("input",{type:"date",value:y.installationDate,onChange:O=>b(z=>({...z,installationDate:O.target.value})),className:"w-full mt-1 p-2 border rounded"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsx("select",{value:y.maintenanceSchedule,onChange:O=>b(z=>({...z,maintenanceSchedule:O.target.value})),className:"w-full mt-1 p-2 border rounded bg-white",children:Object.entries(Vm).map(([O,z])=>r.jsx("option",{value:O,children:z},O))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsxs("select",{value:y.responsiblePersonId,onChange:O=>b(z=>({...z,responsiblePersonId:O.target.value})),className:"w-full mt-1 p-2 border rounded bg-white",children:[r.jsx("option",{value:"",children:" "}),i.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:C,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:f?" ":" "})})]})}),r.jsx(Ce,{isOpen:u,onClose:()=>h(!1),title:g.title,children:r.jsx("div",{className:"prose prose-sm max-w-none",children:r.jsx(un,{content:g.content})})}),r.jsx(Ce,{isOpen:m,onClose:()=>p(!1),title:g.title,children:r.jsx("div",{className:"prose prose-sm max-w-none",children:r.jsx(un,{content:g.content})})})]})},rk=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.745 3.745 0 013.296-1.043A3.745 3.745 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.745 3.745 0 011.043 3.296A3.745 3.745 0 0121 12z"})}),ak=()=>{const t="2025-10-09T07:38:00",e=[{module:"   ",status:"Success",remarks:"    ."},{module:"  ",status:"Success",remarks:"       ."},{module:"  ",status:"Success",remarks:"     ."},{module:"  ",status:"Success",remarks:"      ."},{module:"  ",status:"Success",remarks:"       ."},{module:"  (PDF/Excel)",status:"Success",remarks:"      ."},{module:"  (Audit Log)",status:"Success",remarks:"      ."},{module:"  ",status:"Success",remarks:"     ."}];return r.jsxs("div",{className:"printable-content",children:[r.jsx("style",{children:`
                @media print {
                    .no-print { display: none; }
                    body { background-color: white !important; }
                    .printable-content { margin: 0; padding: 0; box-shadow: none; border: none; }
                }
                `}),r.jsxs("div",{className:"no-print flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"   "}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:[r.jsx(kt,{className:"h-5 w-5"})," "]})]}),r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg border border-slate-200",children:[r.jsxs("header",{className:"text-center mb-8 border-b pb-6 border-slate-200",children:[r.jsx(rk,{className:"h-20 w-20 mx-auto text-emerald-500"}),r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mt-4",children:"   "}),r.jsxs("p",{className:"text-slate-500 mt-2 text-sm",children:["   : ",new Date(t).toLocaleString("ar-SA",{dateStyle:"full",timeStyle:"short"})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:" "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-center",children:[r.jsxs("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-semibold text-emerald-700",children:" "}),r.jsx("p",{className:"text-lg font-bold text-emerald-800",children:"Success"})]}),r.jsxs("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-semibold text-emerald-700",children:" "}),r.jsx("p",{className:"text-lg font-bold text-emerald-800",children:"True"})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"   "}),r.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:" / "}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:" "}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:""})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map((s,n)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800",children:s.module}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 items-center gap-1",children:[r.jsx(fn,{className:"h-4 w-4"}),s.status]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:s.remarks})]},n))})]})})]}),r.jsxs("footer",{className:"text-center mt-10 pt-6 border-t border-slate-200",children:[r.jsx("p",{className:"text-sm text-slate-600",children:"               ."}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" 2025   "})]})]})]})},lk=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),ok=()=>{const{getAllCompanyAdmins:t,updateUserStatus:e,deleteCompany:s,updateCompanyAdmin:n,resetUserPassword:i,impersonateUser:a,showNotification:l,setPrintableCompanyReportData:o,team:c,tasks:d,activityLogs:u}=Q(),[h,m]=M.useState([]),[p,f]=M.useState(!1),[x,y]=M.useState(null);M.useEffect(()=>{m(t())},[t,c]);const b=_=>{y({..._}),f(!0)},g=()=>{y(null),f(!1)},j=async()=>{x&&(await n(x),m(t()),l("    .","success"),g())},w=async _=>{const T=_.status==="active"?"inactive":"active";await e(_.id,T),m(t()),l(`     "${T==="active"?"":" "}"`,"success")},v=async _=>{window.confirm(`      "${_.companyName}"        .`)&&(await s(_.id),m(t()),l("   .","success"))},N=_=>{window.confirm(`          "${_.companyName}"`)&&i(_.id)},k=_=>{const T=c.filter(S=>S.companyId===_.id),C=T.map(S=>S.id),L=d.filter(S=>C.includes(S.assignedTo)),D=u.filter(S=>C.includes(S.userId)||S.userId===_.id);o({company:_,team:T,tasks:L,activityLogs:D})};return r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:" "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500",children:" "}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500",children:""}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500",children:" "}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500",children:""})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:h.map(_=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm font-medium text-slate-900",children:_.companyName}),r.jsx("div",{className:"text-sm text-slate-600",children:_.email})]}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:_.businessType}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("button",{onClick:()=>w(_),title:_.status==="active"?"":" ",children:_.status==="active"?r.jsx(fn,{className:"h-6 w-6 text-green-500"}):r.jsx(rx,{className:"h-6 w-6 text-red-500"})})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-700",children:new Date(_.joined).toLocaleDateString("ar-SA")}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>b(_),title:"",children:r.jsx(wr,{className:"h-5 w-5 text-slate-500 hover:text-blue-600"})}),r.jsx("button",{onClick:()=>v(_),title:"",children:r.jsx(Qe,{className:"h-5 w-5 text-slate-500 hover:text-red-600"})}),r.jsx("button",{onClick:()=>N(_),title:"   ",children:r.jsx(o0,{className:"h-5 w-5 text-slate-500 hover:text-yellow-600"})}),r.jsx("button",{onClick:()=>a(_.id),title:" ",children:r.jsx(lk,{className:"h-5 w-5 text-slate-500 hover:text-emerald-600"})}),r.jsx("button",{onClick:()=>k(_),title:" ",children:r.jsx(kt,{className:"h-5 w-5 text-slate-500 hover:text-indigo-600"})})]})})]},_.id))})]})}),x&&r.jsx(Ce,{isOpen:p,onClose:g,title:` : ${x.companyName}`,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",value:x.companyName,onChange:_=>y({...x,companyName:_.target.value}),className:"w-full p-2 border rounded"}),r.jsx("input",{type:"email",value:x.email,onChange:_=>y({...x,email:_.target.value}),className:"w-full p-2 border rounded"}),r.jsxs("select",{value:x.businessType,onChange:_=>y({...x,businessType:_.target.value}),className:"w-full p-2 border rounded bg-white",children:[r.jsx("option",{value:"factory",children:""}),r.jsx("option",{value:"kitchen",children:" "}),r.jsx("option",{value:"restaurant",children:""})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:j,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:" "})})]})})]})},ck=()=>{const{getPendingCompanies:t,approveRegistration:e,rejectRegistration:s}=Q(),[n,i]=M.useState([]);M.useEffect(()=>{i(t())},[t,e,s]);const a=async o=>{await e(o)},l=async o=>{window.confirm("       ")&&await s(o)};return r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"  "}),n.length===0?r.jsx("p",{className:"text-slate-500 text-center py-8",children:"       ."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:" "}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:" "}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:" "}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:""})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:n.map(o=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:o.companyName}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700",children:o.email}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700",children:new Date(o.joined).toLocaleDateString("ar-SA")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>a(o.id),className:"px-3 py-1.5 text-xs font-medium text-white bg-green-600 rounded-md hover:bg-green-700",children:""}),r.jsx("button",{onClick:()=>l(o.id),className:"px-3 py-1.5 text-xs font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:""})]})})]},o.id))})]})})]})},dk=()=>{const{supportTickets:t,updateSupportTicket:e}=Q(),[s,n]=M.useState(!1),[i,a]=M.useState(null),[l,o]=M.useState(""),c=h=>{a(h),o(h.reply||""),n(!0)},d=()=>{n(!1),a(null),o("")},u=async()=>{i&&l.trim()&&(await e(i.id,l),d())};return r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"  "}),r.jsx("div",{className:"space-y-4",children:t.map(h=>r.jsxs("div",{className:"p-4 border rounded-md flex justify-between items-center hover:bg-slate-50 cursor-pointer",onClick:()=>c(h),children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-800",children:h.subject}),r.jsxs("p",{className:"text-sm text-slate-600",children:[h.companyName," - ",new Date(h.createdAt).toLocaleString("ar-SA")]})]}),r.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${h.status==="open"?"bg-blue-100 text-blue-800":"bg-slate-200 text-slate-800"}`,children:h.status==="open"?"":""})]},h.id))}),i&&r.jsx(Ce,{isOpen:s,onClose:d,title:` : ${i.subject}`,children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-slate-50 rounded-md",children:[r.jsxs("p",{className:"text-sm font-medium text-slate-600",children:[": ",i.companyName]}),r.jsx("p",{className:"mt-2 text-slate-800",children:i.message})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"  "}),r.jsx("textarea",{value:l,onChange:h=>o(h.target.value),rows:5,className:"w-full p-2 border border-slate-300 rounded-md",placeholder:i.status==="closed"?"    .":"  ...",disabled:i.status==="closed"})]}),r.jsxs("div",{className:"flex justify-end pt-4",children:[r.jsx("button",{onClick:d,type:"button",className:"bg-white py-2 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-slate-700 hover:bg-slate-50",children:""}),i.status==="open"&&r.jsx("button",{onClick:u,className:"me-3 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:" "})]})]})})]})},uk=()=>{const{showNotification:t}=Q(),[e,s]=M.useState(""),[n,i]=M.useState(""),a=l=>{if(l.preventDefault(),!e||!n){t("    .","error");return}console.log("Sending announcement:",{subject:e,message:n}),t("     !","success"),s(""),i("")};return r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:" "}),r.jsxs("div",{className:"p-6 border rounded-lg",children:[r.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-4",children:"  "}),r.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"            ."}),r.jsxs("form",{onSubmit:a,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-slate-700 mb-1",children:""}),r.jsx("input",{type:"text",id:"subject",value:e,onChange:l=>s(l.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md",placeholder:":   "})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),r.jsx("textarea",{id:"message",value:n,onChange:l=>i(l.target.value),rows:6,className:"w-full px-4 py-2 border border-slate-300 rounded-md",placeholder:"   ..."})]}),r.jsx("div",{className:"flex justify-end pt-2",children:r.jsx("button",{type:"submit",className:"bg-emerald-600 text-white px-5 py-2.5 rounded-md hover:bg-emerald-700",children:"  "})})]})]})]})},ni=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),hk=()=>{const{printablePlanProductId:t,setPrintablePlanProductId:e,products:s,processFlows:n,ccpDeterminations:i,criticalLimits:a,monitoringProcedures:l,correctiveActions:o,verificationProcedures:c,recordKeeping:d,companyInfo:u}=Q();if(!t)return r.jsxs("div",{className:"p-8",children:[r.jsx("p",{children:"   .     ."}),r.jsx("button",{onClick:()=>e(null),className:"mt-4 bg-slate-500 text-white px-4 py-2 rounded",children:""})]});const h=s.find(x=>x.id===t),m=n.find(x=>x.productId===t),p=[{title:" 2:    ",content:i[t]},{title:" 3:   ",content:a[t]},{title:" 4:  ",content:l[t]},{title:" 5:  ",content:o[t]},{title:" 6:  ",content:c[t]},{title:" 7:   ",content:d[t]}],f=(x,y)=>r.jsxs("div",{className:"mb-8 page-break",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 border-b-2 border-emerald-500 pb-2 mb-4",children:x}),y]});return r.jsxs("div",{className:"bg-slate-100 min-h-screen",children:[r.jsx("style",{children:`
                @media print {
                    .no-print { display: none; }
                    body, .printable-area { margin: 0; padding: 0; font-size: 10pt; }
                    .page-break { page-break-inside: avoid; }
                    h1 { font-size: 24pt; }
                    h2 { font-size: 16pt; }
                    h3 { font-size: 12pt; }
                }
                `}),r.jsxs("div",{className:"no-print p-4 bg-white shadow-md flex justify-between items-center",children:[r.jsx("h1",{className:"text-lg font-semibold",children:"   "}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>e(null),className:"flex items-center gap-2 bg-slate-500 text-white px-4 py-2 rounded-md hover:bg-slate-600",children:[r.jsx(ni,{className:"h-5 w-5"}),""]}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:[r.jsx(kt,{className:"h-5 w-5"})," "]})]})]}),r.jsxs("div",{className:"printable-area p-8 max-w-4xl mx-auto bg-white my-8 shadow-lg",children:[r.jsxs("header",{className:"text-center mb-10 border-b pb-6",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"      (HACCP)"}),r.jsxs("p",{className:"text-slate-600 mt-2 text-lg",children:[": ",r.jsx("span",{className:"font-bold",children:(h==null?void 0:h.name)||" "})]}),r.jsxs("p",{className:"text-slate-500 mt-1",children:[": ",u.companyName]}),r.jsxs("p",{className:"text-slate-500 text-sm",children:[" : ",new Date().toLocaleDateString("ar-SA")]})]}),f(" 1:  ",r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm border-collapse border",children:[r.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-2 border",children:""}),r.jsx("th",{className:"px-2 py-2 border",children:" "}),r.jsx("th",{className:"px-2 py-2 border",children:""}),r.jsx("th",{className:"px-2 py-2 border",children:" "}),r.jsx("th",{className:"px-2 py-2 border",children:"CCP/PRP"})]})}),r.jsx("tbody",{children:m==null?void 0:m.steps.map(x=>{var j,w,v,N;const y=x.hazardAnalysis,b=(y==null?void 0:y.controlPointType)||(y!=null&&y.isCCP?"CCP":"PRP"),g=b==="CCP"?"text-red-600":b==="oPRP"?"text-blue-600":"text-green-600";return r.jsxs("tr",{className:"bg-white border-b",children:[r.jsxs("td",{className:"px-2 py-2 border font-semibold align-top",children:[x.stepNumber,". ",x.description]}),r.jsx("td",{className:"px-2 py-2 border align-top",children:(j=x.hazardAnalysis)==null?void 0:j.hazards.map((k,_)=>r.jsxs("div",{className:"mb-1",children:[k.description," ",r.jsxs("span",{className:"text-xs text-slate-500",children:["(",k.type,")"]})]},_))}),r.jsx("td",{className:"px-2 py-2 border align-top",children:(w=x.hazardAnalysis)==null?void 0:w.cause}),r.jsx("td",{className:"px-2 py-2 border align-top",children:(v=x.hazardAnalysis)==null?void 0:v.controlMeasures}),r.jsxs("td",{className:"px-2 py-2 border text-center align-top",children:[r.jsx("span",{className:`font-bold ${g}`,children:b}),r.jsx("p",{className:"text-xs text-slate-500",children:(N=x.hazardAnalysis)==null?void 0:N.justification})]})]},x.id)})})]})})),p.map(x=>x.content&&r.jsxs("div",{className:"page-break",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 border-b-2 border-emerald-500 pb-2 mb-4",children:x.title}),r.jsx(un,{content:x.content})]},x.title))]})]})},mk=({justification:t,controlPointType:e})=>{const s=[{key:"Q1",text:"         "},{key:"Q2",text:"            "},{key:"Q3",text:"               "},{key:"Q4",text:"           "}];if(!t||e!=="CCP"&&e!=="oPRP")return r.jsx("p",{className:"text-xs text-slate-500 italic mt-2",children:"  (PRP)."});const n={};return t.split(",").map(a=>a.trim()).forEach(a=>{const[l,o]=a.split(":").map(c=>c.trim());l&&o&&(n[l]=o.toLowerCase())}),r.jsxs("table",{className:"w-full text-xs mt-2 border-collapse border border-slate-300",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-1 border border-slate-300 text-right",children:" (   )"}),r.jsx("th",{className:"p-1 border border-slate-300 text-center w-20",children:""})]})}),r.jsx("tbody",{children:s.map((a,l)=>{const o=n[a.key];if(!o)return null;const c=o==="yes"||o==="";return r.jsxs("tr",{children:[r.jsx("td",{className:"p-2 border border-slate-300",children:a.text}),r.jsx("td",{className:`p-2 border border-slate-300 text-center font-semibold ${c?"text-green-700 bg-green-50":"text-red-700 bg-red-50"}`,children:c?"":""})]},l)})})]})},fk=()=>{const{printableProcessFlowProductId:t,setPrintableProcessFlowProductId:e,products:s,processFlows:n,companyInfo:i}=Q();if(!t)return r.jsxs("div",{className:"p-8",children:[r.jsx("p",{children:"   ."}),r.jsx("button",{onClick:()=>e(null),className:"mt-4 bg-slate-500 text-white px-4 py-2 rounded",children:""})]});const a=s.find(o=>o.id===t),l=n.find(o=>o.productId===t);return r.jsxs("div",{className:"bg-slate-100 min-h-screen",children:[r.jsx("style",{children:`
                @media print {
                    .no-print { display: none; }
                    body, .printable-area { margin: 0; padding: 0; font-size: 10pt; }
                    .page-break { page-break-inside: avoid; }
                    h1 { font-size: 24pt; }
                    h2 { font-size: 16pt; }
                    h3 { font-size: 12pt; }
                }
                `}),r.jsxs("div",{className:"no-print p-4 bg-white shadow-md flex justify-between items-center",children:[r.jsx("h1",{className:"text-lg font-semibold",children:"   "}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>e(null),className:"flex items-center gap-2 bg-slate-500 text-white px-4 py-2 rounded-md hover:bg-slate-600",children:[r.jsx(ni,{className:"h-5 w-5"}),""]}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:[r.jsx(kt,{className:"h-5 w-5"}),""]})]})]}),r.jsxs("div",{className:"printable-area p-8 max-w-4xl mx-auto bg-white my-8 shadow-lg",children:[r.jsxs("header",{className:"text-center mb-10 border-b pb-6",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"    "}),r.jsxs("p",{className:"text-slate-600 mt-2 text-lg",children:[": ",r.jsx("span",{className:"font-bold",children:(a==null?void 0:a.name)||" "})]}),r.jsxs("p",{className:"text-slate-500 mt-1",children:[": ",i.companyName]}),r.jsxs("p",{className:"text-slate-500 text-sm",children:[" : ",new Date().toLocaleDateString("ar-SA")]})]}),r.jsx("div",{className:"space-y-8",children:l==null?void 0:l.steps.map(o=>{const c=o.hazardAnalysis,d=(c==null?void 0:c.controlPointType)||"PRP",u=d==="CCP"?"  ":d==="oPRP"?"  ":" ",h=d==="CCP"?"bg-red-100 text-red-800":d==="oPRP"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800";return r.jsxs("div",{className:"page-break border-t-2 border-slate-200 pt-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"font-bold text-xl bg-slate-700 text-white rounded-full h-10 w-10 flex items-center justify-center flex-shrink-0",children:o.stepNumber}),r.jsx("h3",{className:"font-bold text-slate-800 text-xl",children:o.description})]}),r.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${h}`,children:u})]}),c?r.jsxs("div",{className:"space-y-4 pr-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-700 text-base mb-2",children:"1.  "}),r.jsxs("table",{className:"w-full text-sm border-collapse border border-slate-300",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 border border-slate-300 text-right w-1/3",children:""}),r.jsx("th",{className:"p-2 border border-slate-300 text-right w-1/3",children:""}),r.jsx("th",{className:"p-2 border border-slate-300 text-right w-1/3",children:" "})]})}),r.jsx("tbody",{children:r.jsxs("tr",{children:[r.jsx("td",{className:"p-2 border border-slate-300 align-top",children:c.hazards.map((m,p)=>r.jsxs("div",{className:"mb-1",children:[m.description," ",r.jsxs("span",{className:"text-xs text-slate-500",children:["(",m.type,")"]})]},p))}),r.jsx("td",{className:"p-2 border border-slate-300 align-top",children:c.cause}),r.jsx("td",{className:"p-2 border border-slate-300 align-top",children:c.controlMeasures})]})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-700 text-base mb-2",children:"2.    "}),r.jsx(mk,{justification:c.justification,controlPointType:d})]})]}):r.jsx("p",{className:"pr-4 text-sm text-slate-500",children:"     ."})]},o.id)})})]})]})},pk=()=>{var b,g;const{printableMockRecall:t,setPrintableMockRecall:e,products:s,suppliers:n,team:i}=Q();if(!t)return r.jsxs("div",{className:"p-8",children:[r.jsx("p",{children:"   .    ."}),r.jsx("button",{onClick:()=>e(null),className:"mt-4 bg-slate-500 text-white px-4 py-2 rounded",children:""})]});const{targetBatchNumber:a,startTime:l,endTime:o,traceabilityResults:c,team:d,tasks:u,finalDecision:h,correctiveActions:m}=t,p=o?Math.round((o-l)/1e3):0,f=j=>`${Math.floor(j/60)}   ${j%60} `,x=((b=s.find(j=>{var w;return j.id===((w=c.backward)==null?void 0:w.productId)}))==null?void 0:b.name)||" ",y=(j,w)=>r.jsxs("div",{className:"mb-6 page-break",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 border-b-2 border-emerald-500 pb-2 mb-4",children:j}),w]});return r.jsxs("div",{className:"bg-slate-100 min-h-screen",children:[r.jsx("style",{children:`
                @media print {
                    .no-print { display: none; }
                    body, .printable-area { margin: 0; padding: 0; }
                    .page-break { page-break-inside: avoid; }
                }
                `}),r.jsxs("div",{className:"no-print p-4 bg-white shadow-md flex justify-between items-center",children:[r.jsx("h1",{className:"text-lg font-semibold",children:"   "}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>e(null),className:"flex items-center gap-2 bg-slate-500 text-white px-4 py-2 rounded-md hover:bg-slate-600",children:[r.jsx(ni,{className:"h-5 w-5"}),""]}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:[r.jsx(kt,{className:"h-5 w-5"})," "]})]})]}),r.jsxs("div",{className:"printable-area p-8 max-w-4xl mx-auto bg-white my-8 shadow-lg",children:[r.jsxs("header",{className:"text-center mb-8 border-b pb-4",children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"   "}),r.jsxs("p",{className:"text-slate-600",children:[" : ",new Date().toLocaleDateString("ar-SA")]})]}),y("1.  ",r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{className:"text-slate-800",children:":"})," ",x]}),r.jsxs("p",{children:[r.jsx("strong",{className:"text-slate-800",children:" :"})," ",r.jsx("span",{className:"font-mono",children:a})]}),r.jsxs("p",{children:[r.jsx("strong",{className:"text-slate-800",children:"  :"})," ",new Date(l).toLocaleString("ar-SA")]}),r.jsxs("p",{children:[r.jsx("strong",{className:"text-slate-800",children:"  :"})," ",o?new Date(o).toLocaleString("ar-SA"):"N/A"]}),r.jsxs("p",{className:"col-span-2",children:[r.jsx("strong",{className:"text-slate-800",children:"  :"})," ",r.jsx("span",{className:"font-bold",children:f(p)})]})]})),y("2.  ",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-800",children:"  ()"}),r.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-700",children:(g=c.backward)==null?void 0:g.usedIngredients.map((j,w)=>{const v=s.find(_=>{var T;return _.id===((T=c.backward)==null?void 0:T.productId)}),N=v==null?void 0:v.ingredients.find(_=>_.id===j.ingredientId),k=n.find(_=>_.id===(N==null?void 0:N.supplierId));return r.jsxs("li",{children:[(N==null?void 0:N.name)||"  "," (: ",(k==null?void 0:k.name)||" ",")"]},w)})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-800",children:"  ()"}),r.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-700",children:c.forward.map(j=>r.jsxs("li",{children:[j.customer.name," (: ",j.orderNumber,")"]},j.id))})]})]})),y("3.   ",r.jsxs("table",{className:"w-full text-sm text-left border-collapse border border-slate-300",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 font-semibold text-slate-700",children:"  "})]})}),r.jsx("tbody",{children:d.map(j=>{const w=i.find(v=>v.id===j.memberId);return r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:(w==null?void 0:w.name)||" "}),r.jsx("td",{className:"p-2 text-slate-800",children:j.role})]},j.memberId)})})]})),y("4.   ",r.jsxs("table",{className:"w-full text-sm text-left border-collapse border border-slate-300",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 font-semibold text-slate-700",children:""})]})}),r.jsx("tbody",{children:u.map(j=>{const w=i.find(v=>v.id===j.assignedTo);return r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:j.title}),r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:j.category}),r.jsx("td",{className:"p-2 text-slate-800",children:(w==null?void 0:w.name)||" "})]},j.id)})})]})),y("5.    ",r.jsxs("div",{className:"text-sm space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-800",children:"    "}),r.jsx("p",{className:"p-3 bg-slate-50 rounded mt-1 text-slate-700",children:h||" "})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-800",children:"    "}),r.jsx("p",{className:"p-3 bg-slate-50 rounded mt-1 text-slate-700",children:m||" "})]})]}))]})]})},xk=()=>{const{printableRecallPlanBatchNumber:t,setPrintableRecallPlanBatchNumber:e,companyInfo:s,recallProcesses:n,team:i}=Q();if(!t)return r.jsxs("div",{className:"p-8",children:[r.jsx("p",{children:"   ."}),r.jsx("button",{onClick:()=>e(null),className:"mt-4 bg-slate-500 text-white px-4 py-2 rounded",children:""})]});const a=n.find(u=>u.batchNumber===t),l=a?`##     ${a.batchNumber}

**:** ${a.reason}`:"",o={pending:" ",isolated:" ",disposed:" ",returned:" "},c={todo:"",inprogress:" ",done:""},d=(u,h)=>r.jsxs("div",{className:"mb-8 page-break",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 border-b-2 border-emerald-500 pb-2 mb-4",children:u}),h]});return r.jsxs("div",{className:"bg-slate-100 min-h-screen",children:[r.jsx("style",{children:`
                @media print {
                    .no-print { display: none; }
                    body, .printable-area { margin: 0; padding: 0; font-size: 10pt; }
                    .page-break { page-break-inside: avoid; }
                    h1 { font-size: 24pt; }
                    h2 { font-size: 16pt; }
                    h3 { font-size: 12pt; }
                }
                `}),r.jsxs("div",{className:"no-print p-4 bg-white shadow-md flex justify-between items-center",children:[r.jsx("h1",{className:"text-lg font-semibold",children:"   "}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>e(null),className:"flex items-center gap-2 bg-slate-500 text-white px-4 py-2 rounded-md hover:bg-slate-600",children:[r.jsx(ni,{className:"h-5 w-5"}),""]}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:[r.jsx(kt,{className:"h-5 w-5"})," "]})]})]}),r.jsxs("div",{className:"printable-area p-8 max-w-4xl mx-auto bg-white my-8 shadow-lg",children:[r.jsxs("header",{className:"text-center mb-10 border-b pb-6",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"  "}),r.jsxs("p",{className:"text-slate-600 mt-2 text-lg",children:[": ",r.jsx("span",{className:"font-bold font-mono",children:t})]}),r.jsxs("p",{className:"text-slate-500 mt-1",children:[": ",s.companyName]}),r.jsxs("p",{className:"text-slate-500 text-sm",children:[" : ",new Date().toLocaleDateString("ar-SA")]})]}),d("1.   ",r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{className:"text-slate-800",children:" :"})," ",(a==null?void 0:a.reason)||" "]}),r.jsxs("p",{children:[r.jsx("strong",{className:"text-slate-800",children:" :"})," ",a?new Date(a.initiatedAt).toLocaleString("ar-SA"):" "]})]})),l&&d("2.  ",r.jsx(un,{content:l})),a&&a.team.length>0&&d("3.  ",r.jsxs("table",{className:"w-full text-sm text-left border-collapse border border-slate-300",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 font-semibold text-slate-700",children:""})]})}),r.jsx("tbody",{children:a.team.map(u=>{const h=i.find(m=>m.id===u.memberId);return r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:(h==null?void 0:h.name)||"  "}),r.jsx("td",{className:"p-2 text-slate-800",children:u.role})]},u.memberId)})})]})),a&&a.affectedCustomers.length>0&&d("4.   ",r.jsxs("table",{className:"w-full text-sm text-left border-collapse border border-slate-300",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 border-r border-slate-300 text-center font-semibold text-slate-700",children:" "}),r.jsx("th",{className:"p-2 border-r border-slate-300 text-center font-semibold text-slate-700",children:" "}),r.jsx("th",{className:"p-2 font-semibold text-slate-700",children:" "})]})}),r.jsx("tbody",{children:a.affectedCustomers.map(u=>r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:u.customerName}),r.jsx("td",{className:"p-2 border-r border-slate-300 text-center text-slate-800",children:u.quantity}),r.jsx("td",{className:"p-2 border-r border-slate-300 text-center text-slate-800",children:u.quantityRestored||0}),r.jsx("td",{className:"p-2 text-slate-800",children:o[u.actionTaken]||u.actionTaken})]},u.customerId))})]})),a&&(a.processingTasks.length>0||a.disposalTasks.length>0)&&d("5.   ",r.jsxs("table",{className:"w-full text-sm text-left border-collapse border border-slate-300",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 font-semibold text-slate-700",children:""})]})}),r.jsx("tbody",{children:[...a.processingTasks.map(u=>({...u,type:""})),...a.disposalTasks.map(u=>({...u,type:""}))].map(u=>{const h=i.find(m=>m.id===u.assignedTo);return r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:u.title}),r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:u.type}),r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:(h==null?void 0:h.name)||" "}),r.jsx("td",{className:"p-2 text-slate-800",children:c[u.status]||u.status})]},u.id)})})]}))]})]})},gk=()=>{const{printableCompanyReportData:t,setPrintableCompanyReportData:e}=Q();if(!t)return r.jsxs("div",{className:"p-8",children:[r.jsx("p",{children:"   ."}),r.jsx("button",{onClick:()=>e(null),className:"mt-4 bg-slate-500 text-white px-4 py-2 rounded",children:""})]});const{company:s,team:n,tasks:i,activityLogs:a}=t,l=(c,d)=>r.jsxs("div",{className:"mb-8 page-break",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 border-b-2 border-emerald-500 pb-2 mb-4",children:c}),d]}),o={todo:{text:"",className:"bg-blue-100 text-blue-800"},inprogress:{text:" ",className:"bg-orange-100 text-orange-800"},done:{text:"",className:"bg-green-100 text-green-800"}};return r.jsxs("div",{className:"bg-slate-100 min-h-screen",children:[r.jsx("style",{children:`
                @media print {
                    .no-print { display: none; }
                    body, .printable-area { margin: 0; padding: 0; font-size: 10pt; }
                    .page-break { page-break-inside: avoid; }
                    h1 { font-size: 24pt; }
                    h2 { font-size: 16pt; }
                    h3 { font-size: 12pt; }
                }
                `}),r.jsxs("div",{className:"no-print p-4 bg-white shadow-md flex justify-between items-center",children:[r.jsx("h1",{className:"text-lg font-semibold",children:" "}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>e(null),className:"flex items-center gap-2 bg-slate-500 text-white px-4 py-2 rounded-md hover:bg-slate-600",children:[r.jsx(ni,{className:"h-5 w-5"}),""]}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:[r.jsx(kt,{className:"h-5 w-5"})," "]})]})]}),r.jsxs("div",{className:"printable-area p-8 max-w-4xl mx-auto bg-white my-8 shadow-lg",children:[r.jsxs("header",{className:"text-center mb-10 border-b pb-6",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"  "}),r.jsxs("p",{className:"text-slate-600 mt-2 text-lg",children:[": ",r.jsx("span",{className:"font-bold",children:s.companyName})]}),r.jsxs("p",{className:"text-slate-500 text-sm",children:[" : ",new Date().toLocaleDateString("ar-SA")]})]}),l("1.  ",r.jsxs("table",{className:"w-full text-sm text-left border-collapse border border-slate-300",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 font-semibold text-slate-700",children:" "})]})}),r.jsx("tbody",{children:n.map(c=>r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:c.name}),r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:c.email}),r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:c.position}),r.jsx("td",{className:"p-2 text-slate-800",children:c.haccpRole})]},c.id))})]})),l("2.  ",r.jsxs("table",{className:"w-full text-sm text-left border-collapse border border-slate-300",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 font-semibold text-slate-700",children:""})]})}),r.jsx("tbody",{children:[...i].reverse().slice(0,10).map(c=>{const d=n.find(u=>u.id===c.assignedTo);return r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:c.title}),r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:(d==null?void 0:d.name)||" "}),r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:o[c.status].text}),r.jsxs("td",{className:"p-2 text-slate-800",children:[c.progress,"%"]})]},c.id)})})]})),l("3.   ",r.jsxs("table",{className:"w-full text-sm text-left border-collapse border border-slate-300",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 border-r border-slate-300 font-semibold text-slate-700",children:""}),r.jsx("th",{className:"p-2 font-semibold text-slate-700",children:" "})]})}),r.jsx("tbody",{children:[...a].reverse().map(c=>r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:c.action}),r.jsx("td",{className:"p-2 border-r border-slate-300 text-slate-800",children:c.userName}),r.jsx("td",{className:"p-2 text-slate-800",children:new Date(c.timestamp).toLocaleString("ar-SA")})]},c.id))})]}))]})]})},bk=()=>{const{printableWaterHACCP:t,setPrintableWaterHACCP:e,waterHaccpPlan:s,companyInfo:n}=Q();if(!s)return r.jsxs("div",{className:"p-8",children:[r.jsx("p",{children:"   .    ."}),r.jsx("button",{onClick:()=>e(!1),className:"mt-4 bg-slate-500 text-white px-4 py-2 rounded",children:""})]});const i=(l,o)=>r.jsxs("div",{className:"mb-8 page-break",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 border-b-2 border-emerald-500 pb-2 mb-4",children:l}),o]}),a={public_network:"  ",well:" ",tanker:" ",bottled:" "};return r.jsxs("div",{className:"bg-slate-100 min-h-screen",children:[r.jsx("style",{children:`
                @media print {
                    .no-print { display: none; }
                    body, .printable-area { margin: 0; padding: 0; font-size: 10pt; }
                    .page-break { page-break-inside: avoid; }
                    h1 { font-size: 24pt; }
                    h2 { font-size: 16pt; }
                    h3 { font-size: 12pt; }
                }
                `}),r.jsxs("div",{className:"no-print p-4 bg-white shadow-md flex justify-between items-center",children:[r.jsx("h1",{className:"text-lg font-semibold",children:"    "}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>e(!1),className:"flex items-center gap-2 bg-slate-500 text-white px-4 py-2 rounded-md hover:bg-slate-600",children:[r.jsx(ni,{className:"h-5 w-5"}),""]}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700",children:[r.jsx(kt,{className:"h-5 w-5"})," "]})]})]}),r.jsxs("div",{className:"printable-area p-8 max-w-4xl mx-auto bg-white my-8 shadow-lg",children:[r.jsxs("header",{className:"text-center mb-10 border-b pb-6",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"      (HACCP) "}),r.jsxs("p",{className:"text-slate-500 mt-1",children:[": ",n.companyName]}),r.jsxs("p",{className:"text-slate-500 text-sm",children:[" : ",new Date().toLocaleDateString("ar-SA")]})]}),i(" ",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:" :"}),r.jsx("p",{className:"text-slate-700",children:a[s.source]})]}),s.sketchUrl&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:" :"}),r.jsx("img",{src:s.sketchUrl,alt:" ",className:"mt-2 border rounded-md max-h-40"})]})]})),i("  ",r.jsxs("table",{className:"min-w-full text-sm border-collapse border",children:[r.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-2 border",children:""}),r.jsx("th",{className:"px-2 py-2 border",children:""}),r.jsx("th",{className:"px-2 py-2 border",children:" "})]})}),r.jsx("tbody",{children:s.requiredTests.map(l=>r.jsxs("tr",{className:"bg-white border-b",children:[r.jsx("td",{className:"px-2 py-2 border font-semibold",children:l.name}),r.jsx("td",{className:"px-2 py-2 border",children:l.frequency}),r.jsx("td",{className:"px-2 py-2 border",children:l.lastCheck?new Date(l.lastCheck).toLocaleDateString("ar-SA"):"  "})]},l.id))})]})),i(" ",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-2",children:"  "}),r.jsx("ul",{className:"list-disc list-inside space-y-2",children:s.recommendedFilters.map(l=>r.jsxs("li",{children:[r.jsxs("strong",{children:[l.type,":"]})," ",l.maintenanceSchedule]},l.id))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-2",children:" "}),r.jsx("ul",{className:"list-disc list-inside space-y-2",children:s.chemicals.map((l,o)=>r.jsx("li",{children:l},o))})]})]})),i("  ",r.jsx(un,{content:s.haccpDetails}))]})]})},la=({prpKey:t})=>{const{prpPlans:e,generateAndSavePRP:s,getCompanyBusinessType:n,hasPermission:i}=Q(),[a,l]=M.useState(!1),[o,c]=M.useState(null),d=M.useRef(null),u=e[t],h=n(),m=l0[t],p=async()=>{if(!h)return;l(!0);let b;if(o){const g=new FileReader;g.readAsDataURL(o.file),g.onloadend=async()=>{b={base64:g.result.split(",")[1],mimeType:o.file.type},await s(t,h,b),l(!1)}}else await s(t,h),l(!1)},f=b=>{var j;const g=(j=b.target.files)==null?void 0:j[0];g&&c({file:g,preview:URL.createObjectURL(g)})},x=t==="pestControl",y=i("prp:manage");return r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:[" : ",m.title]}),!u&&!a&&r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center max-w-2xl mx-auto",children:[r.jsx(p0,{className:"h-16 w-16 mx-auto text-slate-300"}),r.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-4",children:y?"    ":"  "}),r.jsx("p",{className:"text-slate-600 mt-2",children:y?`       "${m.title}"    .`:"      ."}),y&&r.jsxs(r.Fragment,{children:[x&&r.jsxs("div",{className:"mt-6 p-4 border-2 border-dashed rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-slate-700",children:"    ()"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"    (Site Plan)        ."}),r.jsx("input",{type:"file",accept:"image/*",ref:d,onChange:f,className:"hidden"}),r.jsxs("button",{onClick:()=>{var b;return(b=d.current)==null?void 0:b.click()},className:"mt-3 bg-slate-100 text-slate-700 px-4 py-2 rounded-md hover:bg-slate-200 text-sm flex items-center gap-2 mx-auto",children:[r.jsx(g0,{className:"h-5 w-5"}),o?` : ${o.file.name}`:"  "]}),o&&r.jsx("img",{src:o.preview,alt:"Preview",className:"mt-4 max-h-40 mx-auto rounded-md border"})]}),r.jsxs("button",{onClick:p,className:"mt-6 bg-emerald-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-emerald-700 transition text-lg flex items-center gap-2 mx-auto",children:[r.jsx(Jn,{className:"h-6 w-6"}),"  "]})]})]}),a&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-emerald-500 border-dashed rounded-full animate-spin"}),r.jsx("p",{className:"mt-4 text-slate-600",children:"    ..."})]}),u&&!a&&r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[r.jsx(un,{content:u}),y&&r.jsx("div",{className:"text-center mt-8 pt-6 border-t",children:r.jsxs("button",{onClick:p,className:"bg-blue-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-blue-700 transition text-base flex items-center gap-2 mx-auto",children:[r.jsx(Jn,{className:"h-5 w-5"}),"  "]})})]})]})},vk=()=>{const{currentUser:t,activePage:e,getCompanyBusinessType:s,printablePlanProductId:n,printableProcessFlowProductId:i,printableMockRecall:a,printableRecallPlanBatchNumber:l,printableCompanyReportData:o,printableWaterHACCP:c}=Q(),[d,u]=M.useState("login");if(n)return r.jsx(hk,{});if(i)return r.jsx(fk,{});if(a)return r.jsx(pk,{});if(l)return r.jsx(xk,{});if(o)return r.jsx(gk,{});if(c)return r.jsx(bk,{});if(!t)return r.jsxs("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4",children:[d==="login"&&r.jsx(o5,{onNavigateToRegister:()=>u("register"),onNavigateToAdminLogin:()=>u("admin-login")}),d==="register"&&r.jsx(c5,{onNavigateToLogin:()=>u("login"),onRegisterSuccess:p=>{console.log("Registered",p),u("login")}}),d==="admin-login"&&r.jsx(d5,{onNavigateToCompanyLogin:()=>u("login")})]});const h=s()==="kitchen"||s()==="restaurant",m=()=>{if(t.role==="PLATFORM_ADMIN")switch(e){case"Dashboard":return r.jsx(Em,{});case"CompanyManagement":return r.jsx(ok,{});case"RegistrationRequests":return r.jsx(ck,{});case"SupportTickets":return r.jsx(dk,{});case"PlatformSettings":return r.jsx(uk,{});default:return r.jsx(Em,{})}switch(e){case"Dashboard":return r.jsx(mh,{});case"Products":return r.jsx(f5,{});case"Suppliers":return r.jsx(p5,{});case"Team":return r.jsx(g5,{});case"Tasks":return r.jsx(y5,{});case"BeneficiaryInfo":return r.jsx(j5,{});case"HACCPPlan":return r.jsx(w5,{});case"ProcessFlow":return r.jsx(_5,{});case"CCPDetermination":return r.jsx(C5,{});case"CriticalLimits":return r.jsx(P5,{});case"Monitoring":return r.jsx(D5,{});case"CorrectiveActions":return r.jsx(I5,{});case"Verification":return r.jsx(O5,{});case"RecordKeeping":return r.jsx(R5,{});case"PRPs":return r.jsx(z5,{});case"Training":return r.jsx(B5,{});case"ProductionOrders":return r.jsx(W5,{});case"SalesOrders":return r.jsx($5,{});case"Inventory":return r.jsx(H5,{});case"Traceability":return r.jsx(Y5,{});case"RecallManagement":return r.jsx(q5,{});case"MockRecall":return r.jsx(X5,{});case"TemperatureMonitoring":return r.jsx(ek,{});case"WaterHACCP":return r.jsx(tk,{});case"ActivityLog":return r.jsx(sk,{});case"Maintenance":return r.jsx(ik,{});case"SystemVerification":return r.jsx(ak,{});case"PersonalHygiene":return r.jsx(la,{prpKey:"personalHygiene"});case"CleaningAndSanitation":return r.jsx(la,{prpKey:"cleaningAndSanitation"});case"PestControl":return r.jsx(la,{prpKey:"pestControl"});case"SupplierControl":return r.jsx(la,{prpKey:"supplierControl"});default:return r.jsx(mh,{})}};return r.jsxs("div",{className:"flex h-screen bg-slate-100",dir:"rtl",children:[h?r.jsx(Gy,{}):r.jsx(Ky,{}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx(Jy,{}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-slate-100 p-8",children:m()})]})]})},b0=document.getElementById("root");if(!b0)throw new Error("Could not find root element to mount to");const yk=_o.createRoot(b0);yk.render(r.jsx(tf.StrictMode,{children:r.jsx(Xy,{children:r.jsx(vk,{})})}));
